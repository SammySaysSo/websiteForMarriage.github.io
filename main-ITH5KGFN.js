var RN=Object.defineProperty,NN=Object.defineProperties;var MN=Object.getOwnPropertyDescriptors;var OE=Object.getOwnPropertySymbols;var kN=Object.prototype.hasOwnProperty,xN=Object.prototype.propertyIsEnumerable;var PE=(t,e,n)=>e in t?RN(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,E=(t,e)=>{for(var n in e||={})kN.call(e,n)&&PE(t,n,e[n]);if(OE)for(var n of OE(e))xN.call(e,n)&&PE(t,n,e[n]);return t},re=(t,e)=>NN(t,MN(e));var Ue=null,Yc=!1,lh=1,ON=null,mt=Symbol("SIGNAL");function P(t){let e=Ue;return Ue=t,e}function Qc(){return Ue}var Zc={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Jc(t){if(Yc)throw new Error("");if(Ue===null)return;Ue.consumerOnSignalRead(t);let e=Ue.producersTail;if(e!==void 0&&e.producer===t)return;let n,r=Ue.recomputing;if(r&&(n=e!==void 0?e.nextProducer:Ue.producers,n!==void 0&&n.producer===t)){Ue.producersTail=n,n.lastReadVersion=t.version;return}let i=t.consumersTail;if(i!==void 0&&i.consumer===Ue&&(!r||LN(i,Ue)))return;let o=zi(Ue),s={producer:t,consumer:Ue,nextProducer:n,prevConsumer:i,lastReadVersion:t.version,nextConsumer:void 0};Ue.producersTail=s,e!==void 0?e.nextProducer=s:Ue.producers=s,o&&BE(t,s)}function LE(){lh++}function FE(t){if(!(zi(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===lh)){if(!t.producerMustRecompute(t)&&!el(t)){ch(t);return}t.producerRecomputeValue(t),ch(t)}}function uh(t){if(t.consumers===void 0)return;let e=Yc;Yc=!0;try{for(let n=t.consumers;n!==void 0;n=n.nextConsumer){let r=n.consumer;r.dirty||PN(r)}}finally{Yc=e}}function dh(){return Ue?.consumerAllowSignalWrites!==!1}function PN(t){t.dirty=!0,uh(t),t.consumerMarkedDirty?.(t)}function ch(t){t.dirty=!1,t.lastCleanEpoch=lh}function Xc(t){return t&&UE(t),P(t)}function UE(t){t.producersTail=void 0,t.recomputing=!0}function fh(t,e){P(e),t&&jE(t)}function jE(t){t.recomputing=!1;let e=t.producersTail,n=e!==void 0?e.nextProducer:t.producers;if(n!==void 0){if(zi(t))do n=hh(n);while(n!==void 0);e!==void 0?e.nextProducer=void 0:t.producers=void 0}}function el(t){for(let e=t.producers;e!==void 0;e=e.nextProducer){let n=e.producer,r=e.lastReadVersion;if(r!==n.version||(FE(n),r!==n.version))return!0}return!1}function Rs(t){if(zi(t)){let e=t.producers;for(;e!==void 0;)e=hh(e)}t.producers=void 0,t.producersTail=void 0,t.consumers=void 0,t.consumersTail=void 0}function BE(t,e){let n=t.consumersTail,r=zi(t);if(n!==void 0?(e.nextConsumer=n.nextConsumer,n.nextConsumer=e):(e.nextConsumer=void 0,t.consumers=e),e.prevConsumer=n,t.consumersTail=e,!r)for(let i=t.producers;i!==void 0;i=i.nextProducer)BE(i.producer,i)}function hh(t){let e=t.producer,n=t.nextProducer,r=t.nextConsumer,i=t.prevConsumer;if(t.nextConsumer=void 0,t.prevConsumer=void 0,r!==void 0?r.prevConsumer=i:e.consumersTail=i,i!==void 0)i.nextConsumer=r;else if(e.consumers=r,!zi(e)){let o=e.producers;for(;o!==void 0;)o=hh(o)}return n}function zi(t){return t.consumerIsAlwaysLive||t.consumers!==void 0}function VE(t){ON?.(t)}function LN(t,e){let n=e.producersTail;if(n!==void 0){let r=e.producers;do{if(r===t)return!0;if(r===n)break;r=r.nextProducer}while(r!==void 0)}return!1}function HE(t,e){return Object.is(t,e)}function FN(){throw new Error}var $E=FN;function WE(t){$E(t)}function ph(t){$E=t}var UN=null;function gh(t,e){let n=Object.create(tl);n.value=t,e!==void 0&&(n.equal=e);let r=()=>zE(n);return r[mt]=n,VE(n),[r,s=>Ns(n,s),s=>GE(n,s)]}function zE(t){return Jc(t),t.value}function Ns(t,e){dh()||WE(t),t.equal(t.value,e)||(t.value=e,jN(t))}function GE(t,e){dh()||WE(t),Ns(t,e(t.value))}var tl=re(E({},Zc),{equal:HE,value:void 0,kind:"signal"});function jN(t){t.version++,LE(),uh(t),UN?.(t)}function mh(t){let e=P(null);try{return t()}finally{P(e)}}function k(t){return typeof t=="function"}function Gi(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var nl=Gi(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function Ar(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var be=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let o of n)o.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(k(r))try{r()}catch(o){e=o instanceof nl?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{qE(o)}catch(s){e=e??[],s instanceof nl?e=[...e,...s.errors]:e.push(s)}}if(e)throw new nl(e)}}add(e){var n;if(e&&e!==this)if(this.closed)qE(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&Ar(n,e)}remove(e){let{_finalizers:n}=this;n&&Ar(n,e),e instanceof t&&e._removeParent(this)}};be.EMPTY=(()=>{let t=new be;return t.closed=!0,t})();var _h=be.EMPTY;function rl(t){return t instanceof be||t&&"closed"in t&&k(t.remove)&&k(t.add)&&k(t.unsubscribe)}function qE(t){k(t)?t():t.unsubscribe()}var kt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var qi={setTimeout(t,e,...n){let{delegate:r}=qi;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=qi;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function il(t){qi.setTimeout(()=>{let{onUnhandledError:e}=kt;if(e)e(t);else throw t})}function Ms(){}var KE=vh("C",void 0,void 0);function YE(t){return vh("E",void 0,t)}function QE(t){return vh("N",t,void 0)}function vh(t,e,n){return{kind:t,value:e,error:n}}var Rr=null;function Ki(t){if(kt.useDeprecatedSynchronousErrorHandling){let e=!Rr;if(e&&(Rr={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=Rr;if(Rr=null,n)throw r}}else t()}function ZE(t){kt.useDeprecatedSynchronousErrorHandling&&Rr&&(Rr.errorThrown=!0,Rr.error=t)}var Nr=class extends be{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,rl(e)&&e.add(this)):this.destination=HN}static create(e,n,r){return new Yi(e,n,r)}next(e){this.isStopped?Eh(QE(e),this):this._next(e)}error(e){this.isStopped?Eh(YE(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Eh(KE,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},BN=Function.prototype.bind;function yh(t,e){return BN.call(t,e)}var Ih=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){ol(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){ol(r)}else ol(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){ol(n)}}},Yi=class extends Nr{constructor(e,n,r){super();let i;if(k(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let o;this&&kt.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&yh(e.next,o),error:e.error&&yh(e.error,o),complete:e.complete&&yh(e.complete,o)}):i=e}this.destination=new Ih(i)}};function ol(t){kt.useDeprecatedSynchronousErrorHandling?ZE(t):il(t)}function VN(t){throw t}function Eh(t,e){let{onStoppedNotification:n}=kt;n&&qi.setTimeout(()=>n(t,e))}var HN={closed:!0,next:Ms,error:VN,complete:Ms};var Qi=typeof Symbol=="function"&&Symbol.observable||"@@observable";function xt(t){return t}function Ch(...t){return wh(t)}function wh(t){return t.length===0?xt:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var V=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let o=WN(n)?n:new Yi(n,r,i);return Ki(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=JE(r),new r((i,o)=>{let s=new Yi({next:a=>{try{n(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[Qi](){return this}pipe(...n){return wh(n)(this)}toPromise(n){return n=JE(n),new n((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return t.create=e=>new t(e),t})();function JE(t){var e;return(e=t??kt.Promise)!==null&&e!==void 0?e:Promise}function $N(t){return t&&k(t.next)&&k(t.error)&&k(t.complete)}function WN(t){return t&&t instanceof Nr||$N(t)&&rl(t)}function zN(t){return k(t?.lift)}function Z(t){return e=>{if(zN(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function ie(t,e,n,r,i){return new bh(t,e,n,r,i)}var bh=class extends Nr{constructor(e,n,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};var XE=Gi(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Ae=(()=>{class t extends V{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new sl(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new XE}next(n){Ki(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){Ki(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){Ki(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:o}=this;return r||i?_h:(this.currentObservers=null,o.push(n),new be(()=>{this.currentObservers=null,Ar(o,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:o}=this;r?n.error(i):o&&n.complete()}asObservable(){let n=new V;return n.source=this,n}}return t.create=(e,n)=>new sl(e,n),t})(),sl=class extends Ae{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:_h}};var Le=class extends Ae{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Dh={now(){return(Dh.delegate||Date).now()},delegate:void 0};var al=class extends be{constructor(e,n){super()}schedule(e,n=0){return this}};var ks={setInterval(t,e,...n){let{delegate:r}=ks;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=ks;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var Zi=class extends al{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,n),this}requestAsyncId(e,n,r=0){return ks.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&ks.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,Ar(r,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var Ji=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}};Ji.now=Dh.now;var Xi=class extends Ji{constructor(e,n=Ji.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}};var Th=new Xi(Zi);var cl=class extends Zi{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}};var ll=class extends Xi{};var Sh=new ll(cl);var Xe=new V(t=>t.complete());function eI(t){return t&&k(t.schedule)}function tI(t){return t[t.length-1]}function nI(t){return k(tI(t))?t.pop():void 0}function Qn(t){return eI(tI(t))?t.pop():void 0}function Ah(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function iI(t,e,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(u){try{l(r.next(u))}catch(d){s(d)}}function c(u){try{l(r.throw(u))}catch(d){s(d)}}function l(u){u.done?o(u.value):i(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})}function rI(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Mr(t){return this instanceof Mr?(this.v=t,this):new Mr(t)}function oI(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(h){return function(p){return Promise.resolve(p).then(h,d)}}function a(h,p){r[h]&&(i[h]=function(_){return new Promise(function(C,S){o.push([h,_,C,S])>1||c(h,_)})},p&&(i[h]=p(i[h])))}function c(h,p){try{l(r[h](p))}catch(_){f(o[0][3],_)}}function l(h){h.value instanceof Mr?Promise.resolve(h.value.v).then(u,d):f(o[0][2],h)}function u(h){c("next",h)}function d(h){c("throw",h)}function f(h,p){h(p),o.shift(),o.length&&c(o[0][0],o[0][1])}}function sI(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof rI=="function"?rI(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=t[o]&&function(s){return new Promise(function(a,c){s=t[o](s),i(a,c,s.done,s.value)})}}function i(o,s,a,c){Promise.resolve(c).then(function(l){o({value:l,done:a})},s)}}var ul=t=>t&&typeof t.length=="number"&&typeof t!="function";function dl(t){return k(t?.then)}function fl(t){return k(t[Qi])}function hl(t){return Symbol.asyncIterator&&k(t?.[Symbol.asyncIterator])}function pl(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function GN(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var gl=GN();function ml(t){return k(t?.[gl])}function _l(t){return oI(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield Mr(n.read());if(i)return yield Mr(void 0);yield yield Mr(r)}}finally{n.releaseLock()}})}function vl(t){return k(t?.getReader)}function Re(t){if(t instanceof V)return t;if(t!=null){if(fl(t))return qN(t);if(ul(t))return KN(t);if(dl(t))return YN(t);if(hl(t))return aI(t);if(ml(t))return QN(t);if(vl(t))return ZN(t)}throw pl(t)}function qN(t){return new V(e=>{let n=t[Qi]();if(k(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function KN(t){return new V(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function YN(t){return new V(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,il)})}function QN(t){return new V(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function aI(t){return new V(e=>{JN(t,e).catch(n=>e.error(n))})}function ZN(t){return aI(_l(t))}function JN(t,e){var n,r,i,o;return iI(this,void 0,void 0,function*(){try{for(n=sI(t);r=yield n.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(i)throw i.error}}e.complete()})}function et(t,e,n,r=0,i=!1){let o=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(o),!i)return o}function Zn(t,e=0){return Z((n,r)=>{n.subscribe(ie(r,i=>et(r,t,()=>r.next(i),e),()=>et(r,t,()=>r.complete(),e),i=>et(r,t,()=>r.error(i),e)))})}function Jn(t,e=0){return Z((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function cI(t,e){return Re(t).pipe(Jn(e),Zn(e))}function lI(t,e){return Re(t).pipe(Jn(e),Zn(e))}function uI(t,e){return new V(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function dI(t,e){return new V(n=>{let r;return et(n,e,()=>{r=t[gl](),et(n,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){n.error(s);return}o?n.complete():n.next(i)},0,!0)}),()=>k(r?.return)&&r.return()})}function yl(t,e){if(!t)throw new Error("Iterable cannot be null");return new V(n=>{et(n,e,()=>{let r=t[Symbol.asyncIterator]();et(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function fI(t,e){return yl(_l(t),e)}function hI(t,e){if(t!=null){if(fl(t))return cI(t,e);if(ul(t))return uI(t,e);if(dl(t))return lI(t,e);if(hl(t))return yl(t,e);if(ml(t))return dI(t,e);if(vl(t))return fI(t,e)}throw pl(t)}function pe(t,e){return e?hI(t,e):Re(t)}function O(...t){let e=Qn(t);return pe(t,e)}function Rh(t,e){let n=k(t)?t:()=>t,r=i=>i.error(n());return new V(e?i=>e.schedule(r,0,i):r)}function El(t){return!!t&&(t instanceof V||k(t.lift)&&k(t.subscribe))}var kr=Gi(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function de(t,e){return Z((n,r)=>{let i=0;n.subscribe(ie(r,o=>{r.next(t.call(e,o,i++))}))})}var{isArray:XN}=Array;function eM(t,e){return XN(e)?t(...e):t(e)}function pI(t){return de(e=>eM(t,e))}var{isArray:tM}=Array,{getPrototypeOf:nM,prototype:rM,keys:iM}=Object;function gI(t){if(t.length===1){let e=t[0];if(tM(e))return{args:e,keys:null};if(oM(e)){let n=iM(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function oM(t){return t&&typeof t=="object"&&nM(t)===rM}function mI(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function Il(...t){let e=Qn(t),n=nI(t),{args:r,keys:i}=gI(t);if(r.length===0)return pe([],e);let o=new V(sM(r,e,i?s=>mI(i,s):xt));return n?o.pipe(pI(n)):o}function sM(t,e,n=xt){return r=>{_I(e,()=>{let{length:i}=t,o=new Array(i),s=i,a=i;for(let c=0;c<i;c++)_I(e,()=>{let l=pe(t[c],e),u=!1;l.subscribe(ie(r,d=>{o[c]=d,u||(u=!0,a--),a||r.next(n(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function _I(t,e,n){t?et(n,t,e):e()}function vI(t,e,n,r,i,o,s,a){let c=[],l=0,u=0,d=!1,f=()=>{d&&!c.length&&!l&&e.complete()},h=_=>l<r?p(_):c.push(_),p=_=>{o&&e.next(_),l++;let C=!1;Re(n(_,u++)).subscribe(ie(e,S=>{i?.(S),o?h(S):e.next(S)},()=>{C=!0},void 0,()=>{if(C)try{for(l--;c.length&&l<r;){let S=c.shift();s?et(e,s,()=>p(S)):p(S)}f()}catch(S){e.error(S)}}))};return t.subscribe(ie(e,h,()=>{d=!0,f()})),()=>{a?.()}}function Fe(t,e,n=1/0){return k(e)?Fe((r,i)=>de((o,s)=>e(r,o,i,s))(Re(t(r,i))),n):(typeof e=="number"&&(n=e),Z((r,i)=>vI(r,i,t,n)))}function Xn(t=1/0){return Fe(xt,t)}function yI(){return Xn(1)}function eo(...t){return yI()(pe(t,Qn(t)))}function xs(t){return new V(e=>{Re(t()).subscribe(e)})}function _t(t,e){return Z((n,r)=>{let i=0;n.subscribe(ie(r,o=>t.call(e,o,i++)&&r.next(o)))})}function to(t){return Z((e,n)=>{let r=null,i=!1,o;r=e.subscribe(ie(n,void 0,void 0,s=>{o=Re(t(s,to(t)(e))),r?(r.unsubscribe(),r=null,o.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(n))})}function no(t,e){return k(e)?Fe(t,e,1):Fe(t,1)}function Nh(t){return Z((e,n)=>{let r=!1;e.subscribe(ie(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function Rn(t){return t<=0?()=>Xe:Z((e,n)=>{let r=0;e.subscribe(ie(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function EI(t=aM){return Z((e,n)=>{let r=!1;e.subscribe(ie(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function aM(){return new kr}function Mh(t){return Z((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function Nn(t,e){let n=arguments.length>=2;return r=>r.pipe(t?_t((i,o)=>t(i,o,r)):xt,Rn(1),n?Nh(e):EI(()=>new kr))}function Cl(t){return t<=0?()=>Xe:Z((e,n)=>{let r=[];e.subscribe(ie(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function kh(...t){let e=Qn(t);return Z((n,r)=>{(e?eo(t,n,e):eo(t,n)).subscribe(r)})}function Ot(t,e){return Z((n,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();n.subscribe(ie(r,c=>{i?.unsubscribe();let l=0,u=o++;Re(t(c,u)).subscribe(i=ie(r,d=>r.next(e?e(c,d,u,l++):d),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function Os(t){return Z((e,n)=>{Re(t).subscribe(ie(n,()=>n.complete(),Ms)),!n.closed&&e.subscribe(n)})}function ze(t,e,n){let r=k(t)||e||n?{next:t,error:e,complete:n}:t;return r?Z((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(ie(o,c=>{var l;(l=r.next)===null||l===void 0||l.call(r,c),o.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),o.complete()},c=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,c),o.error(c)},()=>{var c,l;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):xt}var xh;function wl(){return xh}function nn(t){let e=xh;return xh=t,e}var II=Symbol("NotFound");function ro(t){return t===II||t?.name==="\u0275NotFound"}var Or=class{full;major;minor;patch;constructor(e){this.full=e;let n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},Yh=new Or("21.0.7");var Rl="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",D=class extends Error{code;constructor(e,n){super(nr(e,n)),this.code=e}};function dM(t){return`NG0${Math.abs(t)}`}function nr(t,e){return`${dM(t)}${e?": "+e:""}`}var Bs=globalThis;function J(t){for(let e in t)if(t[e]===J)return e;throw Error("")}function kn(t){if(typeof t=="string")return t;if(Array.isArray(t))return`[${t.map(kn).join(", ")}]`;if(t==null)return""+t;let e=t.overriddenName||t.name;if(e)return`${e}`;let n=t.toString();if(n==null)return""+n;let r=n.indexOf(`
`);return r>=0?n.slice(0,r):n}function Qh(t,e){return t?e?`${t} ${e}`:t:e||""}var fM=J({__forward_ref__:J});function Nl(t){return t.__forward_ref__=Nl,t.toString=function(){return kn(this())},t}function tt(t){return Zh(t)?t():t}function Zh(t){return typeof t=="function"&&t.hasOwnProperty(fM)&&t.__forward_ref__===Nl}function w(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function rr(t){return{providers:t.providers||[],imports:t.imports||[]}}function Vs(t){return hM(t,Ml)}function Jh(t){return Vs(t)!==null}function hM(t,e){return t.hasOwnProperty(e)&&t[e]||null}function pM(t){let e=t?.[Ml]??null;return e||null}function Ph(t){return t&&t.hasOwnProperty(Dl)?t[Dl]:null}var Ml=J({\u0275prov:J}),Dl=J({\u0275inj:J}),T=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,n){this._desc=e,this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=w({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function Xh(t){return t&&!!t.\u0275providers}var ep=J({\u0275cmp:J}),tp=J({\u0275dir:J}),np=J({\u0275pipe:J}),rp=J({\u0275mod:J}),Ls=J({\u0275fac:J}),Ur=J({__NG_ELEMENT_ID__:J}),CI=J({__NG_ENV_ID__:J});function ip(t){return kl(t,"@NgModule"),t[rp]||null}function xn(t){return kl(t,"@Component"),t[ep]||null}function op(t){return kl(t,"@Directive"),t[tp]||null}function TI(t){return kl(t,"@Pipe"),t[np]||null}function kl(t,e){if(t==null)throw new D(-919,!1)}function Hs(t){return typeof t=="string"?t:t==null?"":String(t)}function SI(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():Hs(t)}var AI=J({ngErrorCode:J}),gM=J({ngErrorMessage:J}),mM=J({ngTokenPath:J});function sp(t,e){return RI("",-200,e)}function xl(t,e){throw new D(-201,!1)}function RI(t,e,n){let r=new D(e,t);return r[AI]=e,r[gM]=t,n&&(r[mM]=n),r}function _M(t){return t[AI]}var Lh;function NI(){return Lh}function ct(t){let e=Lh;return Lh=t,e}function ap(t,e,n){let r=Vs(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&8)return null;if(e!==void 0)return e;xl(t,"")}var vM={},xr=vM,Fh="__NG_DI_FLAG__",Uh=class{injector;constructor(e){this.injector=e}retrieve(e,n){let r=Pr(n)||0;try{return this.injector.get(e,r&8?null:xr,r)}catch(i){if(ro(i))return i;throw i}}};function yM(t,e=0){let n=wl();if(n===void 0)throw new D(-203,!1);if(n===null)return ap(t,void 0,e);{let r=EM(e),i=n.retrieve(t,r);if(ro(i)){if(r.optional)return null;throw i}return i}}function A(t,e=0){return(NI()||yM)(tt(t),e)}function g(t,e){return A(t,Pr(e))}function Pr(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function EM(t){return{optional:!!(t&8),host:!!(t&1),self:!!(t&2),skipSelf:!!(t&4)}}function jh(t){let e=[];for(let n=0;n<t.length;n++){let r=tt(t[n]);if(Array.isArray(r)){if(r.length===0)throw new D(900,!1);let i,o=0;for(let s=0;s<r.length;s++){let a=r[s],c=IM(a);typeof c=="number"?c===-1?i=a.token:o|=c:i=a}e.push(A(i,o))}else e.push(A(r))}return e}function MI(t,e){return t[Fh]=e,t.prototype[Fh]=e,t}function IM(t){return t[Fh]}function Lr(t,e){let n=t.hasOwnProperty(Ls);return n?t[Ls]:null}function kI(t,e,n){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++){let i=t[r],o=e[r];if(n&&(i=n(i),o=n(o)),o!==i)return!1}return!0}function xI(t){return t.flat(Number.POSITIVE_INFINITY)}function Ol(t,e){t.forEach(n=>Array.isArray(n)?Ol(n,e):e(n))}function cp(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function $s(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function OI(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(i===1)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;){let o=i-2;t[i]=t[o],i--}t[e]=n,t[e+1]=r}}function PI(t,e,n){let r=oo(t,e);return r>=0?t[r|1]=n:(r=~r,OI(t,r,e,n)),r}function Pl(t,e){let n=oo(t,e);if(n>=0)return t[n|1]}function oo(t,e){return CM(t,e,1)}function CM(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){let o=r+(i-r>>1),s=t[o<<n];if(e===s)return o<<n;s>e?i=o:r=o+1}return~(i<<n)}var jr={},vt=[],Br=new T(""),lp=new T("",-1),up=new T(""),Fs=class{get(e,n=xr){if(n===xr){let i=RI("",-201);throw i.name="\u0275NotFound",i}return n}};function yt(t){return{\u0275providers:t}}function LI(t){return yt([{provide:Br,multi:!0,useValue:t}])}function FI(...t){return{\u0275providers:dp(!0,t),\u0275fromNgModule:!0}}function dp(t,...e){let n=[],r=new Set,i,o=s=>{n.push(s)};return Ol(e,s=>{let a=s;Tl(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&UI(i,o),n}function UI(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];fp(i,o=>{e(o,r)})}}function Tl(t,e,n,r){if(t=tt(t),!t)return!1;let i=null,o=Ph(t),s=!o&&xn(t);if(!o&&!s){let c=t.ngModule;if(o=Ph(c),o)i=c;else return!1}else{if(s&&!s.standalone)return!1;i=t}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let c=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of c)Tl(l,e,n,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;try{Ol(o.imports,u=>{Tl(u,e,n,r)&&(l||=[],l.push(u))})}finally{}l!==void 0&&UI(l,e)}if(!a){let l=Lr(i)||(()=>new i);e({provide:i,useFactory:l,deps:vt},i),e({provide:up,useValue:i,multi:!0},i),e({provide:Br,useValue:()=>A(i),multi:!0},i)}let c=o.providers;if(c!=null&&!a){let l=t;fp(c,u=>{e(u,l)})}}else return!1;return i!==t&&t.providers!==void 0}function fp(t,e){for(let n of t)Xh(n)&&(n=n.\u0275providers),Array.isArray(n)?fp(n,e):e(n)}var wM=J({provide:String,useValue:J});function jI(t){return t!==null&&typeof t=="object"&&wM in t}function bM(t){return!!(t&&t.useExisting)}function DM(t){return!!(t&&t.useFactory)}function Sl(t){return typeof t=="function"}var Ws=new T(""),bl={},wI={},Oh;function zs(){return Oh===void 0&&(Oh=new Fs),Oh}var ve=class{},Fr=class extends ve{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,Vh(e,s=>this.processProvider(s)),this.records.set(lp,io(void 0,this)),i.has("environment")&&this.records.set(ve,io(void 0,this));let o=this.records.get(Ws);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(up,vt,{self:!0}))}retrieve(e,n){let r=Pr(n)||0;try{return this.get(e,xr,r)}catch(i){if(ro(i))return i;throw i}}destroy(){Ps(this),this._destroyed=!0;let e=P(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),P(e)}}onDestroy(e){return Ps(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){Ps(this);let n=nn(this),r=ct(void 0),i;try{return e()}finally{nn(n),ct(r)}}get(e,n=xr,r){if(Ps(this),e.hasOwnProperty(CI))return e[CI](this);let i=Pr(r),o,s=nn(this),a=ct(void 0);try{if(!(i&4)){let l=this.records.get(e);if(l===void 0){let u=NM(e)&&Vs(e);u&&this.injectableDefInScope(u)?l=io(Bh(e),bl):l=null,this.records.set(e,l)}if(l!=null)return this.hydrate(e,l,i)}let c=i&2?zs():this.parent;return n=i&8&&n===xr?null:n,c.get(e,n)}catch(c){let l=_M(c);throw l===-200||l===-201?new D(l,null):c}finally{ct(a),nn(s)}}resolveInjectorInitializers(){let e=P(null),n=nn(this),r=ct(void 0),i;try{let o=this.get(Br,vt,{self:!0});for(let s of o)s()}finally{nn(n),ct(r),P(e)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(kn(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=tt(e);let n=Sl(e)?e:tt(e&&e.provide),r=SM(e);if(!Sl(e)&&e.multi===!0){let i=this.records.get(n);i||(i=io(void 0,bl,!0),i.factory=()=>jh(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n,r){let i=P(null);try{if(n.value===wI)throw sp(kn(e));return n.value===bl&&(n.value=wI,n.value=n.factory(void 0,r)),typeof n.value=="object"&&n.value&&RM(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{P(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=tt(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function Bh(t){let e=Vs(t),n=e!==null?e.factory:Lr(t);if(n!==null)return n;if(t instanceof T)throw new D(204,!1);if(t instanceof Function)return TM(t);throw new D(204,!1)}function TM(t){if(t.length>0)throw new D(204,!1);let n=pM(t);return n!==null?()=>n.factory(t):()=>new t}function SM(t){if(jI(t))return io(void 0,t.useValue);{let e=BI(t);return io(e,bl)}}function BI(t,e,n){let r;if(Sl(t)){let i=tt(t);return Lr(i)||Bh(i)}else if(jI(t))r=()=>tt(t.useValue);else if(DM(t))r=()=>t.useFactory(...jh(t.deps||[]));else if(bM(t))r=(i,o)=>A(tt(t.useExisting),o!==void 0&&o&8?8:void 0);else{let i=tt(t&&(t.useClass||t.provide));if(AM(t))r=()=>new i(...jh(t.deps));else return Lr(i)||Bh(i)}return r}function Ps(t){if(t.destroyed)throw new D(205,!1)}function io(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function AM(t){return!!t.deps}function RM(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function NM(t){return typeof t=="function"||typeof t=="object"&&t.ngMetadataName==="InjectionToken"}function Vh(t,e){for(let n of t)Array.isArray(n)?Vh(n,e):n&&Xh(n)?Vh(n.\u0275providers,e):e(n)}function Ce(t,e){let n;t instanceof Fr?(Ps(t),n=t):n=new Uh(t);let r,i=nn(n),o=ct(void 0);try{return e()}finally{nn(i),ct(o)}}function VI(){return NI()!==void 0||wl()!=null}var Pt=0,N=1,R=2,Ne=3,Et=4,It=5,Gs=6,so=7,Be=8,ir=9,on=10,ye=11,ao=12,hp=13,Vr=14,Ct=15,or=16,Hr=17,sn=18,sr=19,pp=20,Mn=21,Ll=22,qs=23,lt=24,$r=25,Ks=26,nt=27,HI=1;var ar=7,Ys=8,Wr=9,Ge=10;function an(t){return Array.isArray(t)&&typeof t[HI]=="object"}function Lt(t){return Array.isArray(t)&&t[HI]===!0}function gp(t){return(t.flags&4)!==0}function cr(t){return t.componentOffset>-1}function Qs(t){return(t.flags&1)===1}function zr(t){return!!t.template}function co(t){return(t[R]&512)!==0}function Gr(t){return(t[R]&256)===256}var $I="svg",WI="math";function wt(t){for(;Array.isArray(t);)t=t[Pt];return t}function mp(t,e){return wt(e[t])}function Ft(t,e){return wt(e[t.index])}function Fl(t,e){return t.data[e]}function bt(t,e){let n=e[t];return an(n)?n:n[Pt]}function zI(t){return(t[R]&4)===4}function Ul(t){return(t[R]&128)===128}function GI(t){return Lt(t[Ne])}function qr(t,e){return e==null?null:t[e]}function _p(t){t[Hr]=0}function vp(t){t[R]&1024||(t[R]|=1024,Ul(t)&&lo(t))}function qI(t,e){for(;t>0;)e=e[Vr],t--;return e}function Zs(t){return!!(t[R]&9216||t[lt]?.dirty)}function jl(t){t[on].changeDetectionScheduler?.notify(8),t[R]&64&&(t[R]|=1024),Zs(t)&&lo(t)}function lo(t){t[on].changeDetectionScheduler?.notify(0);let e=er(t);for(;e!==null&&!(e[R]&8192||(e[R]|=8192,!Ul(e)));)e=er(e)}function yp(t,e){if(Gr(t))throw new D(911,!1);t[Mn]===null&&(t[Mn]=[]),t[Mn].push(e)}function KI(t,e){if(t[Mn]===null)return;let n=t[Mn].indexOf(e);n!==-1&&t[Mn].splice(n,1)}function er(t){let e=t[Ne];return Lt(e)?e[Ne]:e}function Ep(t){return t[so]??=[]}function Ip(t){return t.cleanup??=[]}function YI(t,e,n,r){let i=Ep(e);i.push(n),t.firstCreatePass&&Ip(t).push(r,i.length-1)}var L={lFrame:lC(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var Hh=!1;function QI(){return L.lFrame.elementDepthCount}function ZI(){L.lFrame.elementDepthCount++}function Cp(){L.lFrame.elementDepthCount--}function wp(){return L.bindingsEnabled}function JI(){return L.skipHydrationRootTNode!==null}function bp(t){return L.skipHydrationRootTNode===t}function Dp(){L.skipHydrationRootTNode=null}function X(){return L.lFrame.lView}function Dt(){return L.lFrame.tView}function Bl(t){return L.lFrame.contextLView=t,t[Be]}function Vl(t){return L.lFrame.contextLView=null,t}function qe(){let t=Tp();for(;t!==null&&t.type===64;)t=t.parent;return t}function Tp(){return L.lFrame.currentTNode}function XI(){let t=L.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function uo(t,e){let n=L.lFrame;n.currentTNode=t,n.isParent=e}function Sp(){return L.lFrame.isParent}function eC(){L.lFrame.isParent=!1}function Ap(){return Hh}function Rp(t){let e=Hh;return Hh=t,e}function tC(){let t=L.lFrame,e=t.bindingRootIndex;return e===-1&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function nC(t){return L.lFrame.bindingIndex=t}function Js(){return L.lFrame.bindingIndex++}function rC(t){let e=L.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function iC(){return L.lFrame.inI18n}function oC(t,e){let n=L.lFrame;n.bindingIndex=n.bindingRootIndex=t,Hl(e)}function sC(){return L.lFrame.currentDirectiveIndex}function Hl(t){L.lFrame.currentDirectiveIndex=t}function aC(t){let e=L.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function Np(){return L.lFrame.currentQueryIndex}function $l(t){L.lFrame.currentQueryIndex=t}function MM(t){let e=t[N];return e.type===2?e.declTNode:e.type===1?t[It]:null}function Mp(t,e,n){if(n&4){let i=e,o=t;for(;i=i.parent,i===null&&!(n&1);)if(i=MM(o),i===null||(o=o[Vr],i.type&10))break;if(i===null)return!1;e=i,t=o}let r=L.lFrame=cC();return r.currentTNode=e,r.lView=t,!0}function Wl(t){let e=cC(),n=t[N];L.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function cC(){let t=L.lFrame,e=t===null?null:t.child;return e===null?lC(t):e}function lC(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function uC(){let t=L.lFrame;return L.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var kp=uC;function zl(){let t=uC();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function dC(t){return(L.lFrame.contextLView=qI(t,L.lFrame.contextLView))[Be]}function Kr(){return L.lFrame.selectedIndex}function lr(t){L.lFrame.selectedIndex=t}function Gl(){let t=L.lFrame;return Fl(t.tView,t.selectedIndex)}function fC(){return L.lFrame.currentNamespace}var hC=!0;function ql(){return hC}function Kl(t){hC=t}function $h(t,e=null,n=null,r){let i=xp(t,e,n,r);return i.resolveInjectorInitializers(),i}function xp(t,e=null,n=null,r,i=new Set){let o=[n||vt,FI(t)];return r=r||(typeof t=="object"?void 0:kn(t)),new Fr(o,e||zs(),r||null,i)}var De=class t{static THROW_IF_NOT_FOUND=xr;static NULL=new Fs;static create(e,n){if(Array.isArray(e))return $h({name:""},n,e,"");{let r=e.name??"";return $h({name:r},e.parent,e.providers,r)}}static \u0275prov=w({token:t,providedIn:"any",factory:()=>A(lp)});static __NG_ELEMENT_ID__=-1},ge=new T(""),cn=(()=>{class t{static __NG_ELEMENT_ID__=kM;static __NG_ENV_ID__=n=>n}return t})(),Wh=class extends cn{_lView;constructor(e){super(),this._lView=e}get destroyed(){return Gr(this._lView)}onDestroy(e){let n=this._lView;return yp(n,e),()=>KI(n,e)}};function kM(){return new Wh(X())}var pC=!1,On=(()=>{class t{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new Le(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new V(n=>{n.next(!1),n.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let n=this.taskId++;return this.pendingTasks.add(n),n}has(n){return this.pendingTasks.has(n)}remove(n){this.pendingTasks.delete(n),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=w({token:t,providedIn:"root",factory:()=>new t})}return t})(),zh=class extends Ae{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,VI()&&(this.destroyRef=g(cn,{optional:!0})??void 0,this.pendingTasks=g(On,{optional:!0})??void 0)}emit(e){let n=P(null);try{super.next(e)}finally{P(n)}}subscribe(e,n,r){let i=e,o=n||(()=>null),s=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),o=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof be&&e.add(a),a}wrapInTimeout(e){return n=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(n)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},je=zh;function Al(...t){}function Op(t){let e,n;function r(){t=Al;try{n!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(n),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{t(),r()}),typeof requestAnimationFrame=="function"&&(n=requestAnimationFrame(()=>{t(),r()})),()=>r()}function Pp(t){return queueMicrotask(()=>t()),()=>{t=Al}}var Lp="isAngularZone",Us=Lp+"_ID",xM=0,fe=class t{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new je(!1);onMicrotaskEmpty=new je(!1);onStable=new je(!1);onError=new je(!1);constructor(e){let{enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=pC}=e;if(typeof Zone>"u")throw new D(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,LM(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(Lp)===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new D(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new D(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,OM,Al,Al);try{return o.runTask(s,n,r)}finally{o.cancelTask(s)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},OM={};function Fp(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function PM(t){if(t.isCheckStableRunning||t.callbackScheduled)return;t.callbackScheduled=!0;function e(){Op(()=>{t.callbackScheduled=!1,Gh(t),t.isCheckStableRunning=!0,Fp(t),t.isCheckStableRunning=!1})}t.scheduleInRootZone?Zone.root.run(()=>{e()}):t._outer.run(()=>{e()}),Gh(t)}function LM(t){let e=()=>{PM(t)},n=xM++;t._inner=t._inner.fork({name:"angular",properties:{[Lp]:!0,[Us]:n,[Us+n]:!0},onInvokeTask:(r,i,o,s,a,c)=>{if(FM(c))return r.invokeTask(o,s,a,c);try{return bI(t),r.invokeTask(o,s,a,c)}finally{(t.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),DI(t)}},onInvoke:(r,i,o,s,a,c,l)=>{try{return bI(t),r.invoke(o,s,a,c,l)}finally{t.shouldCoalesceRunChangeDetection&&!t.callbackScheduled&&!UM(c)&&e(),DI(t)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(t._hasPendingMicrotasks=s.microTask,Gh(t),Fp(t)):s.change=="macroTask"&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}function Gh(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.callbackScheduled===!0?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function bI(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function DI(t){t._nesting--,Fp(t)}var js=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new je;onMicrotaskEmpty=new je;onStable=new je;onError=new je;run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}};function FM(t){return gC(t,"__ignore_ng_zone__")}function UM(t){return gC(t,"__scheduler_tick__")}function gC(t,e){return!Array.isArray(t)||t.length!==1?!1:t[0]?.data?.[e]===!0}var rn=class{_console=console;handleError(e){this._console.error("ERROR",e)}},ut=new T("",{factory:()=>{let t=g(fe),e=g(ve),n;return r=>{t.runOutsideAngular(()=>{e.destroyed&&!n?setTimeout(()=>{throw r}):(n??=e.get(rn),n.handleError(r))})}}}),mC={provide:Br,useValue:()=>{let t=g(rn,{optional:!0})},multi:!0},jM=new T("",{factory:()=>{let t=g(ge).defaultView;if(!t)return;let e=g(ut),n=o=>{e(o.reason),o.preventDefault()},r=o=>{o.error?e(o.error):e(new Error(o.message,{cause:o})),o.preventDefault()},i=()=>{t.addEventListener("unhandledrejection",n),t.addEventListener("error",r)};typeof Zone<"u"?Zone.root.run(i):i(),g(cn).onDestroy(()=>{t.removeEventListener("error",r),t.removeEventListener("unhandledrejection",n)})}});function Up(){return yt([LI(()=>void g(jM))])}function ln(t,e){let[n,r,i]=gh(t,e?.equal),o=n,s=o[mt];return o.set=r,o.update=i,o.asReadonly=_C.bind(o),o}function _C(){let t=this[mt];if(t.readonlyFn===void 0){let e=()=>this();e[mt]=t,t.readonlyFn=e}return t.readonlyFn}var Yl=(()=>{class t{view;node;constructor(n,r){this.view=n,this.node=r}static __NG_ELEMENT_ID__=BM}return t})();function BM(){return new Yl(X(),qe())}var tr=class{},Xs=new T("",{factory:()=>!0});var jp=new T(""),fo=(()=>{class t{internalPendingTasks=g(On);scheduler=g(tr);errorHandler=g(ut);add(){let n=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(n)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(n))}}run(n){let r=this.add();n().catch(this.errorHandler).finally(r)}static \u0275prov=w({token:t,providedIn:"root",factory:()=>new t})}return t})(),Bp=(()=>{class t{static \u0275prov=w({token:t,providedIn:"root",factory:()=>new qh})}return t})(),qh=class{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){let n=e.zone,r=this.queues.get(n);r.has(e)&&(r.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){let n=e.zone;this.queues.has(n)||this.queues.set(n,new Set);let r=this.queues.get(n);r.has(e)||r.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(let[n,r]of this.queues)n===null?e||=this.flushQueue(r):e||=n.run(()=>this.flushQueue(r));e||(this.dirtyEffectCount=0)}}flushQueue(e){let n=!1;for(let r of e)r.dirty&&(this.dirtyEffectCount--,n=!0,r.run());return n}},Kh=class{[mt];constructor(e){this[mt]=e}destroy(){this[mt].destroy()}};function Tt(t){return mh(t)}function vo(t){return{toString:t}.toString()}var Ql="__parameters__";function YM(t){return function(...n){if(t){let r=t(...n);for(let i in r)this[i]=r[i]}}}function QM(t,e,n){return vo(()=>{let r=YM(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(c,l,u){let d=c.hasOwnProperty(Ql)?c[Ql]:Object.defineProperty(c,Ql,{value:[]})[Ql];for(;d.length<=u;)d.push(null);return(d[u]=d[u]||[]).push(s),c}}return i.prototype.ngMetadataName=t,i.annotationCls=i,i})}var Pn=MI(QM("Optional"),8);function ZM(t){return typeof t=="function"}function GC(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}var ru=class{previousValue;currentValue;firstChange;constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}},ei=(()=>{let t=()=>qC;return t.ngInherit=!0,t})();function qC(t){return t.type.prototype.ngOnChanges&&(t.setInput=XM),JM}function JM(){let t=YC(this),e=t?.current;if(e){let n=t.previous;if(n===jr)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function XM(t,e,n,r,i){let o=this.declaredInputs[r],s=YC(t)||ek(t,{previous:jr,current:null}),a=s.current||(s.current={}),c=s.previous,l=c[o];a[o]=new ru(l&&l.currentValue,n,c===jr),GC(t,e,i,n)}var KC="__ngSimpleChanges__";function YC(t){return t[KC]||null}function ek(t,e){return t[KC]=e}var vC=[];var ee=function(t,e=null,n){for(let r=0;r<vC.length;r++){let i=vC[r];i(t,e,n)}},q=(function(t){return t[t.TemplateCreateStart=0]="TemplateCreateStart",t[t.TemplateCreateEnd=1]="TemplateCreateEnd",t[t.TemplateUpdateStart=2]="TemplateUpdateStart",t[t.TemplateUpdateEnd=3]="TemplateUpdateEnd",t[t.LifecycleHookStart=4]="LifecycleHookStart",t[t.LifecycleHookEnd=5]="LifecycleHookEnd",t[t.OutputStart=6]="OutputStart",t[t.OutputEnd=7]="OutputEnd",t[t.BootstrapApplicationStart=8]="BootstrapApplicationStart",t[t.BootstrapApplicationEnd=9]="BootstrapApplicationEnd",t[t.BootstrapComponentStart=10]="BootstrapComponentStart",t[t.BootstrapComponentEnd=11]="BootstrapComponentEnd",t[t.ChangeDetectionStart=12]="ChangeDetectionStart",t[t.ChangeDetectionEnd=13]="ChangeDetectionEnd",t[t.ChangeDetectionSyncStart=14]="ChangeDetectionSyncStart",t[t.ChangeDetectionSyncEnd=15]="ChangeDetectionSyncEnd",t[t.AfterRenderHooksStart=16]="AfterRenderHooksStart",t[t.AfterRenderHooksEnd=17]="AfterRenderHooksEnd",t[t.ComponentStart=18]="ComponentStart",t[t.ComponentEnd=19]="ComponentEnd",t[t.DeferBlockStateStart=20]="DeferBlockStateStart",t[t.DeferBlockStateEnd=21]="DeferBlockStateEnd",t[t.DynamicComponentStart=22]="DynamicComponentStart",t[t.DynamicComponentEnd=23]="DynamicComponentEnd",t[t.HostBindingsUpdateStart=24]="HostBindingsUpdateStart",t[t.HostBindingsUpdateEnd=25]="HostBindingsUpdateEnd",t})(q||{});function tk(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=qC(e);(n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s)}i&&(n.preOrderHooks??=[]).push(0-t,i),o&&((n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o))}function QC(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let o=t.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:u}=o;s&&(t.contentHooks??=[]).push(-n,s),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),c&&(t.viewHooks??=[]).push(-n,c),l&&((t.viewHooks??=[]).push(n,l),(t.viewCheckHooks??=[]).push(n,l)),u!=null&&(t.destroyHooks??=[]).push(n,u)}}function Xl(t,e,n){ZC(t,e,3,n)}function eu(t,e,n,r){(t[R]&3)===n&&ZC(t,e,n,r)}function Vp(t,e){let n=t[R];(n&3)===e&&(n&=16383,n+=1,t[R]=n)}function ZC(t,e,n,r){let i=r!==void 0?t[Hr]&65535:0,o=r??-1,s=e.length-1,a=0;for(let c=i;c<s;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(t[Hr]+=65536),(a<o||o==-1)&&(nk(t,n,e,c),t[Hr]=(t[Hr]&4294901760)+c+2),c++}function yC(t,e){ee(q.LifecycleHookStart,t,e);let n=P(null);try{e.call(t)}finally{P(n),ee(q.LifecycleHookEnd,t,e)}}function nk(t,e,n,r){let i=n[r]<0,o=n[r+1],s=i?-n[r]:n[r],a=t[s];i?t[R]>>14<t[Hr]>>16&&(t[R]&3)===e&&(t[R]+=16384,yC(a,o)):yC(a,o)}var po=-1,na=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,n,r,i){this.factory=e,this.name=i,this.canSeeViewProviders=n,this.injectImpl=r}};function rk(t){return(t.flags&8)!==0}function ik(t){return(t.flags&16)!==0}function ok(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let o=n[r++],s=n[r++],a=n[r++];t.setAttribute(e,s,a,o)}else{let o=i,s=n[++r];sk(o)?t.setProperty(e,o,s):t.setAttribute(e,o,s),r++}}return r}function JC(t){return t===3||t===4||t===6}function sk(t){return t.charCodeAt(0)===64}function vu(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?EC(t,n,i,null,e[++r]):EC(t,n,i,null,null))}}return t}function EC(t,e,n,r,i){let o=0,s=t.length;if(e===-1)s=-1;else for(;o<t.length;){let a=t[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<t.length;){let a=t[o];if(typeof a=="number")break;if(a===n){i!==null&&(t[o+1]=i);return}o++,i!==null&&o++}s!==-1&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),i!==null&&t.splice(o++,0,i)}function XC(t){return t!==po}function iu(t){return t&32767}function ak(t){return t>>16}function ou(t,e){let n=ak(t),r=e;for(;n>0;)r=r[Vr],n--;return r}var Kp=!0;function IC(t){let e=Kp;return Kp=t,e}var ck=256,ew=ck-1,tw=5,lk=0,un={};function uk(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(Ur)&&(r=n[Ur]),r==null&&(r=n[Ur]=lk++);let i=r&ew,o=1<<i;e.data[t+(i>>tw)]|=o}function nw(t,e){let n=rw(t,e);if(n!==-1)return n;let r=e[N];r.firstCreatePass&&(t.injectorIndex=e.length,Hp(r.data,t),Hp(e,null),Hp(r.blueprint,null));let i=hg(t,e),o=t.injectorIndex;if(XC(i)){let s=iu(i),a=ou(i,e),c=a[N].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|c[s+l]}return e[o+8]=i,o}function Hp(t,e){t.push(0,0,0,0,0,0,0,0,e)}function rw(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function hg(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=cw(i),r===null)return po;if(n++,i=i[Vr],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return po}function dk(t,e,n){uk(t,e,n)}function fk(t,e){if(e==="class")return t.classes;if(e==="style")return t.styles;let n=t.attrs;if(n){let r=n.length,i=0;for(;i<r;){let o=n[i];if(JC(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof n[i]=="string";)i++;else{if(o===e)return n[i+1];i=i+2}}}return null}function iw(t,e,n){if(n&8||t!==void 0)return t;xl(e,"NodeInjector")}function ow(t,e,n,r){if(n&8&&r===void 0&&(r=null),(n&3)===0){let i=t[ir],o=ct(void 0);try{return i?i.get(e,r,n&8):ap(e,r,n&8)}finally{ct(o)}}return iw(r,e,n)}function sw(t,e,n,r=0,i){if(t!==null){if(e[R]&2048&&!(r&2)){let s=mk(t,e,n,r,un);if(s!==un)return s}let o=aw(t,e,n,r,un);if(o!==un)return o}return ow(e,n,r,i)}function aw(t,e,n,r,i){let o=pk(n);if(typeof o=="function"){if(!Mp(e,t,r))return r&1?iw(i,n,r):ow(e,n,r,i);try{let s;if(s=o(r),s==null&&!(r&8))xl(n);else return s}finally{kp()}}else if(typeof o=="number"){let s=null,a=rw(t,e),c=po,l=r&1?e[Ct][It]:null;for((a===-1||r&4)&&(c=a===-1?hg(t,e):e[a+8],c===po||!wC(r,!1)?a=-1:(s=e[N],a=iu(c),e=ou(c,e)));a!==-1;){let u=e[N];if(CC(o,a,u.data)){let d=hk(a,e,n,s,r,l);if(d!==un)return d}c=e[a+8],c!==po&&wC(r,e[N].data[a+8]===l)&&CC(o,a,e)?(s=u,a=iu(c),e=ou(c,e)):a=-1}}return i}function hk(t,e,n,r,i,o){let s=e[N],a=s.data[t+8],c=r==null?cr(a)&&Kp:r!=s&&(a.type&3)!==0,l=i&1&&o===a,u=tu(a,s,n,c,l);return u!==null?su(e,s,u,a,i):un}function tu(t,e,n,r,i){let o=t.providerIndexes,s=e.data,a=o&1048575,c=t.directiveStart,l=t.directiveEnd,u=o>>20,d=r?a:a+u,f=i?a+u:l;for(let h=d;h<f;h++){let p=s[h];if(h<c&&n===p||h>=c&&p.type===n)return h}if(i){let h=s[c];if(h&&zr(h)&&h.type===n)return c}return null}function su(t,e,n,r,i){let o=t[n],s=e.data;if(o instanceof na){let a=o;if(a.resolving){let h=SI(s[n]);throw sp(h)}let c=IC(a.canSeeViewProviders);a.resolving=!0;let l=s[n].type||s[n],u,d=a.injectImpl?ct(a.injectImpl):null,f=Mp(t,r,0);try{o=t[n]=a.factory(void 0,i,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&tk(n,s[n],e)}finally{d!==null&&ct(d),IC(c),a.resolving=!1,kp()}}return o}function pk(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(Ur)?t[Ur]:void 0;return typeof e=="number"?e>=0?e&ew:gk:e}function CC(t,e,n){let r=1<<t;return!!(n[e+(t>>tw)]&r)}function wC(t,e){return!(t&2)&&!(t&1&&e)}var Yr=class{_tNode;_lView;constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return sw(this._tNode,this._lView,e,Pr(r),n)}};function gk(){return new Yr(qe(),X())}function sa(t){return vo(()=>{let e=t.prototype.constructor,n=e[Ls]||Yp(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let o=i[Ls]||Yp(i);if(o&&o!==n)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function Yp(t){return Zh(t)?()=>{let e=Yp(tt(t));return e&&e()}:Lr(t)}function mk(t,e,n,r,i){let o=t,s=e;for(;o!==null&&s!==null&&s[R]&2048&&!co(s);){let a=aw(o,s,n,r|2,un);if(a!==un)return a;let c=o.parent;if(!c){let l=s[pp];if(l){let u=l.get(n,un,r);if(u!==un)return u}c=cw(s),s=s[Vr]}o=c}return i}function cw(t){let e=t[N],n=e.type;return n===2?e.declTNode:n===1?t[It]:null}function aa(t){return fk(qe(),t)}function _k(){return yo(qe(),X())}function yo(t,e){return new fn(Ft(t,e))}var fn=(()=>{class t{nativeElement;constructor(n){this.nativeElement=n}static __NG_ELEMENT_ID__=_k}return t})();function vk(t){return t instanceof fn?t.nativeElement:t}function yk(){return this._results[Symbol.iterator]()}var au=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new Ae}constructor(e=!1){this._emitDistinctChangesOnly=e}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,n){return this._results.reduce(e,n)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,n){this.dirty=!1;let r=xI(e);(this._changesDetected=!kI(this._results,r,n))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=yk};function lw(t){return(t.flags&128)===128}var pg=(function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t})(pg||{}),uw=new Map,Ek=0;function Ik(){return Ek++}function Ck(t){uw.set(t[sr],t)}function Qp(t){uw.delete(t[sr])}var bC="__ngContext__";function go(t,e){an(e)?(t[bC]=e[sr],Ck(e)):t[bC]=e}function dw(t){return hw(t[ao])}function fw(t){return hw(t[Et])}function hw(t){for(;t!==null&&!Lt(t);)t=t[Et];return t}var wk;function gg(t){wk=t}var yu=new T("",{factory:()=>bk}),bk="ng";var Eu=new T(""),ti=new T("",{providedIn:"platform",factory:()=>"unknown"});var Iu=new T("",{factory:()=>g(ge).body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var pw=!1,gw=new T("",{factory:()=>pw});var mg=new T("");var Dk=(t,e,n,r)=>{};function Tk(t,e,n,r){Dk(t,e,n,r)}function _g(t){return(t.flags&32)===32}var Sk=()=>null;function mw(t,e,n=!1){return Sk(t,e,n)}function _w(t,e){let n=t.contentQueries;if(n!==null){let r=P(null);try{for(let i=0;i<n.length;i+=2){let o=n[i],s=n[i+1];if(s!==-1){let a=t.data[s];$l(o),a.contentQueries(2,e[s],s)}}}finally{P(r)}}}function Zp(t,e,n){$l(0);let r=P(null);try{e(t,n)}finally{P(r)}}function vw(t,e,n){if(gp(e)){let r=P(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=t.data[s];if(a.contentQueries){let c=n[s];a.contentQueries(1,c,s)}}}finally{P(r)}}}var jt=(function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t[t.ExperimentalIsolatedShadowDom=4]="ExperimentalIsolatedShadowDom",t})(jt||{});var Zl;function Ak(){if(Zl===void 0&&(Zl=null,Bs.trustedTypes))try{Zl=Bs.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return Zl}function DC(t){return Ak()?.createScriptURL(t)||t}var cu=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Rl})`}};function ca(t){return t instanceof cu?t.changingThisBreaksApplicationSecurity:t}function vg(t,e){let n=yw(t);if(n!=null&&n!==e){if(n==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${Rl})`)}return n===e}function yw(t){return t instanceof cu&&t.getTypeName()||null}var Rk=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Ew(t){return t=String(t),t.match(Rk)?t:"unsafe:"+t}function Nk(t,e){return t.createText(e)}function Mk(t,e,n){t.setValue(e,n)}function Iw(t,e,n){return t.createElement(e,n)}function lu(t,e,n,r,i){t.insertBefore(e,n,r,i)}function Cw(t,e,n){t.appendChild(e,n)}function TC(t,e,n,r,i){r!==null?lu(t,e,n,r,i):Cw(t,e,n)}function kk(t,e,n,r){t.removeChild(null,e,n,r)}function xk(t,e,n){t.setAttribute(e,"style",n)}function Ok(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function ww(t,e,n){let{mergedAttrs:r,classes:i,styles:o}=n;r!==null&&ok(t,e,r),i!==null&&Ok(t,e,i),o!==null&&xk(t,e,o)}var Cu=(function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t})(Cu||{});function Eo(t){let e=Dw();return e?e.sanitize(Cu.URL,t)||"":vg(t,"URL")?ca(t):Ew(Hs(t))}function bw(t){let e=Dw();if(e)return DC(e.sanitize(Cu.RESOURCE_URL,t)||"");if(vg(t,"ResourceURL"))return DC(ca(t));throw new D(904,!1)}var Pk=new Set(["embed","frame","iframe","media","script"]),Lk=new Set(["base","link","script"]);function Fk(t,e){return e==="src"&&Pk.has(t)||e==="href"&&Lk.has(t)||e==="xlink:href"&&t==="script"?bw:Eo}function yg(t,e,n){return Fk(e,n)(t)}function Dw(){let t=X();return t&&t[on].sanitizer}function Tw(t){return t instanceof Function?t():t}function Uk(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||t.charCodeAt(i+o)<=32)return i}n=i+1}}var Sw="ng-template";function jk(t,e,n,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&Uk(e[i+1].toLowerCase(),n,0)!==-1)return!0}else if(Eg(t))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===n)return!0}return!1}function Eg(t){return t.type===4&&t.value!==Sw}function Bk(t,e,n){let r=t.type===4&&!n?Sw:t.value;return e===r}function Vk(t,e,n){let r=4,i=t.attrs,o=i!==null?Wk(i):0,s=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!s&&!Ut(r)&&!Ut(c))return!1;if(s&&Ut(c))continue;s=!1,r=c|r&1;continue}if(!s)if(r&4){if(r=2|r&1,c!==""&&!Bk(t,c,n)||c===""&&e.length===1){if(Ut(r))return!1;s=!0}}else if(r&8){if(i===null||!jk(t,i,c,n)){if(Ut(r))return!1;s=!0}}else{let l=e[++a],u=Hk(c,i,Eg(t),n);if(u===-1){if(Ut(r))return!1;s=!0;continue}if(l!==""){let d;if(u>o?d="":d=i[u+1].toLowerCase(),r&2&&l!==d){if(Ut(r))return!1;s=!0}}}}return Ut(r)||s}function Ut(t){return(t&1)===0}function Hk(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let o=!1;for(;i<e.length;){let s=e[i];if(s===t)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return zk(e,t)}function $k(t,e,n=!1){for(let r=0;r<e.length;r++)if(Vk(t,e[r],n))return!0;return!1}function Wk(t){for(let e=0;e<t.length;e++){let n=t[e];if(JC(n))return e}return t.length}function zk(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function SC(t,e){return t?":not("+e.trim()+")":e}function Gk(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if(typeof s=="string")if(r&2){let a=t[++n];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!Ut(s)&&(e+=SC(o,i),i=""),r=s,o=o||!Ut(r);n++}return i!==""&&(e+=SC(o,i)),e}function qk(t){return t.map(Gk).join(",")}function Kk(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let o=t[r];if(typeof o=="string")i===2?o!==""&&e.push(o,t[++r]):i===8&&n.push(o);else{if(!Ut(i))break;i=o}r++}return n.length&&e.push(1,...n),e}var Ln={};function Ig(t,e,n,r,i,o,s,a,c,l,u){let d=nt+r,f=d+i,h=Yk(d,f),p=typeof l=="function"?l():l;return h[N]={type:t,blueprint:h,template:n,queries:null,viewQuery:a,declTNode:e,data:h.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:f,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:c,consts:p,incompleteFirstPass:!1,ssrId:u}}function Yk(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:Ln);return n}function Qk(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=Ig(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function Cg(t,e,n,r,i,o,s,a,c,l,u){let d=e.blueprint.slice();return d[Pt]=i,d[R]=r|4|128|8|64|1024,(l!==null||t&&t[R]&2048)&&(d[R]|=2048),_p(d),d[Ne]=d[Vr]=t,d[Be]=n,d[on]=s||t&&t[on],d[ye]=a||t&&t[ye],d[ir]=c||t&&t[ir]||null,d[It]=o,d[sr]=Ik(),d[Gs]=u,d[pp]=l,d[Ct]=e.type==2?t[Ct]:d,d}function Zk(t,e,n){let r=Ft(e,t),i=Qk(n),o=t[on].rendererFactory,s=wg(t,Cg(t,i,null,Aw(n),r,e,null,o.createRenderer(r,n),null,null,null));return t[e.index]=s}function Aw(t){let e=16;return t.signals?e=4096:t.onPush&&(e=64),e}function Rw(t,e,n,r){if(n===0)return-1;let i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function wg(t,e){return t[ao]?t[hp][Et]=e:t[ao]=e,t[hp]=e,e}function Ke(t=1){Nw(Dt(),X(),Kr()+t,!1)}function Nw(t,e,n,r){if(!r)if((e[R]&3)===3){let o=t.preOrderCheckHooks;o!==null&&Xl(e,o,n)}else{let o=t.preOrderHooks;o!==null&&eu(e,o,0,n)}lr(n)}var wu=(function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t})(wu||{});function Jp(t,e,n,r){let i=P(null);try{let[o,s,a]=t.inputs[n],c=null;(s&wu.SignalBased)!==0&&(c=e[o][mt]),c!==null&&c.transformFn!==void 0?r=c.transformFn(r):a!==null&&(r=a.call(e,r)),t.setInput!==null?t.setInput(e,c,r,n,o):GC(e,c,o,r)}finally{P(i)}}var dn=(function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t})(dn||{}),Jk;function bg(t,e){return Jk(t,e)}var mo=new Set,bu=(function(t){return t[t.CHANGE_DETECTION=0]="CHANGE_DETECTION",t[t.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",t})(bu||{}),ni=new T(""),AC=new Set;function Io(t){AC.has(t)||(AC.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}var Dg=(()=>{class t{impl=null;execute(){this.impl?.execute()}static \u0275prov=w({token:t,providedIn:"root",factory:()=>new t})}return t})(),Mw=[0,1,2,3],kw=(()=>{class t{ngZone=g(fe);scheduler=g(tr);errorHandler=g(rn,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){g(ni,{optional:!0})}execute(){let n=this.sequences.size>0;n&&ee(q.AfterRenderHooksStart),this.executing=!0;for(let r of Mw)for(let i of this.sequences)if(!(i.erroredOrDestroyed||!i.hooks[r]))try{i.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let o=i.hooks[r];return o(i.pipelinedValue)},i.snapshot))}catch(o){i.erroredOrDestroyed=!0,this.errorHandler?.handleError(o)}this.executing=!1;for(let r of this.sequences)r.afterRun(),r.once&&(this.sequences.delete(r),r.destroy());for(let r of this.deferredRegistrations)this.sequences.add(r);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),n&&ee(q.AfterRenderHooksEnd)}register(n){let{view:r}=n;r!==void 0?((r[$r]??=[]).push(n),lo(r),r[R]|=8192):this.executing?this.deferredRegistrations.add(n):this.addSequence(n)}addSequence(n){this.sequences.add(n),this.scheduler.notify(7)}unregister(n){this.executing&&this.sequences.has(n)?(n.erroredOrDestroyed=!0,n.pipelinedValue=void 0,n.once=!0):(this.sequences.delete(n),this.deferredRegistrations.delete(n))}maybeTrace(n,r){return r?r.run(bu.AFTER_NEXT_RENDER,n):n()}static \u0275prov=w({token:t,providedIn:"root",factory:()=>new t})}return t})(),uu=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(e,n,r,i,o,s=null){this.impl=e,this.hooks=n,this.view=r,this.once=i,this.snapshot=s,this.unregisterOnDestroy=o?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let e=this.view?.[$r];e&&(this.view[$r]=e.filter(n=>n!==this))}};function Tg(t,e){let n=e?.injector??g(De);return Io("NgAfterNextRender"),ex(t,n,e,!0)}function Xk(t){return t instanceof Function?[void 0,void 0,t,void 0]:[t.earlyRead,t.write,t.mixedReadWrite,t.read]}function ex(t,e,n,r){let i=e.get(Dg);i.impl??=e.get(kw);let o=e.get(ni,null,{optional:!0}),s=n?.manualCleanup!==!0?e.get(cn):null,a=e.get(Yl,null,{optional:!0}),c=new uu(i.impl,Xk(t),a?.view,r,s,o?.snapshot(null));return i.impl.register(c),c}var tx=new T("",{factory:()=>({queue:new Set,isScheduled:!1,scheduler:null,injector:g(ve)})});function xw(t,e,n){let r=t.get(tx);if(Array.isArray(e))for(let i of e)r.queue.add(i),n?.detachedLeaveAnimationFns?.push(i);else r.queue.add(e),n?.detachedLeaveAnimationFns?.push(e);r.scheduler&&r.scheduler(t)}function nx(t,e){for(let[n,r]of e)xw(t,r.animateFns)}function RC(t,e,n,r){let i=t?.[Ks]?.enter;e!==null&&i&&i.has(n.index)&&nx(r,i)}function ho(t,e,n,r,i,o,s,a){if(i!=null){let c,l=!1;Lt(i)?c=i:an(i)&&(l=!0,i=i[Pt]);let u=wt(i);t===0&&r!==null?(RC(a,r,o,n),s==null?Cw(e,r,u):lu(e,r,u,s||null,!0)):t===1&&r!==null?(RC(a,r,o,n),lu(e,r,u,s||null,!0)):t===2?NC(a,o,n,d=>{kk(e,u,l,d)}):t===3&&NC(a,o,n,()=>{e.destroyNode(u)}),c!=null&&gx(e,t,n,c,o,r,s)}}function rx(t,e){Ow(t,e),e[Pt]=null,e[It]=null}function ix(t,e,n,r,i,o){r[Pt]=i,r[It]=e,Du(t,r,n,1,i,o)}function Ow(t,e){e[on].changeDetectionScheduler?.notify(9),Du(t,e,e[ye],2,null,null)}function ox(t){let e=t[ao];if(!e)return $p(t[N],t);for(;e;){let n=null;if(an(e))n=e[ao];else{let r=e[Ge];r&&(n=r)}if(!n){for(;e&&!e[Et]&&e!==t;)an(e)&&$p(e[N],e),e=e[Ne];e===null&&(e=t),an(e)&&$p(e[N],e),n=e&&e[Et]}e=n}}function Sg(t,e){let n=t[Wr],r=n.indexOf(e);n.splice(r,1)}function Pw(t,e){if(Gr(e))return;let n=e[ye];n.destroyNode&&Du(t,e,n,3,null,null),ox(e)}function $p(t,e){if(Gr(e))return;let n=P(null);try{e[R]&=-129,e[R]|=256,e[lt]&&Rs(e[lt]),cx(t,e),ax(t,e),e[N].type===1&&e[ye].destroy();let r=e[or];if(r!==null&&Lt(e[Ne])){r!==e[Ne]&&Sg(r,e);let i=e[sn];i!==null&&i.detachView(t)}Qp(e)}finally{P(n)}}function NC(t,e,n,r){let i=t?.[Ks];if(i==null||i.leave==null||!i.leave.has(e.index))return r(!1);t&&mo.add(t[sr]),xw(n,()=>{if(i.leave&&i.leave.has(e.index)){let s=i.leave.get(e.index),a=[];if(s){for(let c=0;c<s.animateFns.length;c++){let l=s.animateFns[c],{promise:u}=l();a.push(u)}i.detachedLeaveAnimationFns=void 0}i.running=Promise.allSettled(a),sx(t,r)}else t&&mo.delete(t[sr]),r(!1)},i)}function sx(t,e){let n=t[Ks]?.running;if(n){n.then(()=>{t[Ks].running=void 0,mo.delete(t[sr]),e(!0)});return}e(!1)}function ax(t,e){let n=t.cleanup,r=e[so];if(n!==null)for(let s=0;s<n.length-1;s+=2)if(typeof n[s]=="string"){let a=n[s+3];a>=0?r[a]():r[-a].unsubscribe(),s+=2}else{let a=r[n[s+1]];n[s].call(a)}r!==null&&(e[so]=null);let i=e[Mn];if(i!==null){e[Mn]=null;for(let s=0;s<i.length;s++){let a=i[s];a()}}let o=e[qs];if(o!==null){e[qs]=null;for(let s of o)s.destroy()}}function cx(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof na)){let o=n[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],c=o[s+1];ee(q.LifecycleHookStart,a,c);try{c.call(a)}finally{ee(q.LifecycleHookEnd,a,c)}}else{ee(q.LifecycleHookStart,i,o);try{o.call(i)}finally{ee(q.LifecycleHookEnd,i,o)}}}}}function lx(t,e,n){return ux(t,e.parent,n)}function ux(t,e,n){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return n[Pt];if(cr(r)){let{encapsulation:i}=t.data[r.directiveStart+r.componentOffset];if(i===jt.None||i===jt.Emulated)return null}return Ft(r,n)}function dx(t,e,n){return hx(t,e,n)}function fx(t,e,n){return t.type&40?Ft(t,n):null}var hx=fx,MC;function Ag(t,e,n,r){let i=lx(t,r,e),o=e[ye],s=r.parent||e[It],a=dx(s,r,e);if(i!=null)if(Array.isArray(n))for(let c=0;c<n.length;c++)TC(o,i,n[c],a,!1);else TC(o,i,n,a,!1);MC!==void 0&&MC(o,r,e,n,i)}function ea(t,e){if(e!==null){let n=e.type;if(n&3)return Ft(e,t);if(n&4)return Xp(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return ea(t,r);{let i=t[e.index];return Lt(i)?Xp(-1,i):wt(i)}}else{if(n&128)return ea(t,e.next);if(n&32)return bg(e,t)()||wt(t[e.index]);{let r=Lw(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=er(t[Ct]);return ea(i,r)}else return ea(t,e.next)}}}return null}function Lw(t,e){if(e!==null){let r=t[Ct][It],i=e.projection;return r.projection[i]}return null}function Xp(t,e){let n=Ge+t+1;if(n<e.length){let r=e[n],i=r[N].firstChild;if(i!==null)return ea(r,i)}return e[ar]}function Rg(t,e,n,r,i,o,s){for(;n!=null;){let a=r[ir];if(n.type===128){n=n.next;continue}let c=r[n.index],l=n.type;if(s&&e===0&&(c&&go(wt(c),r),n.flags|=2),!_g(n))if(l&8)Rg(t,e,n.child,r,i,o,!1),ho(e,t,a,i,c,n,o,r);else if(l&32){let u=bg(n,r),d;for(;d=u();)ho(e,t,a,i,d,n,o,r);ho(e,t,a,i,c,n,o,r)}else l&16?px(t,e,r,n,i,o):ho(e,t,a,i,c,n,o,r);n=s?n.projectionNext:n.next}}function Du(t,e,n,r,i,o){Rg(n,r,t.firstChild,e,i,o,!1)}function px(t,e,n,r,i,o){let s=n[Ct],c=s[It].projection[r.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++){let u=c[l];ho(e,t,n[ir],i,u,r,o,n)}else{let l=c,u=s[Ne];lw(r)&&(l.flags|=128),Rg(t,e,l,u,i,o,!0)}}function gx(t,e,n,r,i,o,s){let a=r[ar],c=wt(r);a!==c&&ho(e,t,n,o,a,i,s);for(let l=Ge;l<r.length;l++){let u=r[l];Du(u[N],u,t,e,o,a)}}function mx(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let o=r.indexOf("-")===-1?void 0:dn.DashCase;i==null?t.removeStyle(n,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=dn.Important),t.setStyle(n,r,i,o))}}function Fw(t,e,n,r,i){let o=Kr(),s=r&2;try{lr(-1),s&&e.length>nt&&Nw(t,e,nt,!1);let a=s?q.TemplateUpdateStart:q.TemplateCreateStart;ee(a,i,n),n(r,i)}finally{lr(o);let a=s?q.TemplateUpdateEnd:q.TemplateCreateEnd;ee(a,i,n)}}function Ng(t,e,n){wx(t,e,n),(n.flags&64)===64&&bx(t,e,n)}function Mg(t,e,n=Ft){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?n(e,t):t[s];t[i++]=a}}}function _x(t,e,n,r){let o=r.get(gw,pw)||n===jt.ShadowDom||n===jt.ExperimentalIsolatedShadowDom,s=t.selectRootElement(e,o);return vx(s),s}function vx(t){yx(t)}var yx=()=>null;function Ex(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function Ix(t,e,n,r,i,o){let s=e[N];if(kg(t,s,e,n,r)){cr(t)&&Cx(e,t.index);return}t.type&3&&(n=Ex(n)),Uw(t,e,n,r,i,o)}function Uw(t,e,n,r,i,o){if(t.type&3){let s=Ft(t,e);r=o!=null?o(r,t.value||"",n):r,i.setProperty(s,n,r)}else t.type&12}function Cx(t,e){let n=bt(e,t);n[R]&16||(n[R]|=64)}function wx(t,e,n){let r=n.directiveStart,i=n.directiveEnd;cr(n)&&Zk(e,n,t.data[r+n.componentOffset]),t.firstCreatePass||nw(n,e);let o=n.initialInputs;for(let s=r;s<i;s++){let a=t.data[s],c=su(e,t,s,n);if(go(c,e),o!==null&&Ax(e,s-r,c,a,n,o),zr(a)){let l=bt(n.index,e);l[Be]=su(e,t,s,n)}}}function bx(t,e,n){let r=n.directiveStart,i=n.directiveEnd,o=n.index,s=sC();try{lr(o);for(let a=r;a<i;a++){let c=t.data[a],l=e[a];Hl(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&Dx(c,l)}}finally{lr(-1),Hl(s)}}function Dx(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function jw(t,e){let n=t.directiveRegistry,r=null;if(n)for(let i=0;i<n.length;i++){let o=n[i];$k(e,o.selectors,!1)&&(r??=[],zr(o)?r.unshift(o):r.push(o))}return r}function Tx(t,e,n,r,i,o){let s=Ft(t,e);Sx(e[ye],s,o,t.value,n,r,i)}function Sx(t,e,n,r,i,o,s){if(o==null)t.removeAttribute(e,i,n);else{let a=s==null?Hs(o):s(o,r||"",i);t.setAttribute(e,i,a,n)}}function Ax(t,e,n,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;a+=2){let c=s[a],l=s[a+1];Jp(r,n,c,l)}}function Bw(t,e,n,r,i){let o=nt+n,s=e[N],a=i(s,e,t,r,n);e[o]=a,uo(t,!0);let c=t.type===2;return c?(ww(e[ye],a,t),(QI()===0||Qs(t))&&go(a,e),ZI()):go(a,e),ql()&&(!c||!_g(t))&&Ag(s,e,a,t),t}function Vw(t){let e=t;return Sp()?eC():(e=e.parent,uo(e,!1)),e}function Rx(t,e){let n=t[ir];if(!n)return;let r;try{r=n.get(ut,null)}catch{r=null}r?.(e)}function kg(t,e,n,r,i){let o=t.inputs?.[r],s=t.hostDirectiveInputs?.[r],a=!1;if(s)for(let c=0;c<s.length;c+=2){let l=s[c],u=s[c+1],d=e.data[l];Jp(d,n[l],u,i),a=!0}if(o)for(let c of o){let l=n[c],u=e.data[c];Jp(u,l,r,i),a=!0}return a}function Nx(t,e){let n=bt(e,t),r=n[N];Mx(r,n);let i=n[Pt];i!==null&&n[Gs]===null&&(n[Gs]=mw(i,n[ir])),ee(q.ComponentStart);try{xg(r,n,n[Be])}finally{ee(q.ComponentEnd,n[Be])}}function Mx(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function xg(t,e,n){Wl(e);try{let r=t.viewQuery;r!==null&&Zp(1,r,n);let i=t.template;i!==null&&Fw(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[sn]?.finishViewCreation(t),t.staticContentQueries&&_w(t,e),t.staticViewQueries&&Zp(2,t.viewQuery,n);let o=t.components;o!==null&&kx(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[R]&=-5,zl()}}function kx(t,e){for(let n=0;n<e.length;n++)Nx(t,e[n])}function xx(t,e,n,r){let i=P(null);try{let o=e.tView,a=t[R]&4096?4096:16,c=Cg(t,o,n,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=t[e.index];c[or]=l;let u=t[sn];return u!==null&&(c[sn]=u.createEmbeddedView(o)),xg(o,c,n),c}finally{P(i)}}function kC(t,e){return!e||e.firstChild===null||lw(t)}function ra(t,e,n,r,i=!1){for(;n!==null;){if(n.type===128){n=i?n.projectionNext:n.next;continue}let o=e[n.index];o!==null&&r.push(wt(o)),Lt(o)&&Hw(o,r);let s=n.type;if(s&8)ra(t,e,n.child,r);else if(s&32){let a=bg(n,e),c;for(;c=a();)r.push(c)}else if(s&16){let a=Lw(e,n);if(Array.isArray(a))r.push(...a);else{let c=er(e[Ct]);ra(c[N],c,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function Hw(t,e){for(let n=Ge;n<t.length;n++){let r=t[n],i=r[N].firstChild;i!==null&&ra(r[N],r,i,e)}t[ar]!==t[Pt]&&e.push(t[ar])}function $w(t){if(t[$r]!==null){for(let e of t[$r])e.impl.addSequence(e);t[$r].length=0}}var Ww=[];function Ox(t){return t[lt]??Px(t)}function Px(t){let e=Ww.pop()??Object.create(Fx);return e.lView=t,e}function Lx(t){t.lView[lt]!==t&&(t.lView=null,Ww.push(t))}var Fx=re(E({},Zc),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{lo(t.lView)},consumerOnSignalRead(){this.lView[lt]=this}});function Ux(t){let e=t[lt]??Object.create(jx);return e.lView=t,e}var jx=re(E({},Zc),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{let e=er(t.lView);for(;e&&!zw(e[N]);)e=er(e);e&&vp(e)},consumerOnSignalRead(){this.lView[lt]=this}});function zw(t){return t.type!==2}function Gw(t){if(t[qs]===null)return;let e=!0;for(;e;){let n=!1;for(let r of t[qs])r.dirty&&(n=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=n&&!!(t[R]&8192)}}var Bx=100;function qw(t,e=0){let r=t[on].rendererFactory,i=!1;i||r.begin?.();try{Vx(t,e)}finally{i||r.end?.()}}function Vx(t,e){let n=Ap();try{Rp(!0),eg(t,e);let r=0;for(;Zs(t);){if(r===Bx)throw new D(103,!1);r++,eg(t,1)}}finally{Rp(n)}}function Hx(t,e,n,r){if(Gr(e))return;let i=e[R],o=!1,s=!1;Wl(e);let a=!0,c=null,l=null;o||(zw(t)?(l=Ox(e),c=Xc(l)):Qc()===null?(a=!1,l=Ux(e),c=Xc(l)):e[lt]&&(Rs(e[lt]),e[lt]=null));try{_p(e),nC(t.bindingStartIndex),n!==null&&Fw(t,e,n,2,r);let u=(i&3)===3;if(!o)if(u){let h=t.preOrderCheckHooks;h!==null&&Xl(e,h,null)}else{let h=t.preOrderHooks;h!==null&&eu(e,h,0,null),Vp(e,0)}if(s||$x(e),Gw(e),Kw(e,0),t.contentQueries!==null&&_w(t,e),!o)if(u){let h=t.contentCheckHooks;h!==null&&Xl(e,h)}else{let h=t.contentHooks;h!==null&&eu(e,h,1),Vp(e,1)}zx(t,e);let d=t.components;d!==null&&Qw(e,d,0);let f=t.viewQuery;if(f!==null&&Zp(2,f,r),!o)if(u){let h=t.viewCheckHooks;h!==null&&Xl(e,h)}else{let h=t.viewHooks;h!==null&&eu(e,h,2),Vp(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[Ll]){for(let h of e[Ll])h();e[Ll]=null}o||($w(e),e[R]&=-73)}catch(u){throw o||lo(e),u}finally{l!==null&&(fh(l,c),a&&Lx(l)),zl()}}function Kw(t,e){for(let n=dw(t);n!==null;n=fw(n))for(let r=Ge;r<n.length;r++){let i=n[r];Yw(i,e)}}function $x(t){for(let e=dw(t);e!==null;e=fw(e)){if(!(e[R]&2))continue;let n=e[Wr];for(let r=0;r<n.length;r++){let i=n[r];vp(i)}}}function Wx(t,e,n){ee(q.ComponentStart);let r=bt(e,t);try{Yw(r,n)}finally{ee(q.ComponentEnd,r[Be])}}function Yw(t,e){Ul(t)&&eg(t,e)}function eg(t,e){let r=t[N],i=t[R],o=t[lt],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&el(o)),s||=!1,o&&(o.dirty=!1),t[R]&=-9217,s)Hx(r,t,r.template,t[Be]);else if(i&8192){let a=P(null);try{Gw(t),Kw(t,1);let c=r.components;c!==null&&Qw(t,c,1),$w(t)}finally{P(a)}}}function Qw(t,e,n){for(let r=0;r<e.length;r++)Wx(t,e[r],n)}function zx(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)lr(~i);else{let o=i,s=n[++r],a=n[++r];oC(s,o);let c=e[o];ee(q.HostBindingsUpdateStart,c);try{a(2,c)}finally{ee(q.HostBindingsUpdateEnd,c)}}}}finally{lr(-1)}}function Og(t,e){let n=Ap()?64:1088;for(t[on].changeDetectionScheduler?.notify(e);t;){t[R]|=n;let r=er(t);if(co(t)&&!r)return t;t=r}return null}function Zw(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function Gx(t,e,n,r=!0){let i=e[N];if(qx(i,e,t,n),r){let s=Xp(n,t),a=e[ye],c=a.parentNode(t[ar]);c!==null&&ix(i,t[It],a,e,c,s)}let o=e[Gs];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function tg(t,e){if(t.length<=Ge)return;let n=Ge+e,r=t[n];if(r){let i=r[or];i!==null&&i!==t&&Sg(i,r),e>0&&(t[n-1][Et]=r[Et]);let o=$s(t,Ge+e);rx(r[N],r);let s=o[sn];s!==null&&s.detachView(o[N]),r[Ne]=null,r[Et]=null,r[R]&=-129}return r}function qx(t,e,n,r){let i=Ge+r,o=n.length;r>0&&(n[i-1][Et]=e),r<o-Ge?(e[Et]=n[i],cp(n,Ge+r,e)):(n.push(e),e[Et]=null),e[Ne]=n;let s=e[or];s!==null&&n!==s&&Jw(s,e);let a=e[sn];a!==null&&a.insertView(t),jl(e),e[R]|=128}function Jw(t,e){let n=t[Wr],r=e[Ne];if(an(r))t[R]|=2;else{let i=r[Ne][Ct];e[Ct]!==i&&(t[R]|=2)}n===null?t[Wr]=[e]:n.push(e)}var ur=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let e=this._lView,n=e[N];return ra(n,e,n.firstChild,[])}constructor(e,n){this._lView=e,this._cdRefInjectingView=n}get context(){return this._lView[Be]}set context(e){this._lView[Be]=e}get destroyed(){return Gr(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Ne];if(Lt(e)){let n=e[Ys],r=n?n.indexOf(this):-1;r>-1&&(tg(e,r),$s(n,r))}this._attachedToViewContainer=!1}Pw(this._lView[N],this._lView)}onDestroy(e){yp(this._lView,e)}markForCheck(){Og(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[R]&=-129}reattach(){jl(this._lView),this._lView[R]|=128}detectChanges(){this._lView[R]|=1024,qw(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new D(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=co(this._lView),n=this._lView[or];n!==null&&!e&&Sg(n,this._lView),Ow(this._lView[N],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new D(902,!1);this._appRef=e;let n=co(this._lView),r=this._lView[or];r!==null&&!n&&Jw(r,this._lView),jl(this._lView)}};var dr=(()=>{class t{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=Kx;constructor(n,r,i){this._declarationLView=n,this._declarationTContainer=r,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(n,r){return this.createEmbeddedViewImpl(n,r)}createEmbeddedViewImpl(n,r,i){let o=xx(this._declarationLView,this._declarationTContainer,n,{embeddedViewInjector:r,dehydratedView:i});return new ur(o)}}return t})();function Kx(){return Pg(qe(),X())}function Pg(t,e){return t.type&4?new dr(e,t,yo(t,e)):null}function Tu(t,e,n,r,i){let o=t.data[e];if(o===null)o=Yx(t,e,n,r,i),iC()&&(o.flags|=32);else if(o.type&64){o.type=n,o.value=r,o.attrs=i;let s=XI();o.injectorIndex=s===null?-1:s.injectorIndex}return uo(o,!0),o}function Yx(t,e,n,r,i){let o=Tp(),s=Sp(),a=s?o:o&&o.parent,c=t.data[e]=Zx(t,a,n,e,r,i);return Qx(t,c,o,s),c}function Qx(t,e,n,r){t.firstChild===null&&(t.firstChild=e),n!==null&&(r?n.child==null&&e.parent!==null&&(n.child=e):n.next===null&&(n.next=e,e.prev=n))}function Zx(t,e,n,r,i,o){let s=e?e.injectorIndex:-1,a=0;return JI()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,fieldIndex:-1,customControlIndex:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var Jx=()=>null;function xC(t,e){return Jx(t,e)}var Xw=class{},Su=class{},ng=class{resolveComponentFactory(e){throw new D(917,!1)}},la=class{static NULL=new ng},Qr=class{},Co=(()=>{class t{destroyNode=null;static __NG_ELEMENT_ID__=()=>Xx()}return t})();function Xx(){let t=X(),e=qe(),n=bt(e.index,t);return(an(n)?n:t)[ye]}var eb=(()=>{class t{static \u0275prov=w({token:t,providedIn:"root",factory:()=>null})}return t})();var nu={},rg=class{injector;parentInjector;constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){let i=this.injector.get(e,nu,r);return i!==nu||n===nu?i:this.parentInjector.get(e,n,r)}};function du(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=Qh(i,a);else if(o==2){let c=a,l=e[++s];r=Qh(r,c+": "+l+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}function Me(t,e=0){let n=X();if(n===null)return A(t,e);let r=qe();return sw(r,n,tt(t),e)}function Lg(){let t="invalid";throw new Error(t)}function tb(t,e,n,r,i){let o=r===null?null:{"":-1},s=i(t,n);if(s!==null){let a=s,c=null,l=null;for(let u of s)if(u.resolveHostDirectives!==null){[a,c,l]=u.resolveHostDirectives(s);break}nO(t,e,n,a,o,c,l)}o!==null&&r!==null&&eO(n,r,o)}function eO(t,e,n){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let o=n[e[i+1]];if(o==null)throw new D(-301,!1);r.push(e[i],o)}}function tO(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function nO(t,e,n,r,i,o,s){let a=r.length,c=null;for(let f=0;f<a;f++){let h=r[f];c===null&&zr(h)&&(c=h,tO(t,n,f)),dk(nw(n,e),t,h.type)}cO(n,t.data.length,a),c?.viewProvidersResolver&&c.viewProvidersResolver(c);for(let f=0;f<a;f++){let h=r[f];h.providersResolver&&h.providersResolver(h)}let l=!1,u=!1,d=Rw(t,e,a,null);a>0&&(n.directiveToIndex=new Map);for(let f=0;f<a;f++){let h=r[f];if(n.mergedAttrs=vu(n.mergedAttrs,h.hostAttrs),iO(t,n,e,d,h),aO(d,h,i),s!==null&&s.has(h)){let[_,C]=s.get(h);n.directiveToIndex.set(h.type,[d,_+n.directiveStart,C+n.directiveStart])}else(o===null||!o.has(h))&&n.directiveToIndex.set(h.type,d);h.contentQueries!==null&&(n.flags|=4),(h.hostBindings!==null||h.hostAttrs!==null||h.hostVars!==0)&&(n.flags|=64);let p=h.type.prototype;!l&&(p.ngOnChanges||p.ngOnInit||p.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),l=!0),!u&&(p.ngOnChanges||p.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),u=!0),d++}rO(t,n,o)}function rO(t,e,n){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=t.data[r];if(n===null||!n.has(i))OC(0,e,i,r),OC(1,e,i,r),LC(e,r,!1);else{let o=n.get(i);PC(0,e,o,r),PC(1,e,o,r),LC(e,r,!0)}}}function OC(t,e,n,r){let i=t===0?n.inputs:n.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s;t===0?s=e.inputs??={}:s=e.outputs??={},s[o]??=[],s[o].push(r),nb(e,o)}}function PC(t,e,n,r){let i=t===0?n.inputs:n.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s=i[o],a;t===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[s]??=[],a[s].push(r,o),nb(e,s)}}function nb(t,e){e==="class"?t.flags|=8:e==="style"&&(t.flags|=16)}function LC(t,e,n){let{attrs:r,inputs:i,hostDirectiveInputs:o}=t;if(r===null||!n&&i===null||n&&o===null||Eg(t)){t.initialInputs??=[],t.initialInputs.push(null);return}let s=null,a=0;for(;a<r.length;){let c=r[a];if(c===0){a+=4;continue}else if(c===5){a+=2;continue}else if(typeof c=="number")break;if(!n&&i.hasOwnProperty(c)){let l=i[c];for(let u of l)if(u===e){s??=[],s.push(c,r[a+1]);break}}else if(n&&o.hasOwnProperty(c)){let l=o[c];for(let u=0;u<l.length;u+=2)if(l[u]===e){s??=[],s.push(l[u+1],r[a+1]);break}}a+=2}t.initialInputs??=[],t.initialInputs.push(s)}function iO(t,e,n,r,i){t.data[r]=i;let o=i.factory||(i.factory=Lr(i.type,!0)),s=new na(o,zr(i),Me,null);t.blueprint[r]=s,n[r]=s,oO(t,e,r,Rw(t,n,i.hostVars,Ln),i)}function oO(t,e,n,r,i){let o=i.hostBindings;if(o){let s=t.hostBindingOpCodes;s===null&&(s=t.hostBindingOpCodes=[]);let a=~e.index;sO(s)!=a&&s.push(a),s.push(n,r,o)}}function sO(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function aO(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;zr(e)&&(n[""]=t)}}function cO(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function rb(t,e,n,r,i,o,s,a){let c=e[N],l=c.consts,u=qr(l,s),d=Tu(c,t,n,r,u);return o&&tb(c,e,d,qr(l,a),i),d.mergedAttrs=vu(d.mergedAttrs,d.attrs),d.attrs!==null&&du(d,d.attrs,!1),d.mergedAttrs!==null&&du(d,d.mergedAttrs,!0),c.queries!==null&&c.queries.elementStart(c,d),d}function ib(t,e){QC(t,e),gp(e)&&t.queries.elementEnd(e)}function lO(t,e,n,r,i,o){let s=e.consts,a=qr(s,i),c=Tu(e,t,n,r,a);if(c.mergedAttrs=vu(c.mergedAttrs,c.attrs),o!=null){let l=qr(s,o);c.localNames=[];for(let u=0;u<l.length;u+=2)c.localNames.push(l[u],-1)}return c.attrs!==null&&du(c,c.attrs,!1),c.mergedAttrs!==null&&du(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function Fg(t){return sb(t)?Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t:!1}function ob(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{let n=t[Symbol.iterator](),r;for(;!(r=n.next()).done;)e(r.value)}}function sb(t){return t!==null&&(typeof t=="function"||typeof t=="object")}function uO(t,e,n){return t[e]=n}function dO(t,e){return t[e]}function ua(t,e,n){if(n===Ln)return!1;let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function Wp(t,e,n){return function r(i){let o=cr(t)?bt(t.index,e):e;Og(o,5);let s=e[Be],a=FC(e,s,n,i),c=r.__ngNextListenerFn__;for(;c;)a=FC(e,s,c,i)&&a,c=c.__ngNextListenerFn__;return a}}function FC(t,e,n,r){let i=P(null);try{return ee(q.OutputStart,e,n),n(r)!==!1}catch(o){return Rx(t,o),!1}finally{ee(q.OutputEnd,e,n),P(i)}}function fO(t,e,n,r,i,o,s,a){let c=Qs(t),l=!1,u=null;if(!r&&c&&(u=pO(e,n,o,t.index)),u!==null){let d=u.__ngLastListenerFn__||u;d.__ngNextListenerFn__=s,u.__ngLastListenerFn__=s,l=!0}else{let d=Ft(t,n),f=r?r(d):d;Tk(n,f,o,a);let h=i.listen(f,o,a);if(!hO(o)){let p=r?_=>r(wt(_[t.index])):t.index;ab(p,e,n,o,a,h,!1)}}return l}function hO(t){return t.startsWith("animation")||t.startsWith("transition")}function pO(t,e,n,r){let i=t.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===n&&i[o+1]===r){let a=e[so],c=i[o+2];return a&&a.length>c?a[c]:null}typeof s=="string"&&(o+=2)}return null}function ab(t,e,n,r,i,o,s){let a=e.firstCreatePass?Ip(e):null,c=Ep(n),l=c.length;c.push(i,o),a&&a.push(r,t,l,(l+1)*(s?-1:1))}function UC(t,e,n,r,i,o){let s=e[n],a=e[N],l=a.data[n].outputs[r],d=s[l].subscribe(o);ab(t.index,a,e,i,o,d,!0)}var ig=Symbol("BINDING");var fu=class extends la{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=xn(e);return new Zr(n,this.ngModule)}};function gO(t){return Object.keys(t).map(e=>{let[n,r,i]=t[e],o={propName:n,templateName:e,isSignal:(r&wu.SignalBased)!==0};return i&&(o.transform=i),o})}function mO(t){return Object.keys(t).map(e=>({propName:t[e],templateName:e}))}function _O(t,e,n){let r=e instanceof ve?e:e?.injector;return r&&t.getStandaloneInjector!==null&&(r=t.getStandaloneInjector(r)||r),r?new rg(n,r):n}function vO(t){let e=t.get(Qr,null);if(e===null)throw new D(407,!1);let n=t.get(eb,null),r=t.get(tr,null);return{rendererFactory:e,sanitizer:n,changeDetectionScheduler:r,ngReflect:!1}}function yO(t,e){let n=cb(t);return Iw(e,n,n==="svg"?$I:n==="math"?WI:null)}function cb(t){return(t.selectors[0][0]||"div").toLowerCase()}var Zr=class extends Su{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=gO(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=mO(this.componentDef.outputs),this.cachedOutputs}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=qk(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!n}create(e,n,r,i,o,s){ee(q.DynamicComponentStart);let a=P(null);try{let c=this.componentDef,l=EO(r,c,s,o),u=_O(c,i||this.ngModule,e),d=vO(u),f=d.rendererFactory.createRenderer(null,c),h=r?_x(f,r,c.encapsulation,u):yO(c,f),p=s?.some(jC)||o?.some(S=>typeof S!="function"&&S.bindings.some(jC)),_=Cg(null,l,null,512|Aw(c),null,null,d,f,u,null,mw(h,u,!0));_[nt]=h,Wl(_);let C=null;try{let S=rb(nt,_,2,"#host",()=>l.directiveRegistry,!0,0);ww(f,h,S),go(h,_),Ng(l,_,S),vw(l,S,_),ib(l,S),n!==void 0&&CO(S,this.ngContentSelectors,n),C=bt(S.index,_),_[Be]=C[Be],xg(l,_,null)}catch(S){throw C!==null&&Qp(C),Qp(_),S}finally{ee(q.DynamicComponentEnd),zl()}return new hu(this.componentType,_,!!p)}finally{P(a)}}};function EO(t,e,n,r){let i=t?["ng-version","21.0.7"]:Kk(e.selectors[0]),o=null,s=null,a=0;if(n)for(let u of n)a+=u[ig].requiredVars,u.create&&(u.targetIdx=0,(o??=[]).push(u)),u.update&&(u.targetIdx=0,(s??=[]).push(u));if(r)for(let u=0;u<r.length;u++){let d=r[u];if(typeof d!="function")for(let f of d.bindings){a+=f[ig].requiredVars;let h=u+1;f.create&&(f.targetIdx=h,(o??=[]).push(f)),f.update&&(f.targetIdx=h,(s??=[]).push(f))}}let c=[e];if(r)for(let u of r){let d=typeof u=="function"?u:u.type,f=op(d);c.push(f)}return Ig(0,null,IO(o,s),1,a,c,null,null,null,[i],null)}function IO(t,e){return!t&&!e?null:n=>{if(n&1&&t)for(let r of t)r.create();if(n&2&&e)for(let r of e)r.update()}}function jC(t){let e=t[ig].kind;return e==="input"||e==="twoWay"}var hu=class extends Xw{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,n,r){super(),this._rootLView=n,this._hasInputBindings=r,this._tNode=Fl(n[N],nt),this.location=yo(this._tNode,n),this.instance=bt(this._tNode.index,n)[Be],this.hostView=this.changeDetectorRef=new ur(n,void 0),this.componentType=e}setInput(e,n){this._hasInputBindings;let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let i=this._rootLView,o=kg(r,i[N],i,e,n);this.previousInputValues.set(e,n);let s=bt(r.index,i);Og(s,1)}get injector(){return new Yr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function CO(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let o=n[i];r.push(o!=null&&o.length?Array.from(o):null)}}var Fn=(()=>{class t{static __NG_ELEMENT_ID__=wO}return t})();function wO(){let t=qe();return ub(t,X())}var bO=Fn,lb=class extends bO{_lContainer;_hostTNode;_hostLView;constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return yo(this._hostTNode,this._hostLView)}get injector(){return new Yr(this._hostTNode,this._hostLView)}get parentInjector(){let e=hg(this._hostTNode,this._hostLView);if(XC(e)){let n=ou(e,this._hostLView),r=iu(e),i=n[N].data[r+8];return new Yr(i,n)}else return new Yr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=BC(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-Ge}createEmbeddedView(e,n,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=xC(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},o,s);return this.insertImpl(a,i,kC(this._hostTNode,s)),a}createComponent(e,n,r,i,o,s,a){let c=e&&!ZM(e),l;if(c)l=n;else{let C=n||{};l=C.index,r=C.injector,i=C.projectableNodes,o=C.environmentInjector||C.ngModuleRef,s=C.directives,a=C.bindings}let u=c?e:new Zr(xn(e)),d=r||this.parentInjector;if(!o&&u.ngModule==null){let S=(c?d:this.parentInjector).get(ve,null);S&&(o=S)}let f=xn(u.componentType??{}),h=xC(this._lContainer,f?.id??null),p=h?.firstChild??null,_=u.create(d,i,p,o,s,a);return this.insertImpl(_.hostView,l,kC(this._hostTNode,h)),_}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(GI(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[Ne],l=new lb(c,c[It],c[Ne]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(n),s=this._lContainer;return Gx(s,i,o,r),e.attachToViewContainerRef(),cp(zp(s),o,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=BC(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=tg(this._lContainer,n);r&&($s(zp(this._lContainer),n),Pw(r[N],r))}detach(e){let n=this._adjustIndex(e,-1),r=tg(this._lContainer,n);return r&&$s(zp(this._lContainer),n)!=null?new ur(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function BC(t){return t[Ys]}function zp(t){return t[Ys]||(t[Ys]=[])}function ub(t,e){let n,r=e[t.index];return Lt(r)?n=r:(n=Zw(r,e,null,t),e[t.index]=n,wg(e,n)),TO(n,e,t,r),new lb(n,t,e)}function DO(t,e){let n=t[ye],r=n.createComment(""),i=Ft(e,t),o=n.parentNode(i);return lu(n,o,r,n.nextSibling(i),!1),r}var TO=RO,SO=()=>!1;function AO(t,e,n){return SO(t,e,n)}function RO(t,e,n,r){if(t[ar])return;let i;n.type&8?i=wt(r):i=DO(e,n),t[ar]=i}var og=class t{queryList;matches=null;constructor(e){this.queryList=e}clone(){return new t(this.queryList)}setDirty(){this.queryList.setDirty()}},sg=class t{queries;constructor(e=[]){this.queries=e}createEmbeddedView(e){let n=e.queries;if(n!==null){let r=e.contentQueries!==null?e.contentQueries[0]:n.length,i=[];for(let o=0;o<r;o++){let s=n.getByIndex(o),a=this.queries[s.indexInDeclarationView];i.push(a.clone())}return new t(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let n=0;n<this.queries.length;n++)Ug(e,n).matches!==null&&this.queries[n].setDirty()}},ag=class{flags;read;predicate;constructor(e,n,r=null){this.flags=n,this.read=r,typeof e=="string"?this.predicate=FO(e):this.predicate=e}},cg=class t{queries;constructor(e=[]){this.queries=e}elementStart(e,n){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,n)}elementEnd(e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(e)}embeddedTView(e){let n=null;for(let r=0;r<this.length;r++){let i=n!==null?n.length:0,o=this.getByIndex(r).embeddedTView(e,i);o&&(o.indexInDeclarationView=r,n!==null?n.push(o):n=[o])}return n!==null?new t(n):null}template(e,n){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,n)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},lg=class t{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(e,n=-1){this.metadata=e,this._declarationNodeIndex=n}elementStart(e,n){this.isApplyingToNode(n)&&this.matchTNode(e,n)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,n){this.elementStart(e,n)}embeddedTView(e,n){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,n),new t(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let n=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==n;)r=r.parent;return n===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,n){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let o=r[i];this.matchTNodeWithReadOption(e,n,NO(n,o)),this.matchTNodeWithReadOption(e,n,tu(n,e,o,!1,!1))}else r===dr?n.type&4&&this.matchTNodeWithReadOption(e,n,-1):this.matchTNodeWithReadOption(e,n,tu(n,e,r,!1,!1))}matchTNodeWithReadOption(e,n,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===fn||i===Fn||i===dr&&n.type&4)this.addMatch(n.index,-2);else{let o=tu(n,e,i,!1,!1);o!==null&&this.addMatch(n.index,o)}else this.addMatch(n.index,r)}}addMatch(e,n){this.matches===null?this.matches=[e,n]:this.matches.push(e,n)}};function NO(t,e){let n=t.localNames;if(n!==null){for(let r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1]}return null}function MO(t,e){return t.type&11?yo(t,e):t.type&4?Pg(t,e):null}function kO(t,e,n,r){return n===-1?MO(e,t):n===-2?xO(t,e,r):su(t,t[N],n,e)}function xO(t,e,n){if(n===fn)return yo(e,t);if(n===dr)return Pg(e,t);if(n===Fn)return ub(e,t)}function db(t,e,n,r){let i=e[sn].queries[r];if(i.matches===null){let o=t.data,s=n.matches,a=[];for(let c=0;s!==null&&c<s.length;c+=2){let l=s[c];if(l<0)a.push(null);else{let u=o[l];a.push(kO(e,u,s[c+1],n.metadata.read))}}i.matches=a}return i.matches}function ug(t,e,n,r){let i=t.queries.getByIndex(n),o=i.matches;if(o!==null){let s=db(t,e,i,n);for(let a=0;a<o.length;a+=2){let c=o[a];if(c>0)r.push(s[a/2]);else{let l=o[a+1],u=e[-c];for(let d=Ge;d<u.length;d++){let f=u[d];f[or]===f[Ne]&&ug(f[N],f,l,r)}if(u[Wr]!==null){let d=u[Wr];for(let f=0;f<d.length;f++){let h=d[f];ug(h[N],h,l,r)}}}}}return r}function OO(t,e){return t[sn].queries[e].queryList}function PO(t,e,n){let r=new au((n&4)===4);return YI(t,e,r,r.destroy),(e[sn]??=new sg).queries.push(new og(r))-1}function LO(t,e,n,r){let i=Dt();if(i.firstCreatePass){let o=qe();UO(i,new ag(e,n,r),o.index),jO(i,t),(n&2)===2&&(i.staticContentQueries=!0)}return PO(i,X(),n)}function FO(t){return t.split(",").map(e=>e.trim())}function UO(t,e,n){t.queries===null&&(t.queries=new cg),t.queries.track(new lg(e,n))}function jO(t,e){let n=t.contentQueries||(t.contentQueries=[]),r=n.length?n[n.length-1]:-1;e!==r&&n.push(t.queries.length-1,e)}function Ug(t,e){return t.queries.getByIndex(e)}function BO(t,e){let n=t[N],r=Ug(n,e);return r.crossesNgTemplate?ug(n,t,e,[]):db(n,t,r,e)}var Jr=class{},Au=class{};var pu=class extends Jr{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new fu(this);constructor(e,n,r,i=!0){super(),this.ngModuleType=e,this._parent=n;let o=ip(e);this._bootstrapComponents=Tw(o.bootstrap),this._r3Injector=xp(e,n,[{provide:Jr,useValue:this},{provide:la,useValue:this.componentFactoryResolver},...r],kn(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},gu=class extends Au{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new pu(this.moduleType,e,[])}};var ia=class extends Jr{injector;componentFactoryResolver=new fu(this);instance=null;constructor(e){super();let n=new Fr([...e.providers,{provide:Jr,useValue:this},{provide:la,useValue:this.componentFactoryResolver}],e.parent||zs(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function wo(t,e,n=null){return new ia({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}var VO=(()=>{class t{_injector;cachedInjectors=new Map;constructor(n){this._injector=n}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){let r=dp(!1,n.type),i=r.length>0?wo([r],this._injector,""):null;this.cachedInjectors.set(n,i)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(let n of this.cachedInjectors.values())n!==null&&n.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=w({token:t,providedIn:"environment",factory:()=>new t(A(ve))})}return t})();function Ee(t){return vo(()=>{let e=fb(t),n=re(E({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===pg.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(VO).getOrCreateStandaloneInjector(n):null,getExternalStyles:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||jt.Emulated,styles:t.styles||vt,_:null,schemas:t.schemas||null,tView:null,id:""});e.standalone&&Io("NgStandalone"),hb(n);let r=t.dependencies;return n.directiveDefs=VC(r,HO),n.pipeDefs=VC(r,TI),n.id=zO(n),n})}function HO(t){return xn(t)||op(t)}function ri(t){return vo(()=>({type:t.type,bootstrap:t.bootstrap||vt,declarations:t.declarations||vt,imports:t.imports||vt,exports:t.exports||vt,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function $O(t,e){if(t==null)return jr;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],o,s,a,c;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o,c=i[3]||null):(o=i,s=i,a=wu.None,c=null),n[o]=[r,a,c],e[o]=s}return n}function WO(t){if(t==null)return jr;let e={};for(let n in t)t.hasOwnProperty(n)&&(e[t[n]]=n);return e}function Un(t){return vo(()=>{let e=fb(t);return hb(e),e})}function fb(t){let e={};return{type:t.type,providersResolver:null,viewProvidersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputConfig:t.inputs||jr,exportAs:t.exportAs||null,standalone:t.standalone??!0,signals:t.signals===!0,selectors:t.selectors||vt,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:$O(t.inputs,e),outputs:WO(t.outputs),debugInfo:null}}function hb(t){t.features?.forEach(e=>e(t))}function VC(t,e){return t?()=>{let n=typeof t=="function"?t():t,r=[];for(let i of n){let o=e(i);o!==null&&r.push(o)}return r}:null}function zO(t){let e=0,n=typeof t.consts=="function"?"":t.consts,r=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,n,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery];for(let o of r.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function GO(t,e,n,r,i,o,s,a){if(n.firstCreatePass){t.mergedAttrs=vu(t.mergedAttrs,t.attrs);let u=t.tView=Ig(2,t,i,o,s,n.directiveRegistry,n.pipeRegistry,null,n.schemas,n.consts,null);n.queries!==null&&(n.queries.template(n,t),u.queries=n.queries.embeddedTView(t))}a&&(t.flags|=a),uo(t,!1);let c=KO(n,e,t,r);ql()&&Ag(n,e,c,t),go(c,e);let l=Zw(c,e,c,t);e[r+nt]=l,wg(e,l),AO(l,t,e)}function qO(t,e,n,r,i,o,s,a,c,l,u){let d=n+nt,f;return e.firstCreatePass?(f=Tu(e,d,4,s||null,a||null),wp()&&tb(e,t,f,qr(e.consts,l),jw),QC(e,f)):f=e.data[d],GO(f,t,e,n,r,i,o,c),Qs(f)&&Ng(e,t,f),l!=null&&Mg(t,f,u),f}function bo(t,e,n,r,i,o,s,a){let c=X(),l=Dt(),u=qr(l.consts,o);return qO(c,l,t,e,n,r,i,u,void 0,s,a),bo}var KO=YO;function YO(t,e,n,r){return Kl(!0),e[ye].createComment("")}var jg=(()=>{class t{log(n){console.log(n)}warn(n){console.warn(n)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=w({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();var Bg=new T("");function Do(t){return!!t&&typeof t.then=="function"}function Vg(t){return!!t&&typeof t.subscribe=="function"}var Hg=new T("");function Ru(t){return yt([{provide:Hg,multi:!0,useValue:t}])}var $g=(()=>{class t{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r});appInits=g(Hg,{optional:!0})??[];injector=g(De);constructor(){}runInitializers(){if(this.initialized)return;let n=[];for(let i of this.appInits){let o=Ce(this.injector,i);if(Do(o))n.push(o);else if(Vg(o)){let s=new Promise((a,c)=>{o.subscribe({complete:a,error:c})});n.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),n.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||t)};static \u0275prov=w({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),da=new T("");function pb(){ph(()=>{let t="";throw new D(600,t)})}function gb(t){return t.isBoundToModule}var QO=10;var To=(()=>{class t{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=g(ut);afterRenderManager=g(Dg);zonelessEnabled=g(Xs);rootEffectScheduler=g(Bp);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new Ae;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=g(On);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(de(n=>!n))}constructor(){g(ni,{optional:!0})}whenStable(){let n;return new Promise(r=>{n=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{n.unsubscribe()})}_injector=g(ve);_rendererFactory=null;get injector(){return this._injector}bootstrap(n,r){return this.bootstrapImpl(n,r)}bootstrapImpl(n,r,i=De.NULL){return this._injector.get(fe).run(()=>{ee(q.BootstrapComponentStart);let s=n instanceof Su;if(!this._injector.get($g).done){let p="";throw new D(405,p)}let c;s?c=n:c=this._injector.get(la).resolveComponentFactory(n),this.componentTypes.push(c.componentType);let l=gb(c)?void 0:this._injector.get(Jr),u=r||c.selector,d=c.create(i,[],u,l),f=d.location.nativeElement,h=d.injector.get(Bg,null);return h?.registerApplication(f),d.onDestroy(()=>{this.detachView(d.hostView),ta(this.components,d),h?.unregisterApplication(f)}),this._loadComponent(d),ee(q.BootstrapComponentEnd,d),d})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){ee(q.ChangeDetectionStart),this.tracingSnapshot!==null?this.tracingSnapshot.run(bu.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw ee(q.ChangeDetectionEnd),new D(101,!1);let n=P(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,P(n),this.afterTick.next(),ee(q.ChangeDetectionEnd)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(Qr,null,{optional:!0}));let n=0;for(;this.dirtyFlags!==0&&n++<QO;){ee(q.ChangeDetectionSyncStart);try{this.synchronizeOnce()}finally{ee(q.ChangeDetectionSyncEnd)}}}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let n=!1;if(this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i}of this.allViews){if(!r&&!Zs(i))continue;let o=r&&!this.zonelessEnabled?0:1;qw(i,o),n=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}n||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:n})=>Zs(n))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(n){let r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){let r=n;ta(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView);try{this.tick()}catch(i){this.internalErrorHandler(i)}this.components.push(n),this._injector.get(da,[]).forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>ta(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new D(406,!1);let n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||t)};static \u0275prov=w({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function ta(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function Nu(t,e,n,r){let i=X(),o=Js();if(ua(i,o,e)){let s=Dt(),a=Gl();Tx(a,i,t,e,n,r)}return Nu}var n7=typeof document<"u"&&typeof document?.documentElement?.getAnimations=="function";function St(t,e,n){let r=X(),i=Js();if(ua(r,i,e)){let o=Dt(),s=Gl();Ix(s,r,t,e,r[ye],n)}return St}function HC(t,e,n,r,i){kg(e,t,n,i?"class":"style",r)}function F(t,e,n,r){let i=X(),o=i[N],s=t+nt,a=o.firstCreatePass?rb(s,i,2,e,jw,wp(),n,r):o.data[s];if(Bw(a,i,t,e,mb),Qs(a)){let c=i[N];Ng(c,i,a),vw(c,a,i)}return r!=null&&Mg(i,a),F}function U(){let t=Dt(),e=qe(),n=Vw(e);return t.firstCreatePass&&ib(t,n),bp(n)&&Dp(),Cp(),n.classesWithoutHost!=null&&rk(n)&&HC(t,n,X(),n.classesWithoutHost,!0),n.stylesWithoutHost!=null&&ik(n)&&HC(t,n,X(),n.stylesWithoutHost,!1),U}function Ye(t,e,n,r){return F(t,e,n,r),U(),Ye}function b(t,e,n,r){let i=X(),o=i[N],s=t+nt,a=o.firstCreatePass?lO(s,o,2,e,n,r):o.data[s];return Bw(a,i,t,e,mb),r!=null&&Mg(i,a),b}function y(){let t=qe(),e=Vw(t);return bp(e)&&Dp(),Cp(),y}function H(t,e,n,r){return b(t,e,n,r),y(),H}var mb=(t,e,n,r,i)=>(Kl(!0),Iw(e[ye],r,fC()));function Wg(){return X()}function Mu(t,e,n){let r=X(),i=Js();if(ua(r,i,e)){let o=Dt(),s=Gl();Uw(s,r,t,e,r[ye],n)}return Mu}var fa="en-US";var ZO=fa;function _b(t){typeof t=="string"&&(ZO=t.toLowerCase().replace(/_/g,"-"))}function rt(t,e,n){let r=X(),i=Dt(),o=qe();return JO(i,r,r[ye],o,t,e,n),rt}function JO(t,e,n,r,i,o,s){let a=!0,c=null;if((r.type&3||s)&&(c??=Wp(r,e,o),fO(r,t,e,s,n,i,o,c)&&(a=!1)),a){let l=r.outputs?.[i],u=r.hostDirectiveOutputs?.[i];if(u&&u.length)for(let d=0;d<u.length;d+=2){let f=u[d],h=u[d+1];c??=Wp(r,e,o),UC(r,e,f,h,i,c)}if(l&&l.length)for(let d of l)c??=Wp(r,e,o),UC(r,e,d,i,i,c)}}function So(t=1){return dC(t)}function ku(t,e,n,r){return LO(t,e,n,r),ku}function zg(t){let e=X(),n=Dt(),r=Np();$l(r+1);let i=Ug(n,r);if(t.dirty&&zI(e)===((i.metadata.flags&2)===2)){if(i.matches===null)t.reset([]);else{let o=BO(e,r);t.reset(o,vk),t.notifyOnChanges()}return!0}return!1}function Gg(){return OO(X(),Np())}function Jl(t,e){return t<<17|e<<2}function Xr(t){return t>>17&32767}function XO(t){return(t&2)==2}function eP(t,e){return t&131071|e<<17}function dg(t){return t|2}function _o(t){return(t&131068)>>2}function Gp(t,e){return t&-131069|e<<2}function tP(t){return(t&1)===1}function fg(t){return t|1}function nP(t,e,n,r,i,o){let s=o?e.classBindings:e.styleBindings,a=Xr(s),c=_o(s);t[r]=n;let l=!1,u;if(Array.isArray(n)){let d=n;u=d[1],(u===null||oo(d,u)>0)&&(l=!0)}else u=n;if(i)if(c!==0){let f=Xr(t[a+1]);t[r+1]=Jl(f,a),f!==0&&(t[f+1]=Gp(t[f+1],r)),t[a+1]=eP(t[a+1],r)}else t[r+1]=Jl(a,0),a!==0&&(t[a+1]=Gp(t[a+1],r)),a=r;else t[r+1]=Jl(c,0),a===0?a=r:t[c+1]=Gp(t[c+1],r),c=r;l&&(t[r+1]=dg(t[r+1])),$C(t,u,r,!0),$C(t,u,r,!1),rP(e,u,t,r,o),s=Jl(a,c),o?e.classBindings=s:e.styleBindings=s}function rP(t,e,n,r,i){let o=i?t.residualClasses:t.residualStyles;o!=null&&typeof e=="string"&&oo(o,e)>=0&&(n[r+1]=fg(n[r+1]))}function $C(t,e,n,r){let i=t[n+1],o=e===null,s=r?Xr(i):_o(i),a=!1;for(;s!==0&&(a===!1||o);){let c=t[s],l=t[s+1];iP(c,e)&&(a=!0,t[s+1]=r?fg(l):dg(l)),s=r?Xr(l):_o(l)}a&&(t[n+1]=r?dg(i):fg(i))}function iP(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?oo(t,e)>=0:!1}function xu(t,e){return oP(t,e,null,!0),xu}function oP(t,e,n,r){let i=X(),o=Dt(),s=rC(2);if(o.firstUpdatePass&&aP(o,t,s,r),e!==Ln&&ua(i,s,e)){let a=o.data[Kr()];fP(o,a,i,i[ye],t,i[s+1]=hP(e,n),r,s)}}function sP(t,e){return e>=t.expandoStartIndex}function aP(t,e,n,r){let i=t.data;if(i[n+1]===null){let o=i[Kr()],s=sP(t,n);pP(o,r)&&e===null&&!s&&(e=!1),e=cP(i,o,e,r),nP(i,o,e,n,s,r)}}function cP(t,e,n,r){let i=aC(t),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(n=qp(null,t,e,n,r),n=oa(n,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||t[s]!==i)if(n=qp(i,t,e,n,r),o===null){let c=lP(t,e,r);c!==void 0&&Array.isArray(c)&&(c=qp(null,t,e,c[1],r),c=oa(c,e.attrs,r),uP(t,e,r,c))}else o=dP(t,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),n}function lP(t,e,n){let r=n?e.classBindings:e.styleBindings;if(_o(r)!==0)return t[Xr(r)]}function uP(t,e,n,r){let i=n?e.classBindings:e.styleBindings;t[Xr(i)]=r}function dP(t,e,n){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=t[o].hostAttrs;r=oa(r,s,n)}return oa(r,e.attrs,n)}function qp(t,e,n,r,i){let o=null,s=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<s&&(o=e[a],r=oa(r,o.hostAttrs,i),o!==t);)a++;return t!==null&&(n.directiveStylingLast=a),r}function oa(t,e,n){let r=n?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),PI(t,s,n?!0:e[++o]))}return t===void 0?null:t}function fP(t,e,n,r,i,o,s,a){if(!(e.type&3))return;let c=t.data,l=c[a+1],u=tP(l)?WC(c,e,n,i,_o(l),s):void 0;if(!mu(u)){mu(o)||XO(l)&&(o=WC(c,null,n,i,a,s));let d=mp(Kr(),n);mx(r,s,d,i,o)}}function WC(t,e,n,r,i,o){let s=e===null,a;for(;i>0;){let c=t[i],l=Array.isArray(c),u=l?c[1]:c,d=u===null,f=n[i+1];f===Ln&&(f=d?vt:void 0);let h=d?Pl(f,r):u===r?f:void 0;if(l&&!mu(h)&&(h=Pl(c,r)),mu(h)&&(a=h,s))return a;let p=t[i+1];i=s?Xr(p):_o(p)}if(e!==null){let c=o?e.residualClasses:e.residualStyles;c!=null&&(a=Pl(c,r))}return a}function mu(t){return t!==void 0}function hP(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=kn(ca(t)))),t}function pP(t,e){return(t.flags&(e?8:16))!==0}function m(t,e=""){let n=X(),r=Dt(),i=t+nt,o=r.firstCreatePass?Tu(r,i,1,e,null):r.data[i],s=gP(r,n,o,e,t);n[i]=s,ql()&&Ag(r,n,s,o),uo(o,!1)}var gP=(t,e,n,r,i)=>(Kl(!0),Nk(e[ye],r));function mP(t,e,n,r=""){return ua(t,Js(),n)?e+Hs(n)+r:Ln}function ha(t){return pa("",t),ha}function pa(t,e,n){let r=X(),i=mP(r,t,e,n);return i!==Ln&&_P(r,Kr(),i),pa}function _P(t,e,n){let r=mp(e,t);Mk(t[ye],r,n)}function qg(t,e){let n=tC()+t,r=X();return r[n]===Ln?uO(r,n,e()):dO(r,n)}var _u=class{ngModuleFactory;componentFactories;constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},Kg=(()=>{class t{compileModuleSync(n){return new gu(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){let r=this.compileModuleSync(n),i=ip(n),o=Tw(i.declarations).reduce((s,a)=>{let c=xn(a);return c&&s.push(new Zr(c)),s},[]);return new _u(r,o)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static \u0275fac=function(r){return new(r||t)};static \u0275prov=w({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var vb=(()=>{class t{applicationErrorHandler=g(ut);appRef=g(To);taskService=g(On);ngZone=g(fe);zonelessEnabled=g(Xs);tracing=g(ni,{optional:!0});zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new be;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Us):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(g(jp,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()}))}notify(n){if(!this.zonelessEnabled&&n===5)return;switch(n){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2;break}case 12:{this.appRef.dirtyFlags|=16;break}case 13:{this.appRef.dirtyFlags|=2;break}case 11:break;case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?Pp:Op;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Us+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let n=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.taskService.remove(n),this.applicationErrorHandler(r)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,Pp(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(n)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let n=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(n)}}static \u0275fac=function(r){return new(r||t)};static \u0275prov=w({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function yb(){return[{provide:tr,useExisting:vb},{provide:fe,useClass:js},{provide:Xs,useValue:!0}]}function vP(){return typeof $localize<"u"&&$localize.locale||fa}var Ou=new T("",{factory:()=>g(Ou,{optional:!0,skipSelf:!0})||vP()});var bb=Symbol("InputSignalNode#UNSET"),xP=re(E({},tl),{transformFn:void 0,applyValueToInputSignal(t,e){Ns(t,e)}});function Db(t,e){let n=Object.create(xP);n.value=t,n.transformFn=e?.transform;function r(){if(Jc(n),n.value===bb){let i=null;throw new D(-950,i)}return n.value}return r[mt]=n,r}var Lu=class{attributeName;constructor(e){this.attributeName=e}__NG_ELEMENT_ID__=()=>aa(this.attributeName);toString(){return`HostAttributeToken ${this.attributeName}`}};function Eb(t,e){return Db(t,e)}function OP(t){return Db(bb,t)}var Tb=(Eb.required=OP,Eb);var Yg=new T(""),PP=new T("");function ga(t){return!t.moduleRef}function LP(t){let e=ga(t)?t.r3Injector:t.moduleRef.injector,n=e.get(fe);return n.run(()=>{ga(t)?t.r3Injector.resolveInjectorInitializers():t.moduleRef.resolveInjectorInitializers();let r=e.get(ut),i;if(n.runOutsideAngular(()=>{i=n.onError.subscribe({next:r})}),ga(t)){let o=()=>e.destroy(),s=t.platformInjector.get(Yg);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>t.moduleRef.destroy(),s=t.platformInjector.get(Yg);s.add(o),t.moduleRef.onDestroy(()=>{ta(t.allPlatformModules,t.moduleRef),i.unsubscribe(),s.delete(o)})}return UP(r,n,()=>{let o=e.get(On),s=o.add(),a=e.get($g);return a.runInitializers(),a.donePromise.then(()=>{let c=e.get(Ou,fa);if(_b(c||fa),!e.get(PP,!0))return ga(t)?e.get(To):(t.allPlatformModules.push(t.moduleRef),t.moduleRef);if(ga(t)){let u=e.get(To);return t.rootComponent!==void 0&&u.bootstrap(t.rootComponent),u}else return FP?.(t.moduleRef,t.allPlatformModules),t.moduleRef}).finally(()=>void o.remove(s))})})}var FP;function UP(t,e,n){try{let r=n();return Do(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t(r)),r}}var Pu=null;function jP(t=[],e){return De.create({name:e,providers:[{provide:Ws,useValue:"platform"},{provide:Yg,useValue:new Set([()=>Pu=null])},...t]})}function BP(t=[]){if(Pu)return Pu;let e=jP(t);return Pu=e,pb(),VP(e),e}function VP(t){let e=t.get(Eu,null);Ce(t,()=>{e?.forEach(n=>n())})}function em(){return!1}var Ao=(()=>{class t{static __NG_ELEMENT_ID__=HP}return t})();function HP(t){return $P(qe(),X(),(t&16)===16)}function $P(t,e,n){if(cr(t)&&!n){let r=bt(t.index,e);return new ur(r,r)}else if(t.type&175){let r=e[Ct];return new ur(r,e)}return null}var Qg=class{constructor(){}supports(e){return Fg(e)}create(e){return new Zg(e)}},WP=(t,e)=>e,Zg=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(e){this._trackByFn=e||WP}forEachItem(e){let n;for(n=this._itHead;n!==null;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,r=this._removalsHead,i=0,o=null;for(;n||r;){let s=!r||n&&n.currentIndex<Ib(r,i,o)?n:r,a=Ib(s,i,o),c=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(n=n._next,s.previousIndex==null)i++;else{o||(o=[]);let l=a-i,u=c-i;if(l!=u){for(let f=0;f<l;f++){let h=f<o.length?o[f]:o[f]=0,p=h+f;u<=p&&p<l&&(o[f]=h+1)}let d=s.previousIndex;o[d]=u-l}}a!==c&&e(s,a,c)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;n!==null;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;n!==null;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;n!==null;n=n._nextIdentityChange)e(n)}diff(e){if(e==null&&(e=[]),!Fg(e))throw new D(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),n===null||!Object.is(n.trackById,s)?(n=this._mismatch(n,o,s,a),r=!0):(r&&(n=this._verifyReinsertion(n,o,s,a)),Object.is(n.item,o)||this._addIdentityChange(n,o)),n=n._next}else i=0,ob(e,a=>{s=this._trackByFn(i,a),n===null||!Object.is(n.trackById,s)?(n=this._mismatch(n,a,s,i),r=!0):(r&&(n=this._verifyReinsertion(n,a,s,i)),Object.is(n.item,a)||this._addIdentityChange(n,a)),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,o,i)):e=this._addAfter(new Jg(n,r),o,i)),e}_verifyReinsertion(e,n,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let n=e._next;this._addToRemovals(this._unlink(e)),e=n}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,n,r),this._addToMoves(e,r),e}_moveAfter(e,n,r){return this._unlink(e),this._insertAfter(e,n,r),this._addToMoves(e,r),e}_addAfter(e,n,r){return this._insertAfter(e,n,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,n,r){let i=n===null?this._itHead:n._next;return e._next=i,e._prev=n,i===null?this._itTail=e:i._prev=e,n===null?this._itHead=e:n._next=e,this._linkedRecords===null&&(this._linkedRecords=new Fu),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let n=e._prev,r=e._next;return n===null?this._itHead=r:n._next=r,r===null?this._itTail=n:r._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Fu),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},Jg=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(e,n){this.item=e,this.trackById=n}},Xg=class{_head=null;_tail=null;add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let r;for(r=this._head;r!==null;r=r._nextDup)if((n===null||n<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let n=e._prevDup,r=e._nextDup;return n===null?this._head=r:n._nextDup=r,r===null?this._tail=n:r._prevDup=n,this._head===null}},Fu=class{map=new Map;put(e){let n=e.trackById,r=this.map.get(n);r||(r=new Xg,this.map.set(n,r)),r.add(e)}get(e,n){let r=e,i=this.map.get(r);return i?i.get(e,n):null}remove(e){let n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function Ib(t,e,n){let r=t.previousIndex;if(r===null)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}function Cb(){return new tm([new Qg])}var tm=(()=>{class t{factories;static \u0275prov=w({token:t,providedIn:"root",factory:Cb});constructor(n){this.factories=n}static create(n,r){if(r!=null){let i=r.factories.slice();n=n.concat(i)}return new t(n)}static extend(n){return{provide:t,useFactory:()=>{let r=g(t,{optional:!0,skipSelf:!0});return t.create(n,r||Cb())}}}find(n){let r=this.factories.find(i=>i.supports(n));if(r!=null)return r;throw new D(901,!1)}}return t})();function Sb(t){let{rootComponent:e,appProviders:n,platformProviders:r,platformRef:i}=t;ee(q.BootstrapApplicationStart);try{let o=i?.injector??BP(r),s=[yb(),mC,...n||[]],a=new ia({providers:s,parent:o,debugName:"",runEnvironmentInitializers:!1});return LP({r3Injector:a.injector,platformInjector:o,rootComponent:e})}catch(o){return Promise.reject(o)}finally{ee(q.BootstrapApplicationEnd)}}function ma(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}function Ab(t){let e=xn(t);if(!e)return null;let n=new Zr(e);return{get selector(){return n.selector},get type(){return n.componentType},get inputs(){return n.inputs},get outputs(){return n.outputs},get ngContentSelectors(){return n.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var Rb=null;function Bn(){return Rb}function nm(t){Rb??=t}var _a=class{},Ro=(()=>{class t{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||t)};static \u0275prov=w({token:t,factory:()=>g(Nb),providedIn:"platform"})}return t})(),rm=new T(""),Nb=(()=>{class t extends Ro{_location;_history;_doc=g(ge);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Bn().getBaseHref(this._doc)}onPopState(n){let r=Bn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){let r=Bn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,i){this._history.pushState(n,r,i)}replaceState(n,r,i){this._history.replaceState(n,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||t)};static \u0275prov=w({token:t,factory:()=>new t,providedIn:"platform"})}return t})();function Uu(t,e){return t?e?t.endsWith("/")?e.startsWith("/")?t+e.slice(1):t+e:e.startsWith("/")?t+e:`${t}/${e}`:t:e}function Mb(t){let e=t.search(/#|\?|$/);return t[e-1]==="/"?t.slice(0,e-1)+t.slice(e):t}function Bt(t){return t&&t[0]!=="?"?`?${t}`:t}var Vt=(()=>{class t{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||t)};static \u0275prov=w({token:t,factory:()=>g(Bu),providedIn:"root"})}return t})(),ju=new T(""),Bu=(()=>{class t extends Vt{_platformLocation;_baseHref;_removeListenerFns=[];constructor(n,r){super(),this._platformLocation=n,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??g(ge).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return Uu(this._baseHref,n)}path(n=!1){let r=this._platformLocation.pathname+Bt(this._platformLocation.search),i=this._platformLocation.hash;return i&&n?`${r}${i}`:r}pushState(n,r,i,o){let s=this.prepareExternalUrl(i+Bt(o));this._platformLocation.pushState(n,r,s)}replaceState(n,r,i,o){let s=this.prepareExternalUrl(i+Bt(o));this._platformLocation.replaceState(n,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static \u0275fac=function(r){return new(r||t)(A(Ro),A(ju,8))};static \u0275prov=w({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),fr=(()=>{class t{_subject=new Ae;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(n){this._locationStrategy=n;let r=this._locationStrategy.getBaseHref();this._basePath=qP(Mb(kb(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+Bt(r))}normalize(n){return t.stripTrailingSlash(GP(this._basePath,kb(n)))}prepareExternalUrl(n){return n&&n[0]!=="/"&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",i=null){this._locationStrategy.pushState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Bt(r)),i)}replaceState(n,r="",i=null){this._locationStrategy.replaceState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Bt(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(i=>i(n,r))}subscribe(n,r,i){return this._subject.subscribe({next:n,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=Bt;static joinWithSlash=Uu;static stripTrailingSlash=Mb;static \u0275fac=function(r){return new(r||t)(A(Vt))};static \u0275prov=w({token:t,factory:()=>zP(),providedIn:"root"})}return t})();function zP(){return new fr(A(Vt))}function GP(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function kb(t){return t.replace(/\/index.html$/,"")}function qP(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}var im=(()=>{class t extends Vt{_platformLocation;_baseHref="";_removeListenerFns=[];constructor(n,r){super(),this._platformLocation=n,r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}path(n=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(n){let r=Uu(this._baseHref,n);return r.length>0?"#"+r:r}pushState(n,r,i,o){let s=this.prepareExternalUrl(i+Bt(o))||this._platformLocation.pathname;this._platformLocation.pushState(n,r,s)}replaceState(n,r,i,o){let s=this.prepareExternalUrl(i+Bt(o))||this._platformLocation.pathname;this._platformLocation.replaceState(n,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static \u0275fac=function(r){return new(r||t)(A(Ro),A(ju,8))};static \u0275prov=w({token:t,factory:t.\u0275fac})}return t})();var Vu=class{$implicit;ngForOf;index;count;constructor(e,n,r,i){this.$implicit=e,this.ngForOf=n,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},$u=(()=>{class t{_viewContainer;_template;_differs;set ngForOf(n){this._ngForOf=n,this._ngForOfDirty=!0}set ngForTrackBy(n){this._trackByFn=n}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(n,r,i){this._viewContainer=n,this._template=r,this._differs=i}set ngForTemplate(n){n&&(this._template=n)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let n=this._ngForOf;!this._differ&&n&&(this._differ=this._differs.find(n).create(this.ngForTrackBy))}if(this._differ){let n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}}_applyChanges(n){let r=this._viewContainer;n.forEachOperation((i,o,s)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new Vu(i.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(o===null?void 0:o);else if(o!==null){let a=r.get(o);r.move(a,s),xb(a,i)}});for(let i=0,o=r.length;i<o;i++){let a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}n.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);xb(o,i)})}static ngTemplateContextGuard(n,r){return!0}static \u0275fac=function(r){return new(r||t)(Me(Fn),Me(dr),Me(tm))};static \u0275dir=Un({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return t})();function xb(t,e){t.context.$implicit=e.item}var om=(()=>{class t{_viewContainer;_context=new Hu;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(n,r){this._viewContainer=n,this._thenTemplateRef=r}set ngIf(n){this._context.$implicit=this._context.ngIf=n,this._updateView()}set ngIfThen(n){Ob(n,!1),this._thenTemplateRef=n,this._thenViewRef=null,this._updateView()}set ngIfElse(n){Ob(n,!1),this._elseTemplateRef=n,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(n,r){return!0}static \u0275fac=function(r){return new(r||t)(Me(Fn),Me(dr))};static \u0275dir=Un({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return t})(),Hu=class{$implicit=null;ngIf=null};function Ob(t,e){if(t&&!t.createEmbeddedView)throw new D(2020,!1)}var No=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=ri({type:t});static \u0275inj=rr({})}return t})();function sm(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,o]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var va=class{};var Pb="browser";var Lb=(()=>{class t{static \u0275prov=w({token:t,providedIn:"root",factory:()=>new am(g(ge),window)})}return t})(),am=class{document;window;offset=()=>[0,0];constructor(e,n){this.document=e,this.window=n}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e,n){this.window.scrollTo(re(E({},n),{left:e[0],top:e[1]}))}scrollToAnchor(e,n){let r=KP(this.document,e);r&&(this.scrollToElement(r,n),r.focus())}setHistoryScrollRestoration(e){try{this.window.history.scrollRestoration=e}catch{console.warn(nr(2400,!1))}}scrollToElement(e,n){let r=e.getBoundingClientRect(),i=r.left+this.window.pageXOffset,o=r.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(re(E({},n),{left:i-s[0],top:o-s[1]}))}};function KP(t,e){let n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if(typeof t.createTreeWalker=="function"&&t.body&&typeof t.body.attachShadow=="function"){let r=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let o=i.shadowRoot;if(o){let s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}i=r.nextNode()}}return null}var ya=class{_doc;constructor(e){this._doc=e}manager},Wu=(()=>{class t extends ya{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i,o){return n.addEventListener(r,i,o),()=>this.removeEventListener(n,r,i,o)}removeEventListener(n,r,i,o){return n.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||t)(A(ge))};static \u0275prov=w({token:t,factory:t.\u0275fac})}return t})(),qu=new T(""),fm=(()=>{class t{_zone;_plugins;_eventNameToPlugin=new Map;constructor(n,r){this._zone=r,n.forEach(s=>{s.manager=this});let i=n.filter(s=>!(s instanceof Wu));this._plugins=i.slice().reverse();let o=n.find(s=>s instanceof Wu);o&&this._plugins.push(o)}addEventListener(n,r,i,o){return this._findPluginFor(r).addEventListener(n,r,i,o)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(o=>o.supports(n)),!r)throw new D(5101,!1);return this._eventNameToPlugin.set(n,r),r}static \u0275fac=function(r){return new(r||t)(A(qu),A(fe))};static \u0275prov=w({token:t,factory:t.\u0275fac})}return t})(),lm="ng-app-id";function Fb(t){for(let e of t)e.remove()}function Ub(t,e){let n=e.createElement("style");return n.textContent=t,n}function YP(t,e,n,r){let i=t.head?.querySelectorAll(`style[${lm}="${e}"],link[${lm}="${e}"]`);if(i)for(let o of i)o.removeAttribute(lm),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&n.set(o.textContent,{usage:0,elements:[o]})}function dm(t,e){let n=e.createElement("link");return n.setAttribute("rel","stylesheet"),n.setAttribute("href",t),n}var hm=(()=>{class t{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(n,r,i,o={}){this.doc=n,this.appId=r,this.nonce=i,YP(n,r,this.inline,this.external),this.hosts.add(n.head)}addStyles(n,r){for(let i of n)this.addUsage(i,this.inline,Ub);r?.forEach(i=>this.addUsage(i,this.external,dm))}removeStyles(n,r){for(let i of n)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(n,r,i){let o=r.get(n);o?o.usage++:r.set(n,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(n,this.doc)))})}removeUsage(n,r){let i=r.get(n);i&&(i.usage--,i.usage<=0&&(Fb(i.elements),r.delete(n)))}ngOnDestroy(){for(let[,{elements:n}]of[...this.inline,...this.external])Fb(n);this.hosts.clear()}addHost(n){this.hosts.add(n);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(n,Ub(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(n,dm(r,this.doc)))}removeHost(n){this.hosts.delete(n)}addElement(n,r){return this.nonce&&r.setAttribute("nonce",this.nonce),n.appendChild(r)}static \u0275fac=function(r){return new(r||t)(A(ge),A(yu),A(Iu,8),A(ti))};static \u0275prov=w({token:t,factory:t.\u0275fac})}return t})(),um={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},pm=/%COMP%/g;var Bb="%COMP%",QP=`_nghost-${Bb}`,ZP=`_ngcontent-${Bb}`,JP=!0,XP=new T("",{factory:()=>JP});function e1(t){return ZP.replace(pm,t)}function t1(t){return QP.replace(pm,t)}function Vb(t,e){return e.map(n=>n.replace(pm,t))}var gm=(()=>{class t{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;constructor(n,r,i,o,s,a,c=null,l=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.ngZone=a,this.nonce=c,this.tracingService=l,this.defaultRenderer=new Ea(n,s,a,this.tracingService)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;let i=this.getOrCreateRenderer(n,r);return i instanceof Gu?i.applyToHost(n):i instanceof Ia&&i.applyStyles(),i}getOrCreateRenderer(n,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,c=this.eventManager,l=this.sharedStylesHost,u=this.removeStylesOnCompDestroy,d=this.tracingService;switch(r.encapsulation){case jt.Emulated:o=new Gu(c,l,r,this.appId,u,s,a,d);break;case jt.ShadowDom:return new zu(c,n,r,s,a,this.nonce,d,l);case jt.ExperimentalIsolatedShadowDom:return new zu(c,n,r,s,a,this.nonce,d);default:o=new Ia(c,l,r,u,s,a,d);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(n){this.rendererByCompId.delete(n)}static \u0275fac=function(r){return new(r||t)(A(fm),A(hm),A(yu),A(XP),A(ge),A(fe),A(Iu),A(ni,8))};static \u0275prov=w({token:t,factory:t.\u0275fac})}return t})(),Ea=class{eventManager;doc;ngZone;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.tracingService=i}destroy(){}destroyNode=null;createElement(e,n){return n?this.doc.createElementNS(um[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(jb(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(jb(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){n.remove()}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new D(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let o=um[i];o?e.setAttributeNS(o,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=um[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(dn.DashCase|dn.Important)?e.style.setProperty(n,r,i&dn.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&dn.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r,i){if(typeof e=="string"&&(e=Bn().getGlobalEventTarget(this.doc,e),!e))throw new D(5102,!1);let o=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(e,n,o)),this.eventManager.addEventListener(e,n,o,i)}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;e(n)===!1&&n.preventDefault()}}};function jb(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var zu=class extends Ea{hostEl;sharedStylesHost;shadowRoot;constructor(e,n,r,i,o,s,a,c){super(e,i,o,a),this.hostEl=n,this.sharedStylesHost=c,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost&&this.sharedStylesHost.addHost(this.shadowRoot);let l=r.styles;l=Vb(r.id,l);for(let d of l){let f=document.createElement("style");s&&f.setAttribute("nonce",s),f.textContent=d,this.shadowRoot.appendChild(f)}let u=r.getExternalStyles?.();if(u)for(let d of u){let f=dm(d,i);s&&f.setAttribute("nonce",s),this.shadowRoot.appendChild(f)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(null,n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost&&this.sharedStylesHost.removeHost(this.shadowRoot)}},Ia=class extends Ea{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,n,r,i,o,s,a,c){super(e,o,s,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i;let l=r.styles;this.styles=c?Vb(c,l):l,this.styleUrls=r.getExternalStyles?.(c)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&mo.size===0&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},Gu=class extends Ia{contentAttr;hostAttr;constructor(e,n,r,i,o,s,a,c){let l=i+"-"+r.id;super(e,n,r,o,s,a,c,l),this.contentAttr=e1(l),this.hostAttr=t1(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}};var Ku=class t extends _a{supportsDOMEvents=!0;static makeCurrent(){nm(new t)}onAndCancel(e,n,r,i){return e.addEventListener(n,r,i),()=>{e.removeEventListener(n,r,i)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.remove()}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=n1();return n==null?null:r1(n)}resetBaseElement(){Ca=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return sm(document.cookie,e)}},Ca=null;function n1(){return Ca=Ca||document.head.querySelector("base"),Ca?Ca.getAttribute("href"):null}function r1(t){return new URL(t,document.baseURI).pathname}var i1=(()=>{class t{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||t)};static \u0275prov=w({token:t,factory:t.\u0275fac})}return t})(),Hb=["alt","control","meta","shift"],o1={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},s1={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},$b=(()=>{class t extends ya{constructor(n){super(n)}supports(n){return t.parseEventName(n)!=null}addEventListener(n,r,i,o){let s=t.parseEventName(r),a=t.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Bn().onAndCancel(n,s.domEventName,a,o))}static parseEventName(n){let r=n.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=t._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),Hb.forEach(l=>{let u=r.indexOf(l);u>-1&&(r.splice(u,1),s+=l+".")}),s+=o,r.length!=0||o.length===0)return null;let c={};return c.domEventName=i,c.fullKey=s,c}static matchEventFullKeyCode(n,r){let i=o1[n.key]||n.key,o="";return r.indexOf("code.")>-1&&(i=n.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),Hb.forEach(s=>{if(s!==i){let a=s1[s];a(n)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(n,r,i){return o=>{t.matchEventFullKeyCode(o,n)&&i.runGuarded(()=>r(o))}}static _normalizeKey(n){return n==="esc"?"escape":n}static \u0275fac=function(r){return new(r||t)(A(ge))};static \u0275prov=w({token:t,factory:t.\u0275fac})}return t})();function mm(t,e,n){let r=E({rootComponent:t,platformRef:n?.platformRef},a1(e));return Sb(r)}function a1(t){return{appProviders:[...f1,...t?.providers??[]],platformProviders:d1}}function c1(){Ku.makeCurrent()}function l1(){return new rn}function u1(){return gg(document),document}var d1=[{provide:ti,useValue:Pb},{provide:Eu,useValue:c1,multi:!0},{provide:ge,useFactory:u1}];var f1=[{provide:Ws,useValue:"root"},{provide:rn,useFactory:l1},{provide:qu,useClass:Wu,multi:!0},{provide:qu,useClass:$b,multi:!0},gm,hm,fm,{provide:Qr,useExisting:gm},{provide:va,useClass:i1},[]];var Wb=(()=>{class t{_doc;constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}static \u0275fac=function(r){return new(r||t)(A(ge))};static \u0275prov=w({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var M="primary",xa=Symbol("RouteTitle"),Im=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function ai(t){return new Im(t)}function Xb(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=t[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function ed(t){return new Promise((e,n)=>{t.pipe(Nn()).subscribe({next:r=>e(r),error:r=>n(r)})})}function p1(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!hn(t[n],e[n]))return!1;return!0}function hn(t,e){let n=t?Cm(t):void 0,r=e?Cm(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!eD(t[i],e[i]))return!1;return!0}function Cm(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function eD(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((i,o)=>r[o]===i)}else return t===e}function tD(t){return t.length>0?t[t.length-1]:null}function ci(t){return El(t)?t:Do(t)?pe(Promise.resolve(t)):O(t)}function nD(t){return El(t)?ed(t):Promise.resolve(t)}var g1={exact:iD,subset:oD},rD={exact:m1,subset:_1,ignored:()=>!0};function zb(t,e,n){return g1[n.paths](t.root,e.root,n.matrixParams)&&rD[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function m1(t,e){return hn(t,e)}function iD(t,e,n){if(!oi(t.segments,e.segments)||!Zu(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!iD(t.children[r],e.children[r],n))return!1;return!0}function _1(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>eD(t[n],e[n]))}function oD(t,e,n){return sD(t,e,e.segments,n)}function sD(t,e,n,r){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!oi(i,n)||e.hasChildren()||!Zu(i,n,r))}else if(t.segments.length===n.length){if(!oi(t.segments,n)||!Zu(t.segments,n,r))return!1;for(let i in e.children)if(!t.children[i]||!oD(t.children[i],e.children[i],r))return!1;return!0}else{let i=n.slice(0,t.segments.length),o=n.slice(t.segments.length);return!oi(t.segments,i)||!Zu(t.segments,i,r)||!t.children[M]?!1:sD(t.children[M],e,o,r)}}function Zu(t,e,n){return e.every((r,i)=>rD[n](t[i].parameters,r.parameters))}var $t=class{root;queryParams;fragment;_queryParamMap;constructor(e=new Y([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=ai(this.queryParams),this._queryParamMap}toString(){return E1.serialize(this)}},Y=class{segments;children;parent=null;constructor(e,n){this.segments=e,this.children=n,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Ju(this)}},hr=class{path;parameters;_parameterMap;constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=ai(this.parameters),this._parameterMap}toString(){return cD(this)}};function v1(t,e){return oi(t,e)&&t.every((n,r)=>hn(n.parameters,e[r].parameters))}function oi(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function y1(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===M&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==M&&(n=n.concat(e(i,r)))}),n}var li=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=w({token:t,factory:()=>new Vn,providedIn:"root"})}return t})(),Vn=class{parse(e){let n=new bm(e);return new $t(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${wa(e.root,!0)}`,r=w1(e.queryParams),i=typeof e.fragment=="string"?`#${I1(e.fragment)}`:"";return`${n}${r}${i}`}},E1=new Vn;function Ju(t){return t.segments.map(e=>cD(e)).join("/")}function wa(t,e){if(!t.hasChildren())return Ju(t);if(e){let n=t.children[M]?wa(t.children[M],!1):"",r=[];return Object.entries(t.children).forEach(([i,o])=>{i!==M&&r.push(`${i}:${wa(o,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=y1(t,(r,i)=>i===M?[wa(t.children[M],!1)]:[`${i}:${wa(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[M]!=null?`${Ju(t)}/${n[0]}`:`${Ju(t)}/(${n.join("//")})`}}function aD(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Yu(t){return aD(t).replace(/%3B/gi,";")}function I1(t){return encodeURI(t)}function wm(t){return aD(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Xu(t){return decodeURIComponent(t)}function Gb(t){return Xu(t.replace(/\+/g,"%20"))}function cD(t){return`${wm(t.path)}${C1(t.parameters)}`}function C1(t){return Object.entries(t).map(([e,n])=>`;${wm(e)}=${wm(n)}`).join("")}function w1(t){let e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${Yu(n)}=${Yu(i)}`).join("&"):`${Yu(n)}=${Yu(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var b1=/^[^\/()?;#]+/;function _m(t){let e=t.match(b1);return e?e[0]:""}var D1=/^[^\/()?;=#]+/;function T1(t){let e=t.match(D1);return e?e[0]:""}var S1=/^[^=?&#]+/;function A1(t){let e=t.match(S1);return e?e[0]:""}var R1=/^[^&#]+/;function N1(t){let e=t.match(R1);return e?e[0]:""}var bm=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Y([],{}):new Y([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[M]=new Y(e,n)),r}parseSegment(){let e=_m(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new D(4009,!1);return this.capture(e),new hr(Xu(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=T1(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=_m(this.remaining);i&&(r=i,this.capture(r))}e[Xu(n)]=Xu(r)}parseQueryParam(e){let n=A1(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let s=N1(this.remaining);s&&(r=s,this.capture(r))}let i=Gb(n),o=Gb(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=_m(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new D(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=M);let s=this.parseChildren();n[o??M]=Object.keys(s).length===1&&s[M]?s[M]:new Y([],s),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new D(4011,!1)}};function lD(t){return t.segments.length>0?new Y([],{[M]:t}):t}function uD(t){let e={};for(let[r,i]of Object.entries(t.children)){let o=uD(i);if(r===M&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let n=new Y(t.segments,e);return M1(n)}function M1(t){if(t.numberOfChildren===1&&t.children[M]){let e=t.children[M];return new Y(t.segments.concat(e.segments),e.children)}return t}function pr(t){return t instanceof $t}function dD(t,e,n=null,r=null,i=new Vn){let o=fD(t);return hD(o,e,n,r,i)}function fD(t){let e;function n(o){let s={};for(let c of o.children){let l=n(c);s[c.outlet]=l}let a=new Y(o.url,s);return o===t&&(e=a),a}let r=n(t.root),i=lD(r);return e??i}function hD(t,e,n,r,i){let o=t;for(;o.parent;)o=o.parent;if(e.length===0)return vm(o,o,o,n,r,i);let s=k1(e);if(s.toRoot())return vm(o,o,new Y([],{}),n,r,i);let a=x1(s,o,t),c=a.processChildren?Da(a.segmentGroup,a.index,s.commands):gD(a.segmentGroup,a.index,s.commands);return vm(o,a.segmentGroup,c,n,r,i)}function td(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function Sa(t){return typeof t=="object"&&t!=null&&t.outlets}function qb(t,e,n){t||="\u0275";let r=new $t;return r.queryParams={[t]:e},n.parse(n.serialize(r)).queryParams[t]}function vm(t,e,n,r,i,o){let s={};for(let[l,u]of Object.entries(r??{}))s[l]=Array.isArray(u)?u.map(d=>qb(l,d,o)):qb(l,u,o);let a;t===e?a=n:a=pD(t,e,n);let c=lD(uD(a));return new $t(c,s,i)}function pD(t,e,n){let r={};return Object.entries(t.children).forEach(([i,o])=>{o===e?r[i]=n:r[i]=pD(o,e,n)}),new Y(t.segments,r)}var nd=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&td(r[0]))throw new D(4003,!1);let i=r.find(Sa);if(i&&i!==tD(r))throw new D(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function k1(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new nd(!0,0,t);let e=0,n=!1,r=t.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([c,l])=>{a[c]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?n=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new nd(n,e,r)}var ko=class{segmentGroup;processChildren;index;constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function x1(t,e,n){if(t.isAbsolute)return new ko(e,!0,0);if(!n)return new ko(e,!1,NaN);if(n.parent===null)return new ko(n,!0,0);let r=td(t.commands[0])?0:1,i=n.segments.length-1+r;return O1(n,i,t.numberOfDoubleDots)}function O1(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new D(4005,!1);i=r.segments.length}return new ko(r,!1,i-o)}function P1(t){return Sa(t[0])?t[0].outlets:{[M]:t}}function gD(t,e,n){if(t??=new Y([],{}),t.segments.length===0&&t.hasChildren())return Da(t,e,n);let r=L1(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let o=new Y(t.segments.slice(0,r.pathIndex),{});return o.children[M]=new Y(t.segments.slice(r.pathIndex),t.children),Da(o,0,i)}else return r.match&&i.length===0?new Y(t.segments,{}):r.match&&!t.hasChildren()?Dm(t,e,n):r.match?Da(t,0,i):Dm(t,e,n)}function Da(t,e,n){if(n.length===0)return new Y(t.segments,{});{let r=P1(n),i={};if(Object.keys(r).some(o=>o!==M)&&t.children[M]&&t.numberOfChildren===1&&t.children[M].segments.length===0){let o=Da(t.children[M],e,n);return new Y(t.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=gD(t.children[o],e,s))}),Object.entries(t.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new Y(t.segments,i)}}function L1(t,e,n){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;let s=t.segments[i],a=n[r];if(Sa(a))break;let c=`${a}`,l=r<n.length-1?n[r+1]:null;if(i>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!Yb(c,l,s))return o;r+=2}else{if(!Yb(c,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Dm(t,e,n){let r=t.segments.slice(0,e),i=0;for(;i<n.length;){let o=n[i];if(Sa(o)){let c=F1(o.outlets);return new Y(r,c)}if(i===0&&td(n[0])){let c=t.segments[e];r.push(new hr(c.path,Kb(n[0]))),i++;continue}let s=Sa(o)?o.outlets[M]:`${o}`,a=i<n.length-1?n[i+1]:null;s&&a&&td(a)?(r.push(new hr(s,Kb(a))),i+=2):(r.push(new hr(s,{})),i++)}return new Y(r,{})}function F1(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=Dm(new Y([],{}),0,r))}),e}function Kb(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function Yb(t,e,n){return t==n.path&&hn(e,n.parameters)}var xo="imperative",Te=(function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t})(Te||{}),ft=class{id;url;constructor(e,n){this.id=e,this.url=n}},gr=class extends ft{type=Te.NavigationStart;navigationTrigger;restoredState;constructor(e,n,r="imperative",i=null){super(e,n),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},ht=class extends ft{urlAfterRedirects;type=Te.NavigationEnd;constructor(e,n,r){super(e,n),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Qe=(function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t[t.Aborted=4]="Aborted",t})(Qe||{}),Po=(function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t})(Po||{}),pn=class extends ft{reason;code;type=Te.NavigationCancel;constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},gn=class extends ft{reason;code;type=Te.NavigationSkipped;constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i}},Lo=class extends ft{error;target;type=Te.NavigationError;constructor(e,n,r,i){super(e,n),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Aa=class extends ft{urlAfterRedirects;state;type=Te.RoutesRecognized;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},rd=class extends ft{urlAfterRedirects;state;type=Te.GuardsCheckStart;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},id=class extends ft{urlAfterRedirects;state;shouldActivate;type=Te.GuardsCheckEnd;constructor(e,n,r,i,o){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},od=class extends ft{urlAfterRedirects;state;type=Te.ResolveStart;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},sd=class extends ft{urlAfterRedirects;state;type=Te.ResolveEnd;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},ad=class{route;type=Te.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},cd=class{route;type=Te.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},ld=class{snapshot;type=Te.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},ud=class{snapshot;type=Te.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},dd=class{snapshot;type=Te.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},fd=class{snapshot;type=Te.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Fo=class{routerEvent;position;anchor;type=Te.Scroll;constructor(e,n,r){this.routerEvent=e,this.position=n,this.anchor=r}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},Ra=class{},Uo=class{url;navigationBehaviorOptions;constructor(e,n){this.url=e,this.navigationBehaviorOptions=n}};function U1(t){return!(t instanceof Ra)&&!(t instanceof Uo)}function j1(t,e){return t.providers&&!t._injector&&(t._injector=wo(t.providers,e,`Route: ${t.path}`)),t._injector??e}function Ht(t){return t.outlet||M}function B1(t,e){let n=t.filter(r=>Ht(r)===e);return n.push(...t.filter(r=>Ht(r)!==e)),n}function Vo(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var hd=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return Vo(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new ui(this.rootInjector)}},ui=(()=>{class t{rootInjector;contexts=new Map;constructor(n){this.rootInjector=n}onChildOutletCreated(n,r){let i=this.getOrCreateContext(n);i.outlet=r,this.contexts.set(n,i)}onChildOutletDestroyed(n){let r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new hd(this.rootInjector),this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}static \u0275fac=function(r){return new(r||t)(A(ve))};static \u0275prov=w({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),pd=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=Tm(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=Tm(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=Sm(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Sm(e,this._root).map(n=>n.value)}};function Tm(t,e){if(t===e.value)return e;for(let n of e.children){let r=Tm(t,n);if(r)return r}return null}function Sm(t,e){if(t===e.value)return[e];for(let n of e.children){let r=Sm(t,n);if(r.length)return r.unshift(e),r}return[]}var dt=class{value;children;constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function Mo(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var Na=class extends pd{snapshot;constructor(e,n){super(e),this.snapshot=n,xm(this,e)}toString(){return this.snapshot.toString()}};function mD(t){let e=V1(t),n=new Le([new hr("",{})]),r=new Le({}),i=new Le({}),o=new Le({}),s=new Le(""),a=new mn(n,r,o,s,i,M,t,e.root);return a.snapshot=e.root,new Na(new dt(a,[]),e)}function V1(t){let e={},n={},r={},o=new si([],e,r,"",n,M,t,null,{});return new Ma("",new dt(o,[]))}var mn=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,n,r,i,o,s,a,c){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(de(l=>l[xa]))??O(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(de(e=>ai(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(de(e=>ai(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function gd(t,e,n="emptyOnly"){let r,{routeConfig:i}=t;return e!==null&&(n==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:E(E({},e.params),t.params),data:E(E({},e.data),t.data),resolve:E(E(E(E({},t.data),e.data),i?.data),t._resolvedData)}:r={params:E({},t.params),data:E({},t.data),resolve:E(E({},t.data),t._resolvedData??{})},i&&vD(i)&&(r.resolve[xa]=i.title),r}var si=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[xa]}constructor(e,n,r,i,o,s,a,c,l){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=ai(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=ai(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},Ma=class extends pd{url;constructor(e,n){super(n),this.url=e,xm(this,n)}toString(){return _D(this._root)}};function xm(t,e){e.value._routerState=t,e.children.forEach(n=>xm(t,n))}function _D(t){let e=t.children.length>0?` { ${t.children.map(_D).join(", ")} } `:"";return`${t.value}${e}`}function ym(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,hn(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),hn(e.params,n.params)||t.paramsSubject.next(n.params),p1(e.url,n.url)||t.urlSubject.next(n.url),hn(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function Am(t,e){let n=hn(t.params,e.params)&&v1(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||Am(t.parent,e.parent))}function vD(t){return typeof t.title=="string"||t.title===null}var yD=new T(""),Oa=(()=>{class t{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=M;activateEvents=new je;deactivateEvents=new je;attachEvents=new je;detachEvents=new je;routerOutletData=Tb();parentContexts=g(ui);location=g(Fn);changeDetector=g(Ao);inputBinder=g(Pa,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(n){if(n.name){let{firstChange:r,previousValue:i}=n.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new D(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new D(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new D(4012,!1);this.location.detach();let n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){let n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new D(4013,!1);this._activatedRoute=n;let i=this.location,s=n.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new Rm(n,a,i.injector,this.routerOutletData);this.activated=i.createComponent(s,{index:i.length,injector:c,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||t)};static \u0275dir=Un({type:t,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[ei]})}return t})(),Rm=class{route;childContexts;parent;outletData;constructor(e,n,r,i){this.route=e,this.childContexts=n,this.parent=r,this.outletData=i}get(e,n){return e===mn?this.route:e===ui?this.childContexts:e===yD?this.outletData:this.parent.get(e,n)}},Pa=new T(""),Om=(()=>{class t{outletDataSubscriptions=new Map;bindActivatedRouteToOutletComponent(n){this.unsubscribeFromRouteData(n),this.subscribeToRouteData(n)}unsubscribeFromRouteData(n){this.outletDataSubscriptions.get(n)?.unsubscribe(),this.outletDataSubscriptions.delete(n)}subscribeToRouteData(n){let{activatedRoute:r}=n,i=Il([r.queryParams,r.params,r.data]).pipe(Ot(([o,s,a],c)=>(a=E(E(E({},o),s),a),c===0?O(a):Promise.resolve(a)))).subscribe(o=>{if(!n.isActivated||!n.activatedComponentRef||n.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(n);return}let s=Ab(r.component);if(!s){this.unsubscribeFromRouteData(n);return}for(let{templateName:a}of s.inputs)n.activatedComponentRef.setInput(a,o[a])});this.outletDataSubscriptions.set(n,i)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=w({token:t,factory:t.\u0275fac})}return t})(),Pm=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275cmp=Ee({type:t,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&Ye(0,"router-outlet")},dependencies:[Oa],encapsulation:2})}return t})();function Lm(t){let e=t.children&&t.children.map(Lm),n=e?re(E({},t),{children:e}):E({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==M&&(n.component=Pm),n}function H1(t,e,n){let r=ka(t,e._root,n?n._root:void 0);return new Na(r,e)}function ka(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let i=$1(t,e,n);return new dt(r,i)}else{if(t.shouldAttach(e.value)){let o=t.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>ka(t,a)),s}}let r=W1(e.value),i=e.children.map(o=>ka(t,o));return new dt(r,i)}}function $1(t,e,n){return e.children.map(r=>{for(let i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return ka(t,r,i);return ka(t,r)})}function W1(t){return new mn(new Le(t.url),new Le(t.params),new Le(t.queryParams),new Le(t.fragment),new Le(t.data),t.outlet,t.component,t)}var jo=class{redirectTo;navigationBehaviorOptions;constructor(e,n){this.redirectTo=e,this.navigationBehaviorOptions=n}},ED="ngNavigationCancelingError";function md(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=pr(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=ID(!1,Qe.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function ID(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[ED]=!0,n.cancellationCode=e,n}function z1(t){return CD(t)&&pr(t.url)}function CD(t){return!!t&&t[ED]}var G1=(t,e,n,r)=>de(i=>(new Nm(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)),Nm=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,n,r,i,o){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),ym(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let i=Mo(n);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,n,s.children)}else this.deactivateChildRoutes(e,n,r);else o&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=Mo(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=Mo(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let i=Mo(n);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new fd(o.value.snapshot))}),e.children.length&&this.forwardEvent(new ud(e.value.snapshot))}activateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(ym(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,s.children)}else this.activateChildRoutes(e,n,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),ym(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},_d=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Oo=class{component;route;constructor(e,n){this.component=e,this.route=n}};function q1(t,e,n){let r=t._root,i=e?e._root:null;return ba(r,i,n,[r.value])}function K1(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function Ho(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!Jh(t)?t:e.get(t):r}function ba(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=Mo(e);return t.children.forEach(s=>{Y1(s,o[s.value.outlet],n,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>Ta(a,n.getContext(s),i)),i}function Y1(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let c=Q1(s,o,o.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new _d(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?ba(t,e,a?a.children:null,r,i):ba(t,e,n,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Oo(a.outlet.component,s))}else s&&Ta(e,a,i),i.canActivateChecks.push(new _d(r)),o.component?ba(t,null,a?a.children:null,r,i):ba(t,null,n,r,i);return i}function Q1(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!oi(t.url,e.url);case"pathParamsOrQueryParamsChange":return!oi(t.url,e.url)||!hn(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Am(t,e)||!hn(t.queryParams,e.queryParams);case"paramsChange":default:return!Am(t,e)}}function Ta(t,e,n){let r=Mo(t),i=t.value;Object.entries(r).forEach(([o,s])=>{i.component?e?Ta(s,e.children.getContext(o),n):Ta(s,null,n):Ta(s,e,n)}),i.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new Oo(e.outlet.component,i)):n.canDeactivateChecks.push(new Oo(null,i)):n.canDeactivateChecks.push(new Oo(null,i))}function La(t){return typeof t=="function"}function Z1(t){return typeof t=="boolean"}function J1(t){return t&&La(t.canLoad)}function X1(t){return t&&La(t.canActivate)}function eL(t){return t&&La(t.canActivateChild)}function tL(t){return t&&La(t.canDeactivate)}function nL(t){return t&&La(t.canMatch)}function wD(t){return t instanceof kr||t?.name==="EmptyError"}var Qu=Symbol("INITIAL_VALUE");function Bo(){return Ot(t=>Il(t.map(e=>e.pipe(Rn(1),kh(Qu)))).pipe(de(e=>{for(let n of e)if(n!==!0){if(n===Qu)return Qu;if(n===!1||rL(n))return n}return!0}),_t(e=>e!==Qu),Rn(1)))}function rL(t){return pr(t)||t instanceof jo}function bD(t){return t.aborted?O(void 0).pipe(Rn(1)):new V(e=>{let n=()=>{e.next(),e.complete()};return t.addEventListener("abort",n),()=>t.removeEventListener("abort",n)})}function DD(t){return Os(bD(t))}function iL(t,e){return Fe(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return s.length===0&&o.length===0?O(re(E({},n),{guardsResult:!0})):oL(s,r,i,t).pipe(Fe(a=>a&&Z1(a)?sL(r,o,t,e):O(a)),de(a=>re(E({},n),{guardsResult:a})))})}function oL(t,e,n,r){return pe(t).pipe(Fe(i=>dL(i.component,i.route,n,e,r)),Nn(i=>i!==!0,!0))}function sL(t,e,n,r){return pe(e).pipe(no(i=>eo(cL(i.route.parent,r),aL(i.route,r),uL(t,i.path,n),lL(t,i.route,n))),Nn(i=>i!==!0,!0))}function aL(t,e){return t!==null&&e&&e(new dd(t)),O(!0)}function cL(t,e){return t!==null&&e&&e(new ld(t)),O(!0)}function lL(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return O(!0);let i=r.map(o=>xs(()=>{let s=Vo(e)??n,a=Ho(o,s),c=X1(a)?a.canActivate(e,t):Ce(s,()=>a(e,t));return ci(c).pipe(Nn())}));return O(i).pipe(Bo())}function uL(t,e,n){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>K1(s)).filter(s=>s!==null).map(s=>xs(()=>{let a=s.guards.map(c=>{let l=Vo(s.node)??n,u=Ho(c,l),d=eL(u)?u.canActivateChild(r,t):Ce(l,()=>u(r,t));return ci(d).pipe(Nn())});return O(a).pipe(Bo())}));return O(o).pipe(Bo())}function dL(t,e,n,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return O(!0);let s=o.map(a=>{let c=Vo(e)??i,l=Ho(a,c),u=tL(l)?l.canDeactivate(t,e,n,r):Ce(c,()=>l(t,e,n,r));return ci(u).pipe(Nn())});return O(s).pipe(Bo())}function fL(t,e,n,r,i){let o=e.canLoad;if(o===void 0||o.length===0)return O(!0);let s=o.map(a=>{let c=Ho(a,t),l=J1(c)?c.canLoad(e,n):Ce(t,()=>c(e,n)),u=ci(l);return i?u.pipe(DD(i)):u});return O(s).pipe(Bo(),TD(r))}function TD(t){return Ch(ze(e=>{if(typeof e!="boolean")throw md(t,e)}),de(e=>e===!0))}function hL(t,e,n,r,i){let o=e.canMatch;if(!o||o.length===0)return O(!0);let s=o.map(a=>{let c=Ho(a,t),l=nL(c)?c.canMatch(e,n):Ce(t,()=>c(e,n)),u=ci(l);return i?u.pipe(DD(i)):u});return O(s).pipe(Bo(),TD(r))}var ii=class SD extends Error{segmentGroup;constructor(e){super(),this.segmentGroup=e||null,Object.setPrototypeOf(this,SD.prototype)}},Mm=class AD extends Error{urlTree;constructor(e){super(),this.urlTree=e,Object.setPrototypeOf(this,AD.prototype)}};function pL(t){throw new D(4e3,!1)}function gL(t){throw ID(!1,Qe.GuardRejected)}var mL=class{urlSerializer;urlTree;constructor(e,n){this.urlSerializer=e,this.urlTree=n}async lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return r;if(i.numberOfChildren>1||!i.children[M])throw pL(`${e.redirectTo}`);i=i.children[M]}}async applyRedirectCommands(e,n,r,i,o){let s=await _L(n,i,o);if(s instanceof $t)throw new Mm(s);let a=this.applyRedirectCreateUrlTree(s,this.urlSerializer.parse(s),e,r);if(s[0]==="/")throw new Mm(a);return a}applyRedirectCreateUrlTree(e,n,r,i){let o=this.createSegmentGroup(e,n.root,r,i);return new $t(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=n[a]}else r[i]=o}),r}createSegmentGroup(e,n,r,i){let o=this.createSegments(e,n.segments,r,i),s={};return Object.entries(n.children).forEach(([a,c])=>{s[a]=this.createSegmentGroup(e,c,r,i)}),new Y(o,s)}createSegments(e,n,r,i){return n.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,n,r){let i=r[n.path.substring(1)];if(!i)throw new D(4001,!1);return i}findOrReturn(e,n){let r=0;for(let i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}};function _L(t,e,n){if(typeof t=="string")return Promise.resolve(t);let r=t,{queryParams:i,fragment:o,routeConfig:s,url:a,outlet:c,params:l,data:u,title:d}=e;return ed(ci(Ce(n,()=>r({params:l,data:u,queryParams:i,fragment:o,routeConfig:s,url:a,outlet:c,title:d}))))}var km={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function vL(t,e,n,r,i,o){let s=RD(t,e,n);return s.matched?(r=j1(e,r),hL(r,e,n,i,o).pipe(de(a=>a===!0?s:E({},km)))):O(s)}function RD(t,e,n){if(e.path==="**")return yL(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?E({},km):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(e.matcher||Xb)(n,t,e);if(!i)return E({},km);let o={};Object.entries(i.posParams??{}).forEach(([a,c])=>{o[a]=c.path});let s=i.consumed.length>0?E(E({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function yL(t){return{matched:!0,parameters:t.length>0?tD(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function Qb(t,e,n,r){return n.length>0&&CL(t,n,r)?{segmentGroup:new Y(e,IL(r,new Y(n,t.children))),slicedSegments:[]}:n.length===0&&wL(t,n,r)?{segmentGroup:new Y(t.segments,EL(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new Y(t.segments,t.children),slicedSegments:n}}function EL(t,e,n,r){let i={};for(let o of n)if(yd(t,e,o)&&!r[Ht(o)]){let s=new Y([],{});i[Ht(o)]=s}return E(E({},r),i)}function IL(t,e){let n={};n[M]=e;for(let r of t)if(r.path===""&&Ht(r)!==M){let i=new Y([],{});n[Ht(r)]=i}return n}function CL(t,e,n){return n.some(r=>yd(t,e,r)&&Ht(r)!==M)}function wL(t,e,n){return n.some(r=>yd(t,e,r))}function yd(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function bL(t,e,n){return e.length===0&&!t.children[n]}var DL=class{};async function TL(t,e,n,r,i,o,s="emptyOnly",a){return new AL(t,e,n,r,i,s,o,a).recognize()}var SL=31,AL=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;abortSignal;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,n,r,i,o,s,a,c){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.abortSignal=c,this.applyRedirects=new mL(this.urlSerializer,this.urlTree)}noMatchError(e){return new D(4002,`'${e.segmentGroup}'`)}async recognize(){let e=Qb(this.urlTree.root,[],[],this.config).segmentGroup,{children:n,rootSnapshot:r}=await this.match(e),i=new dt(r,n),o=new Ma("",i),s=dD(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}async match(e){let n=new si([],Object.freeze({}),Object.freeze(E({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),M,this.rootComponentType,null,{});try{return{children:await this.processSegmentGroup(this.injector,this.config,e,M,n),rootSnapshot:n}}catch(r){if(r instanceof Mm)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof ii?this.noMatchError(r):r}}async processSegmentGroup(e,n,r,i,o){if(r.segments.length===0&&r.hasChildren())return this.processChildren(e,n,r,o);let s=await this.processSegment(e,n,r,r.segments,i,!0,o);return s instanceof dt?[s]:[]}async processChildren(e,n,r,i){let o=[];for(let c of Object.keys(r.children))c==="primary"?o.unshift(c):o.push(c);let s=[];for(let c of o){let l=r.children[c],u=B1(n,c),d=await this.processSegmentGroup(e,u,l,c,i);s.push(...d)}let a=ND(s);return RL(a),a}async processSegment(e,n,r,i,o,s,a){for(let c of n)try{return await this.processSegmentAgainstRoute(c._injector??e,n,c,r,i,o,s,a)}catch(l){if(l instanceof ii||wD(l))continue;throw l}if(bL(r,i,o))return new DL;throw new ii(r)}async processSegmentAgainstRoute(e,n,r,i,o,s,a,c){if(Ht(r)!==s&&(s===M||!yd(i,o,r)))throw new ii(i);if(r.redirectTo===void 0)return this.matchSegmentAgainstRoute(e,i,r,o,s,c);if(this.allowRedirects&&a)return this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,o,s,c);throw new ii(i)}async expandSegmentAgainstRouteUsingRedirect(e,n,r,i,o,s,a){let{matched:c,parameters:l,consumedSegments:u,positionalParamSegments:d,remainingSegments:f}=RD(n,i,o);if(!c)throw new ii(n);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>SL&&(this.allowRedirects=!1));let h=new si(o,l,Object.freeze(E({},this.urlTree.queryParams)),this.urlTree.fragment,Zb(i),Ht(i),i.component??i._loadedComponent??null,i,Jb(i)),p=gd(h,a,this.paramsInheritanceStrategy);if(h.params=Object.freeze(p.params),h.data=Object.freeze(p.data),this.abortSignal.aborted)throw new Error(this.abortSignal.reason);let _=await this.applyRedirects.applyRedirectCommands(u,i.redirectTo,d,h,e),C=await this.applyRedirects.lineralizeSegments(i,_);return this.processSegment(e,r,n,C.concat(f),s,!1,a)}async matchSegmentAgainstRoute(e,n,r,i,o,s){if(this.abortSignal.aborted)throw new Error(this.abortSignal.reason);let a=await ed(vL(n,r,i,e,this.urlSerializer,this.abortSignal));if(r.path==="**"&&(n.children={}),!a?.matched)throw new ii(n);e=r._injector??e;let{routes:c}=await this.getChildConfig(e,r,i),l=r._loadedInjector??e,{parameters:u,consumedSegments:d,remainingSegments:f}=a,h=new si(d,u,Object.freeze(E({},this.urlTree.queryParams)),this.urlTree.fragment,Zb(r),Ht(r),r.component??r._loadedComponent??null,r,Jb(r)),p=gd(h,s,this.paramsInheritanceStrategy);h.params=Object.freeze(p.params),h.data=Object.freeze(p.data);let{segmentGroup:_,slicedSegments:C}=Qb(n,d,f,c);if(C.length===0&&_.hasChildren()){let _e=await this.processChildren(l,c,_,h);return new dt(h,_e)}if(c.length===0&&C.length===0)return new dt(h,[]);let S=Ht(r)===o,le=await this.processSegment(l,c,_,C,S?M:o,!0,h);return new dt(h,le instanceof dt?[le]:[])}async getChildConfig(e,n,r){if(n.children)return{routes:n.children,injector:e};if(n.loadChildren){if(n._loadedRoutes!==void 0)return{routes:n._loadedRoutes,injector:n._loadedInjector};if(this.abortSignal.aborted)throw new Error(this.abortSignal.reason);if(await ed(fL(e,n,r,this.urlSerializer,this.abortSignal))){let o=await this.configLoader.loadChildren(e,n);return n._loadedRoutes=o.routes,n._loadedInjector=o.injector,o}throw gL(n)}return{routes:[],injector:e}}};function RL(t){t.sort((e,n)=>e.value.outlet===M?-1:n.value.outlet===M?1:e.value.outlet.localeCompare(n.value.outlet))}function NL(t){let e=t.value.routeConfig;return e&&e.path===""}function ND(t){let e=[],n=new Set;for(let r of t){if(!NL(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):e.push(r)}for(let r of n){let i=ND(r.children);e.push(new dt(r.value,i))}return e.filter(r=>!n.has(r))}function Zb(t){return t.data||{}}function Jb(t){return t.resolve||{}}var ML=new T("",{factory:()=>TL});function kL(t,e,n,r,i,o,s){let a=t.get(ML);return Fe(c=>O(c).pipe(Ot(l=>a(t,e,n,r,l.extractedUrl,i,o,s)),de(({state:l,tree:u})=>re(E({},c),{targetSnapshot:l,urlAfterRedirects:u}))))}function xL(t,e){return Fe(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return O(n);let o=new Set(i.map(c=>c.route)),s=new Set;for(let c of o)if(!s.has(c))for(let l of MD(c))s.add(l);let a=0;return pe(s).pipe(no(c=>o.has(c)?OL(c,r,t,e):(c.data=gd(c,c.parent,t).resolve,O(void 0))),ze(()=>a++),Cl(1),Fe(c=>a===s.size?O(n):Xe))})}function MD(t){let e=t.children.map(n=>MD(n)).flat();return[t,...e]}function OL(t,e,n,r){let i=t.routeConfig,o=t._resolve;return i?.title!==void 0&&!vD(i)&&(o[xa]=i.title),xs(()=>(t.data=gd(t,t.parent,n).resolve,PL(o,t,e,r).pipe(de(s=>(t._resolvedData=s,t.data=E(E({},t.data),s),null)))))}function PL(t,e,n,r){let i=Cm(t);if(i.length===0)return O({});let o={};return pe(i).pipe(Fe(s=>LL(t[s],e,n,r).pipe(Nn(),ze(a=>{if(a instanceof jo)throw md(new Vn,a);o[s]=a}))),Cl(1),de(()=>o),to(s=>wD(s)?Xe:Rh(s)))}function LL(t,e,n,r){let i=Vo(e)??r,o=Ho(t,i),s=o.resolve?o.resolve(e,n):Ce(i,()=>o(e,n));return ci(s)}function Em(t){return Ot(e=>{let n=t(e);return n?pe(n).pipe(de(()=>e)):O(e)})}var Fm=(()=>{class t{buildTitle(n){let r,i=n.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===M);return r}getResolvedTitleForRoute(n){return n.data[xa]}static \u0275fac=function(r){return new(r||t)};static \u0275prov=w({token:t,factory:()=>g(kD),providedIn:"root"})}return t})(),kD=(()=>{class t extends Fm{title;constructor(n){super(),this.title=n}updateTitle(n){let r=this.buildTitle(n);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||t)(A(Wb))};static \u0275prov=w({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),mr=new T("",{factory:()=>({})}),di=new T(""),Ed=(()=>{class t{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=g(Kg);async loadComponent(n,r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return Promise.resolve(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=(async()=>{try{let o=await nD(Ce(n,()=>r.loadComponent())),s=await PD(OD(o));return this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=s,s}finally{this.componentLoaders.delete(r)}})();return this.componentLoaders.set(r,i),i}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Promise.resolve({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let i=(async()=>{try{let o=await xD(r,this.compiler,n,this.onLoadEndListener);return r._loadedRoutes=o.routes,r._loadedInjector=o.injector,o}finally{this.childrenLoaders.delete(r)}})();return this.childrenLoaders.set(r,i),i}static \u0275fac=function(r){return new(r||t)};static \u0275prov=w({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();async function xD(t,e,n,r){let i=await nD(Ce(n,()=>t.loadChildren())),o=await PD(OD(i)),s;o instanceof Au||Array.isArray(o)?s=o:s=await e.compileModuleAsync(o),r&&r(t);let a,c,l=!1;return Array.isArray(s)?(c=s,l=!0):(a=s.create(n).injector,c=a.get(di,[],{optional:!0,self:!0}).flat()),{routes:c.map(Lm),injector:a}}function FL(t){return t&&typeof t=="object"&&"default"in t}function OD(t){return FL(t)?t.default:t}async function PD(t){return t}var Id=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=w({token:t,factory:()=>g(UL),providedIn:"root"})}return t})(),UL=(()=>{class t{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}static \u0275fac=function(r){return new(r||t)};static \u0275prov=w({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Um=new T(""),jm=new T("");function LD(t,e,n){let r=t.get(jm),i=t.get(ge);if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(l=>setTimeout(l));let o,s=new Promise(l=>{o=l}),a=i.startViewTransition(()=>(o(),jL(t)));a.updateCallbackDone.catch(l=>{}),a.ready.catch(l=>{}),a.finished.catch(l=>{});let{onViewTransitionCreated:c}=r;return c&&Ce(t,()=>c({transition:a,from:e,to:n})),s}function jL(t){return new Promise(e=>{Tg({read:()=>setTimeout(e)},{injector:t})})}var BL=()=>{},Bm=new T(""),Cd=(()=>{class t{currentNavigation=ln(null,{equal:()=>!1});currentTransition=null;lastSuccessfulNavigation=ln(null);events=new Ae;transitionAbortWithErrorSubject=new Ae;configLoader=g(Ed);environmentInjector=g(ve);destroyRef=g(cn);urlSerializer=g(li);rootContexts=g(ui);location=g(fr);inputBindingEnabled=g(Pa,{optional:!0})!==null;titleStrategy=g(Fm);options=g(mr,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=g(Id);createViewTransition=g(Um,{optional:!0});navigationErrorHandler=g(Bm,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>O(void 0);rootComponentType=null;destroyed=!1;constructor(){let n=i=>this.events.next(new ad(i)),r=i=>this.events.next(new cd(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=n,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(n){let r=++this.navigationId;Tt(()=>{this.transitions?.next(re(E({},n),{extractedUrl:this.urlHandlingStrategy.extract(n.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,id:r}))})}setupNavigations(n){return this.transitions=new Le(null),this.transitions.pipe(_t(r=>r!==null),Ot(r=>{let i=!1,o=new AbortController;return O(r).pipe(Ot(s=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",Qe.SupersededByNewNavigation),Xe;this.currentTransition=r;let a=this.lastSuccessfulNavigation();this.currentNavigation.set({id:s.id,initialUrl:s.rawUrl,extractedUrl:s.extractedUrl,targetBrowserUrl:typeof s.extras.browserUrl=="string"?this.urlSerializer.parse(s.extras.browserUrl):s.extras.browserUrl,trigger:s.source,extras:s.extras,previousNavigation:a?re(E({},a),{previousNavigation:null}):null,abort:()=>o.abort()});let c=!n.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),l=s.extras.onSameUrlNavigation??n.onSameUrlNavigation;if(!c&&l!=="reload")return this.events.next(new gn(s.id,this.urlSerializer.serialize(s.rawUrl),"",Po.IgnoredSameUrlNavigation)),s.resolve(!1),Xe;if(this.urlHandlingStrategy.shouldProcessUrl(s.rawUrl))return O(s).pipe(Ot(u=>(this.events.next(new gr(u.id,this.urlSerializer.serialize(u.extractedUrl),u.source,u.restoredState)),u.id!==this.navigationId?Xe:Promise.resolve(u))),kL(this.environmentInjector,this.configLoader,this.rootComponentType,n.config,this.urlSerializer,this.paramsInheritanceStrategy,o.signal),ze(u=>{r.targetSnapshot=u.targetSnapshot,r.urlAfterRedirects=u.urlAfterRedirects,this.currentNavigation.update(f=>(f.finalUrl=u.urlAfterRedirects,f));let d=new Aa(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(d)}));if(c&&this.urlHandlingStrategy.shouldProcessUrl(s.currentRawUrl)){let{id:u,extractedUrl:d,source:f,restoredState:h,extras:p}=s,_=new gr(u,this.urlSerializer.serialize(d),f,h);this.events.next(_);let C=mD(this.rootComponentType).snapshot;return this.currentTransition=r=re(E({},s),{targetSnapshot:C,urlAfterRedirects:d,extras:re(E({},p),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.update(S=>(S.finalUrl=d,S)),O(r)}else return this.events.next(new gn(s.id,this.urlSerializer.serialize(s.extractedUrl),"",Po.IgnoredByUrlHandlingStrategy)),s.resolve(!1),Xe}),ze(s=>{let a=new rd(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}),de(s=>(this.currentTransition=r=re(E({},s),{guards:q1(s.targetSnapshot,s.currentSnapshot,this.rootContexts)}),r)),iL(this.environmentInjector,s=>this.events.next(s)),ze(s=>{if(r.guardsResult=s.guardsResult,s.guardsResult&&typeof s.guardsResult!="boolean")throw md(this.urlSerializer,s.guardsResult);let a=new id(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot,!!s.guardsResult);this.events.next(a)}),_t(s=>s.guardsResult?!0:(this.cancelNavigationTransition(s,"",Qe.GuardRejected),!1)),Em(s=>{if(s.guards.canActivateChecks.length!==0)return O(s).pipe(ze(a=>{let c=new od(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(c)}),Ot(a=>{let c=!1;return O(a).pipe(xL(this.paramsInheritanceStrategy,this.environmentInjector),ze({next:()=>c=!0,complete:()=>{c||this.cancelNavigationTransition(a,"",Qe.NoDataFromResolver)}}))}),ze(a=>{let c=new sd(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(c)}))}),Em(s=>{let a=l=>{let u=[];if(l.routeConfig?._loadedComponent)l.component=l.routeConfig?._loadedComponent;else if(l.routeConfig?.loadComponent){let d=Vo(l)??this.environmentInjector;u.push(this.configLoader.loadComponent(d,l.routeConfig).then(f=>{l.component=f}))}for(let d of l.children)u.push(...a(d));return u},c=a(s.targetSnapshot.root);return c.length===0?O(s):pe(Promise.all(c).then(()=>s))}),Em(()=>this.afterPreactivation()),Ot(()=>{let{currentSnapshot:s,targetSnapshot:a}=r,c=this.createViewTransition?.(this.environmentInjector,s.root,a.root);return c?pe(c).pipe(de(()=>r)):O(r)}),de(s=>{let a=H1(n.routeReuseStrategy,s.targetSnapshot,s.currentRouterState);return this.currentTransition=r=re(E({},s),{targetRouterState:a}),this.currentNavigation.update(c=>(c.targetRouterState=a,c)),r}),ze(()=>{this.events.next(new Ra)}),G1(this.rootContexts,n.routeReuseStrategy,s=>this.events.next(s),this.inputBindingEnabled),Rn(1),Os(bD(o.signal).pipe(_t(()=>!i&&!r.targetRouterState),ze(()=>{this.cancelNavigationTransition(r,o.signal.reason+"",Qe.Aborted)}))),ze({next:s=>{i=!0,this.currentNavigation.update(a=>(a.abort=BL,a)),this.lastSuccessfulNavigation.set(Tt(this.currentNavigation)),this.events.next(new ht(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects))),this.titleStrategy?.updateTitle(s.targetRouterState.snapshot),s.resolve(!0)},complete:()=>{i=!0}}),Os(this.transitionAbortWithErrorSubject.pipe(ze(s=>{throw s}))),Mh(()=>{o.abort(),i||this.cancelNavigationTransition(r,"",Qe.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation.set(null),this.currentTransition=null)}),to(s=>{if(this.destroyed)return r.resolve(!1),Xe;if(i=!0,CD(s))this.events.next(new pn(r.id,this.urlSerializer.serialize(r.extractedUrl),s.message,s.cancellationCode)),z1(s)?this.events.next(new Uo(s.url,s.navigationBehaviorOptions)):r.resolve(!1);else{let a=new Lo(r.id,this.urlSerializer.serialize(r.extractedUrl),s,r.targetSnapshot??void 0);try{let c=Ce(this.environmentInjector,()=>this.navigationErrorHandler?.(a));if(c instanceof jo){let{message:l,cancellationCode:u}=md(this.urlSerializer,c);this.events.next(new pn(r.id,this.urlSerializer.serialize(r.extractedUrl),l,u)),this.events.next(new Uo(c.redirectTo,c.navigationBehaviorOptions))}else throw this.events.next(a),s}catch(c){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(c)}}return Xe}))}))}cancelNavigationTransition(n,r,i){let o=new pn(n.id,this.urlSerializer.serialize(n.extractedUrl),r,i);this.events.next(o),n.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let n=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=Tt(this.currentNavigation),i=r?.targetBrowserUrl??r?.extractedUrl;return n.toString()!==i?.toString()&&!r?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||t)};static \u0275prov=w({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function VL(t){return t!==xo}var FD=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=w({token:t,factory:()=>g(HL),providedIn:"root"})}return t})(),vd=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},HL=(()=>{class t extends vd{static \u0275fac=(()=>{let n;return function(i){return(n||(n=sa(t)))(i||t)}})();static \u0275prov=w({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Vm=(()=>{class t{urlSerializer=g(li);options=g(mr,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=g(fr);urlHandlingStrategy=g(Id);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new $t;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:n,initialUrl:r,targetBrowserUrl:i}){let o=n!==void 0?this.urlHandlingStrategy.merge(n,r):r,s=i??o;return s instanceof $t?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:n,finalUrl:r,initialUrl:i}){r&&n?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=n):this.rawUrlTree=i}routerState=mD(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:n}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n??this.rawUrlTree)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=w({token:t,factory:()=>g(UD),providedIn:"root"})}return t})(),UD=(()=>{class t extends Vm{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(n){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{n(r.url,r.state,"popstate")})})}handleRouterEvent(n,r){n instanceof gr?this.updateStateMemento():n instanceof gn?this.commitTransition(r):n instanceof Aa?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):n instanceof Ra?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):n instanceof pn&&n.code!==Qe.SupersededByNewNavigation&&n.code!==Qe.Redirect?this.restoreHistory(r):n instanceof Lo?this.restoreHistory(r,!0):n instanceof ht&&(this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId)}setBrowserUrl(n,{extras:r,id:i}){let{replaceUrl:o,state:s}=r;if(this.location.isCurrentPathEqualTo(n)||o){let a=this.browserPageId,c=E(E({},s),this.generateNgRouterState(i,a));this.location.replaceState(n,"",c)}else{let a=E(E({},s),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(n,"",a)}}restoreHistory(n,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.getCurrentUrlTree()===n.finalUrl&&o===0&&(this.resetInternalState(n),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(n),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,r){return this.canceledNavigationResolution==="computed"?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}static \u0275fac=(()=>{let n;return function(i){return(n||(n=sa(t)))(i||t)}})();static \u0275prov=w({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function wd(t,e){t.events.pipe(_t(n=>n instanceof ht||n instanceof pn||n instanceof Lo||n instanceof gn),de(n=>n instanceof ht||n instanceof gn?0:(n instanceof pn?n.code===Qe.Redirect||n.code===Qe.SupersededByNewNavigation:!1)?2:1),_t(n=>n!==2),Rn(1)).subscribe(()=>{e()})}var $L={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},WL={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},_n=(()=>{class t{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=g(jg);stateManager=g(Vm);options=g(mr,{optional:!0})||{};pendingTasks=g(On);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=g(Cd);urlSerializer=g(li);location=g(fr);urlHandlingStrategy=g(Id);injector=g(ve);_events=new Ae;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=g(FD);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=g(di,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!g(Pa,{optional:!0});currentNavigation=this.navigationTransitions.currentNavigation.asReadonly();constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:n=>{this.console.warn(n)}}),this.subscribeToNavigationEvents()}eventsSubscription=new be;subscribeToNavigationEvents(){let n=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=Tt(this.navigationTransitions.currentNavigation);if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof pn&&r.code!==Qe.Redirect&&r.code!==Qe.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof ht)this.navigated=!0;else if(r instanceof Uo){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),c=E({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||VL(i.source)},s);this.scheduleNavigation(a,xo,null,c,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}U1(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortWithErrorSubject.next(i)}});this.eventsSubscription.add(n)}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),xo,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((n,r,i)=>{this.navigateToSyncWithBrowser(n,i,r)})}navigateToSyncWithBrowser(n,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let c=E({},i);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(o.state=c)}let a=this.parseUrl(n);this.scheduleNavigation(a,r,s,o).catch(c=>{this.disposed||this.injector.get(ut)(c)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return Tt(this.navigationTransitions.currentNavigation)}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(n){this.config=n.map(Lm),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription?.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0,this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(n,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:c}=r,l=c?this.currentUrlTree.fragment:s,u=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":u=E(E({},this.currentUrlTree.queryParams),o);break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=o||null}u!==null&&(u=this.removeEmptyProps(u));let d;try{let f=i?i.snapshot:this.routerState.snapshot.root;d=fD(f)}catch{(typeof n[0]!="string"||n[0][0]!=="/")&&(n=[]),d=this.currentUrlTree.root}return hD(d,n,u,l??null,this.urlSerializer)}navigateByUrl(n,r={skipLocationChange:!1}){let i=pr(n)?n:this.parseUrl(n),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,xo,null,r)}navigate(n,r={skipLocationChange:!1}){return zL(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){try{return this.urlSerializer.parse(n)}catch{return this.console.warn(nr(4018,!1)),this.urlSerializer.parse("/")}}isActive(n,r){let i;if(r===!0?i=E({},$L):r===!1?i=E({},WL):i=r,pr(n))return zb(this.currentUrlTree,n,i);let o=this.parseUrl(n);return zb(this.currentUrlTree,o,i)}removeEmptyProps(n){return Object.entries(n).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(n,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,c,l;s?(a=s.resolve,c=s.reject,l=s.promise):l=new Promise((d,f)=>{a=d,c=f});let u=this.pendingTasks.add();return wd(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(u))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:n,extras:o,resolve:a,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(d=>Promise.reject(d))}static \u0275fac=function(r){return new(r||t)};static \u0275prov=w({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function zL(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new D(4008,!1)}var $o=(()=>{class t{router;route;tabIndexAttribute;renderer;el;locationStrategy;reactiveHref=ln(null);get href(){return Tt(this.reactiveHref)}set href(n){this.reactiveHref.set(n)}target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new Ae;applicationErrorHandler=g(ut);options=g(mr,{optional:!0});constructor(n,r,i,o,s,a){this.router=n,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=s,this.locationStrategy=a,this.reactiveHref.set(g(new Lu("href"),{optional:!0}));let c=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement=c==="a"||c==="area"||!!(typeof customElements=="object"&&customElements.get(c)?.observedAttributes?.includes?.("href")),this.isAnchorElement&&(this.setTabIndexIfNotOnNativeEl("0"),this.subscribeToNavigationEventsIfNecessary())}subscribeToNavigationEventsIfNecessary(){this.subscription===void 0&&(this.subscription=this.router.events.subscribe(n=>{n instanceof ht&&this.updateHref()}))}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(n){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",n)}ngOnChanges(n){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}routerLinkInput=null;set routerLink(n){n==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(pr(n)?this.routerLinkInput=n:this.routerLinkInput=Array.isArray(n)?n:[n],this.setTabIndexIfNotOnNativeEl("0"))}onClick(n,r,i,o,s){let a=this.urlTree;if(a===null||this.isAnchorElement&&(n!==0||r||i||o||s||typeof this.target=="string"&&this.target!="_self"))return!0;let c={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,c)?.catch(l=>{this.applicationErrorHandler(l)}),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let n=this.urlTree;this.reactiveHref.set(n!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(n))??"":null)}applyAttributeValue(n,r){let i=this.renderer,o=this.el.nativeElement;r!==null?i.setAttribute(o,n,r):i.removeAttribute(o,n)}get urlTree(){return this.routerLinkInput===null?null:pr(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(r){return new(r||t)(Me(_n),Me(mn),aa("tabindex"),Me(Co),Me(fn),Me(Vt))};static \u0275dir=Un({type:t,selectors:[["","routerLink",""]],hostVars:2,hostBindings:function(r,i){r&1&&rt("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),r&2&&Nu("href",i.reactiveHref(),yg)("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",ma],skipLocationChange:[2,"skipLocationChange","skipLocationChange",ma],replaceUrl:[2,"replaceUrl","replaceUrl",ma],routerLink:"routerLink"},features:[ei]})}return t})(),$m=(()=>{class t{router;element;renderer;cdr;links;classes=[];routerEventsSubscription;linkInputChangesSubscription;_isActive=!1;get isActive(){return this._isActive}routerLinkActiveOptions={exact:!1};ariaCurrentWhenActive;isActiveChange=new je;link=g($o,{optional:!0});constructor(n,r,i,o){this.router=n,this.element=r,this.renderer=i,this.cdr=o,this.routerEventsSubscription=n.events.subscribe(s=>{s instanceof ht&&this.update()})}ngAfterContentInit(){O(this.links.changes,O(null)).pipe(Xn()).subscribe(n=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();let n=[...this.links.toArray(),this.link].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=pe(n).pipe(Xn()).subscribe(r=>{this._isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(n){let r=Array.isArray(n)?n:n.split(" ");this.classes=r.filter(i=>!!i)}ngOnChanges(n){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{let n=this.hasActiveLinks();this.classes.forEach(r=>{n?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),n&&this.ariaCurrentWhenActive!==void 0?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this._isActive!==n&&(this._isActive=n,this.cdr.markForCheck(),this.isActiveChange.emit(n))})}isLinkActive(n){let r=GL(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return i=>{let o=i.urlTree;return o?n.isActive(o,r):!1}}hasActiveLinks(){let n=this.isLinkActive(this.router);return this.link&&n(this.link)||this.links.some(n)}static \u0275fac=function(r){return new(r||t)(Me(_n),Me(fn),Me(Co),Me(Ao))};static \u0275dir=Un({type:t,selectors:[["","routerLinkActive",""]],contentQueries:function(r,i,o){if(r&1&&ku(o,$o,5),r&2){let s;zg(s=Gg())&&(i.links=s)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],features:[ei]})}return t})();function GL(t){return!!t.paths}var Fa=class{};var jD=(()=>{class t{router;injector;preloadingStrategy;loader;subscription;constructor(n,r,i,o){this.router=n,this.injector=r,this.preloadingStrategy=i,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(_t(n=>n instanceof ht),no(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription?.unsubscribe()}processRoutes(n,r){let i=[];for(let o of r){o.providers&&!o._injector&&(o._injector=wo(o.providers,n,""));let s=o._injector??n,a=o._loadedInjector??s;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&i.push(this.preloadConfig(s,o)),(o.children||o._loadedRoutes)&&i.push(this.processRoutes(a,o.children??o._loadedRoutes))}return pe(i).pipe(Xn())}preloadConfig(n,r){return this.preloadingStrategy.preload(r,()=>{let i;r.loadChildren&&r.canLoad===void 0?i=pe(this.loader.loadChildren(n,r)):i=O(null);let o=i.pipe(Fe(s=>s===null?O(void 0):(r._loadedRoutes=s.routes,r._loadedInjector=s.injector,this.processRoutes(s.injector??n,s.routes))));if(r.loadComponent&&!r._loadedComponent){let s=this.loader.loadComponent(n,r);return pe([o,s]).pipe(Xn())}else return o})}static \u0275fac=function(r){return new(r||t)(A(_n),A(ve),A(Fa),A(Ed))};static \u0275prov=w({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),BD=new T(""),qL=(()=>{class t{urlSerializer;transitions;viewportScroller;zone;options;routerEventsSubscription;scrollEventsSubscription;lastId=0;lastSource=xo;restoredId=0;store={};constructor(n,r,i,o,s={}){this.urlSerializer=n,this.transitions=r,this.viewportScroller=i,this.zone=o,this.options=s,s.scrollPositionRestoration||="disabled",s.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(n=>{n instanceof gr?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=n.navigationTrigger,this.restoredId=n.restoredState?n.restoredState.navigationId:0):n instanceof ht?(this.lastId=n.id,this.scheduleScrollEvent(n,this.urlSerializer.parse(n.urlAfterRedirects).fragment)):n instanceof gn&&n.code===Po.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(n,this.urlSerializer.parse(n.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(n=>{if(!(n instanceof Fo))return;let r={behavior:"instant"};n.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0],r):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(n.position,r):n.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(n.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0])})}scheduleScrollEvent(n,r){this.zone.runOutsideAngular(async()=>{await new Promise(i=>{setTimeout(i),typeof requestAnimationFrame<"u"&&requestAnimationFrame(i)}),this.zone.run(()=>{this.transitions.events.next(new Fo(n,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static \u0275fac=function(r){Lg()};static \u0275prov=w({token:t,factory:t.\u0275fac})}return t})();function Wm(t,...e){return yt([{provide:di,multi:!0,useValue:t},[],{provide:mn,useFactory:VD},{provide:da,multi:!0,useFactory:HD},e.map(n=>n.\u0275providers)])}function VD(){return g(_n).routerState.root}function Ua(t,e){return{\u0275kind:t,\u0275providers:e}}function HD(){let t=g(De);return e=>{let n=t.get(To);if(e!==n.components[0])return;let r=t.get(_n),i=t.get($D);t.get(zm)===1&&r.initialNavigation(),t.get(GD,null,{optional:!0})?.setUpPreloading(),t.get(BD,null,{optional:!0})?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var $D=new T("",{factory:()=>new Ae}),zm=new T("",{factory:()=>1});function WD(){let t=[{provide:mg,useValue:!0},{provide:zm,useValue:0},Ru(()=>{let e=g(De);return e.get(rm,Promise.resolve()).then(()=>new Promise(r=>{let i=e.get(_n),o=e.get($D);wd(i,()=>{r(!0)}),e.get(Cd).afterPreactivation=()=>(r(!0),o.closed?O(void 0):o),i.initialNavigation()}))})];return Ua(2,t)}function zD(){let t=[Ru(()=>{g(_n).setUpLocationChangeListener()}),{provide:zm,useValue:2}];return Ua(3,t)}var GD=new T("");function qD(t){return Ua(0,[{provide:GD,useExisting:jD},{provide:Fa,useExisting:t}])}function KD(){return Ua(8,[Om,{provide:Pa,useExisting:Om}])}function YD(t){Io("NgRouterViewTransitions");let e=[{provide:Um,useValue:LD},{provide:jm,useValue:E({skipNextTransition:!!t?.skipInitialTransition},t)}];return Ua(9,e)}var QD=[fr,{provide:li,useClass:Vn},_n,ui,{provide:mn,useFactory:VD},Ed,[]],Gm=(()=>{class t{constructor(){}static forRoot(n,r){return{ngModule:t,providers:[QD,[],{provide:di,multi:!0,useValue:n},[],r?.errorHandler?{provide:Bm,useValue:r.errorHandler}:[],{provide:mr,useValue:r||{}},r?.useHash?YL():QL(),KL(),r?.preloadingStrategy?qD(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?ZL(r):[],r?.bindToComponentInputs?KD().\u0275providers:[],r?.enableViewTransitions?YD().\u0275providers:[],JL()]}}static forChild(n){return{ngModule:t,providers:[{provide:di,multi:!0,useValue:n}]}}static \u0275fac=function(r){return new(r||t)};static \u0275mod=ri({type:t});static \u0275inj=rr({})}return t})();function KL(){return{provide:BD,useFactory:()=>{let t=g(Lb),e=g(fe),n=g(mr),r=g(Cd),i=g(li);return n.scrollOffset&&t.setOffset(n.scrollOffset),new qL(i,r,t,e,n)}}}function YL(){return{provide:Vt,useClass:im}}function QL(){return{provide:Vt,useClass:Bu}}function ZL(t){return[t.initialNavigation==="disabled"?zD().\u0275providers:[],t.initialNavigation==="enabledBlocking"?WD().\u0275providers:[]]}var Hm=new T("");function JL(){return[{provide:Hm,useFactory:HD},{provide:da,multi:!0,useExisting:Hm}]}var ZD={firebaseConfig:{apiKey:"AIzaSyAqm7ooUgqpyKCWH3fPM1yzyANdWmFsGH4",authDomain:"fir-mywebsite.firebaseapp.com",databaseURL:"https://fir-mywebsite-default-rtdb.firebaseio.com",projectId:"fir-mywebsite",storageBucket:"fir-mywebsite.appspot.com",messagingSenderId:"271679200792",appId:"1:271679200792:web:807031f3f43102c9a2ad6d",measurementId:"G-8JCVNF7W86"}};function eF(t,e){if(t&1&&Ye(0,"img",7),t&2){let n=e.$implicit,r=e.index,i=So();xu("active",r===i.currentIndex()),St("src",n,Eo)}}var bd=class t{images=["1.JPG","2.JPG","3.JPG","4.JPG","5.JPG","6.JPG","7.JPG","8.JPG","9.JPG","10.jpeg","11.jpeg","12.jpeg","13.jpeg","14.jpeg","15.jpeg","16.jpeg","17.jpeg","18.JPG","19.JPG","20.jpeg","21.JPG","22.jpeg","23.jpeg"];currentIndex=ln(0);intervalId;ngOnInit(){this.startTimer()}ngOnDestroy(){this.intervalId&&clearInterval(this.intervalId)}startTimer(){this.stopTimer(),this.intervalId=setInterval(()=>{this.nextSlide()},5e3)}stopTimer(){this.intervalId&&clearInterval(this.intervalId)}nextSlide(){this.currentIndex.update(e=>(e+1)%this.images.length),this.startTimer()}prevSlide(){this.currentIndex.update(e=>(e-1+this.images.length)%this.images.length),this.startTimer()}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Ee({type:t,selectors:[["app-home"]],decls:15,vars:1,consts:[[1,"hero"],[1,"slideshow"],["aria-label","Previous image",1,"nav-btn","prev",3,"click"],["aria-label","Next image",1,"nav-btn","next",3,"click"],["class","slide","alt","Wedding memory",3,"src","active",4,"ngFor","ngForOf"],[1,"welcome"],["href","https://forms.gle/LPuGLMBkjnshnFCg9","target","_blank"],["alt","Wedding memory",1,"slide",3,"src"]],template:function(n,r){n&1&&(F(0,"section",0)(1,"div",1)(2,"button",2),rt("click",function(){return r.prevSlide()}),m(3,"\u276E"),U(),F(4,"button",3),rt("click",function(){return r.nextSlide()}),m(5,"\u276F"),U(),bo(6,eF,1,3,"img",4),U(),F(7,"h2",5),m(8,"Welcome to Our Wedding!"),U(),F(9,"h4"),m(10,"We are so excited for you to join us on our big day. This website is a one-stop-shop for all of your wedding attendee needs."),U(),F(11,"h4"),m(12,"Feel free to share a memory or offer your congratulations to the happy couple below. The memory, after verification, will be placed on this website for all to see!"),U(),F(13,"a",6),m(14," Link to form to fill out congratulation message "),U()()),n&2&&(Ke(6),St("ngForOf",r.images))},dependencies:[No,$u],styles:['@charset "UTF-8";.hero[_ngcontent-%COMP%]{text-align:center;margin-top:2rem}a[_ngcontent-%COMP%]{text-decoration:none}.welcome[_ngcontent-%COMP%]{font-size:2.4rem;margin-bottom:2rem;font-weight:500;animation:_ngcontent-%COMP%_fadeInText 2s ease forwards}.slideshow[_ngcontent-%COMP%]{position:relative;width:80%;max-width:750px;height:500px;margin:0 auto;overflow:hidden;border-radius:20px;background:#1a1a1a}.slide[_ngcontent-%COMP%]{position:absolute;inset:0;width:100%;height:100%;object-fit:contain;opacity:0;transform:scale(1.05);transition:opacity 1.5s ease-in-out,transform 1.5s ease-in-out;z-index:1}.slide.active[_ngcontent-%COMP%]{opacity:1;transform:scale(1);z-index:2}.nav-btn[_ngcontent-%COMP%]{position:absolute;top:50%;transform:translateY(-50%);background:#fff3;color:#fff;border:none;font-size:2rem;padding:1rem;cursor:pointer;z-index:10;transition:background .3s ease;border-radius:50%;width:50px;height:50px;display:flex;align-items:center;justify-content:center}.nav-btn[_ngcontent-%COMP%]:hover{background:#ffffff80}.prev[_ngcontent-%COMP%]{left:15px}.next[_ngcontent-%COMP%]{right:15px}@keyframes _ngcontent-%COMP%_fadeInText{0%{opacity:0;transform:translateY(15px)}to{opacity:1;transform:translateY(0)}}@media(max-width:768px){.slideshow[_ngcontent-%COMP%]{width:95%;height:280px;border-radius:14px}.welcome[_ngcontent-%COMP%]{font-size:1.8rem}}']})};var Dd=class t{static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Ee({type:t,selectors:[["app-event-info"]],decls:38,vars:0,template:function(n,r){n&1&&(b(0,"h2"),m(1,"Event Information"),y(),b(2,"ul")(3,"li")(4,"strong"),m(5,"Date"),y()(),b(6,"li"),m(7,"Saturday, August 22nd, 2026"),y(),H(8,"br"),b(9,"li")(10,"strong"),m(11,"Time"),y()(),b(12,"li"),m(13,"Cocktail hour begins at 5:00 PM"),y(),b(14,"li"),m(15,"Ceremony begins at 6:00 PM"),y(),H(16,"br"),b(17,"li")(18,"strong"),m(19,"Location"),y()(),b(20,"li"),m(21,"4503 Progress Blvd, Louisville, KY 40218 "),y(),b(22,"li"),m(23,"This address will lead to the front, and only, entrance to the park. Attendants will be available to direct traffic and ensure guests arrive at the ceremony location."),y(),H(24,"br"),b(25,"li")(26,"strong"),m(27,"Dress Code"),y()(),b(28,"li"),m(29,"We encourage all guests to wear semi-formal attire in the following colors. Florals, sundresses, and colorful ties are welcomed. Dress comfortably for the weather."),y(),H(30,"br"),b(31,"li")(32,"strong"),m(33,"Other"),y()(),b(34,"li"),m(35,"The ceremony location will be outside and require guests to walk a short distance on a tended lawn. Please keep this in mind when choosing footwear."),y(),b(36,"li"),m(37,"Those who wear white will deal with Leah's wrath "),y()())},styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;align-items:center;text-align:center}h2[_ngcontent-%COMP%]{margin-bottom:5px}ul[_ngcontent-%COMP%]{list-style:none;padding:0}li[_ngcontent-%COMP%]{margin-bottom:10px}"]})};var Td=class t{static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Ee({type:t,selectors:[["app-rsvp"]],decls:5,vars:0,consts:[["href","tbd","target","_blank"]],template:function(n,r){n&1&&(H(0,"br"),b(1,"h4"),m(2,"We are so excited for you to join us on your special day. Please fill out the following survey to secure your spot! "),y(),b(3,"a",0),m(4," TBD "),y())},styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;align-items:center;text-align:center}a[_ngcontent-%COMP%]{margin-top:2rem}ul[_ngcontent-%COMP%]{list-style:none;padding:0}li[_ngcontent-%COMP%]{margin-bottom:10px}"]})};var Sd=class t{static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Ee({type:t,selectors:[["app-registry"]],decls:20,vars:0,consts:[["href","#"]],template:function(n,r){n&1&&(b(0,"table")(1,"tr")(2,"th"),m(3,"#"),y(),b(4,"th"),m(5,"Item"),y(),b(6,"th"),m(7,"Description"),y(),b(8,"th"),m(9,"Link"),y()(),b(10,"tr")(11,"td"),m(12,"1"),y(),b(13,"td"),m(14,"Mixer with Wi-Fi"),y(),b(15,"td"),m(16,"TBD"),y(),b(17,"td")(18,"a",0),m(19,"TBD Link"),y()()()())},styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;align-items:center;text-align:center}table[_ngcontent-%COMP%]{border-collapse:collapse;width:100%;max-width:600px;margin:20px 0}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{border:1px solid #ddd;padding:8px;text-align:left}th[_ngcontent-%COMP%]{background-color:#f2f2f2}"]})};var JD=()=>{};var Km={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};var v=function(t,e){if(!t)throw fi(e)},fi=function(t){return new Error("Firebase Database ("+Km.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};var tT=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},tF=function(t){let e=[],n=0,r=0;for(;n<t.length;){let i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=t[n++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=t[n++],s=t[n++],a=t[n++],c=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{let o=t[n++],s=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},Go={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){let o=t[i],s=i+1<t.length,a=s?t[i+1]:0,c=i+2<t.length,l=c?t[i+2]:0,u=o>>2,d=(o&3)<<4|a>>4,f=(a&15)<<2|l>>6,h=l&63;c||(h=64,s||(f=64)),r.push(n[u],n[d],n[f],n[h])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(tT(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):tF(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();let n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){let o=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;let l=i<t.length?n[t.charAt(i)]:64;++i;let d=i<t.length?n[t.charAt(i)]:64;if(++i,o==null||a==null||l==null||d==null)throw new Ym;let f=o<<2|a>>4;if(r.push(f),l!==64){let h=a<<4&240|l>>2;if(r.push(h),d!==64){let p=l<<6&192|d;r.push(p)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},Ym=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},Zm=function(t){let e=tT(t);return Go.encodeByteArray(e,!0)},Ba=function(t){return Zm(t).replace(/\./g,"")},Wo=function(t){try{return Go.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function nT(t){return rT(void 0,t)}function rT(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:let n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(let n in e)!e.hasOwnProperty(n)||!nF(n)||(t[n]=rT(t[n],e[n]));return t}function nF(t){return t!=="__proto__"}function iT(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var rF=()=>iT().__FIREBASE_DEFAULTS__,iF=()=>{if(typeof process>"u"||typeof process.env>"u")return;let t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},oF=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=t&&Wo(t[1]);return e&&JSON.parse(e)},Jm=()=>{try{return JD()||rF()||iF()||oF()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},oT=t=>{var e,n;return(n=(e=Jm())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},sT=t=>{let e=oT(t);if(!e)return;let n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Xm=()=>{var t;return(t=Jm())===null||t===void 0?void 0:t.config},aT=t=>{var e;return(e=Jm())===null||e===void 0?void 0:e[`_${t}`]};var Wt=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};function hi(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function e_(t){return(await fetch(t,{credentials:"include"})).ok}function cT(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Ba(JSON.stringify(n)),Ba(JSON.stringify(s)),""].join(".")}var ja={};function sF(){let t={prod:[],emulator:[]};for(let e of Object.keys(ja))ja[e]?t.emulator.push(e):t.prod.push(e);return t}function aF(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}var XD=!1;function t_(t,e){if(typeof window>"u"||typeof document>"u"||!hi(window.location.host)||ja[t]===e||ja[t]||XD)return;ja[t]=e;function n(f){return`__firebase__banner__${f}`}let r="__firebase__banner",o=sF().prod.length>0;function s(){let f=document.getElementById(r);f&&f.remove()}function a(f){f.style.display="flex",f.style.background="#7faaf0",f.style.position="fixed",f.style.bottom="5px",f.style.left="5px",f.style.padding=".5em",f.style.borderRadius="5px",f.style.alignItems="center"}function c(f,h){f.setAttribute("width","24"),f.setAttribute("id",h),f.setAttribute("height","24"),f.setAttribute("viewBox","0 0 24 24"),f.setAttribute("fill","none"),f.style.marginLeft="-6px"}function l(){let f=document.createElement("span");return f.style.cursor="pointer",f.style.marginLeft="16px",f.style.fontSize="24px",f.innerHTML=" &times;",f.onclick=()=>{XD=!0,s()},f}function u(f,h){f.setAttribute("id",h),f.innerText="Learn more",f.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",f.setAttribute("target","__blank"),f.style.paddingLeft="5px",f.style.textDecoration="underline"}function d(){let f=aF(r),h=n("text"),p=document.getElementById(h)||document.createElement("span"),_=n("learnmore"),C=document.getElementById(_)||document.createElement("a"),S=n("preprendIcon"),le=document.getElementById(S)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(f.created){let _e=f.element;a(_e),u(C,_);let tn=l();c(le,S),_e.append(le,p,C,tn),document.body.appendChild(_e)}o?(p.innerText="Preview backend disconnected.",le.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(le.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,p.innerText="Preview backend running in this workspace."),p.setAttribute("id",h)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",d):d()}function Gt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Va(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Gt())}function lT(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function uT(){let t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Rd(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function yn(){return Km.NODE_CLIENT===!0||Km.NODE_ADMIN===!0}function Nd(){try{return typeof indexedDB=="object"}catch{return!1}}function dT(){return new Promise((t,e)=>{try{let n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){e(n)}})}var cF="FirebaseError",vn=class t extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=cF,Object.setPrototypeOf(this,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,zt.prototype.create)}},zt=class{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){let r=n[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?lF(o,r):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new vn(i,a,r)}};function lF(t,e){return t.replace(uF,(n,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var uF=/\{\$([^}]+)}/g;function zo(t){return JSON.parse(t)}function we(t){return JSON.stringify(t)}var fT=function(t){let e={},n={},r={},i="";try{let o=t.split(".");e=zo(Wo(o[0])||""),n=zo(Wo(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:i}};var hT=function(t){let e=fT(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},pT=function(t){let e=fT(t).claims;return typeof e=="object"&&e.admin===!0};function En(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function pi(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function Md(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Ha(t,e,n){let r={};for(let i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function gi(t,e){if(t===e)return!0;let n=Object.keys(t),r=Object.keys(e);for(let i of n){if(!r.includes(i))return!1;let o=t[i],s=e[i];if(eT(o)&&eT(s)){if(!gi(o,s))return!1}else if(o!==s)return!1}for(let i of r)if(!n.includes(i))return!1;return!0}function eT(t){return t!==null&&typeof t=="object"}function $a(t){let e=[];for(let[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}var Ad=class{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);let r=this.W_;if(typeof e=="string")for(let d=0;d<16;d++)r[d]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let d=0;d<16;d++)r[d]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let d=16;d<80;d++){let f=r[d-3]^r[d-8]^r[d-14]^r[d-16];r[d]=(f<<1|f>>>31)&4294967295}let i=this.chain_[0],o=this.chain_[1],s=this.chain_[2],a=this.chain_[3],c=this.chain_[4],l,u;for(let d=0;d<80;d++){d<40?d<20?(l=a^o&(s^a),u=1518500249):(l=o^s^a,u=1859775393):d<60?(l=o&s|a&(o|s),u=2400959708):(l=o^s^a,u=3395469782);let f=(i<<5|i>>>27)+l+c+u+r[d]&4294967295;c=a,a=s,s=(o<<30|o>>>2)&4294967295,o=i,i=f}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+o&4294967295,this.chain_[2]=this.chain_[2]+s&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);let r=n-this.blockSize,i=0,o=this.buf_,s=this.inbuf_;for(;i<n;){if(s===0)for(;i<=r;)this.compress_(e,i),i+=this.blockSize;if(typeof e=="string"){for(;i<n;)if(o[s]=e.charCodeAt(i),++s,++i,s===this.blockSize){this.compress_(o),s=0;break}}else for(;i<n;)if(o[s]=e[i],++s,++i,s===this.blockSize){this.compress_(o),s=0;break}}this.inbuf_=s,this.total_+=n}digest(){let e=[],n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let o=24;o>=0;o-=8)e[r]=this.chain_[i]>>o&255,++r;return e}};function gT(t,e){let n=new Qm(t,e);return n.subscribe.bind(n)}var Qm=class{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");dF(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=qm),i.error===void 0&&(i.error=qm),i.complete===void 0&&(i.complete=qm);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function dF(t,e){if(typeof t!="object"||t===null)return!1;for(let n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function qm(){}function kd(t,e){return`${t} failed: ${e} argument `}var mT=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);if(i>=55296&&i<=56319){let o=i-55296;r++,v(r<t.length,"Surrogate pair missing trail surrogate.");let s=t.charCodeAt(r)-56320;i=65536+(o<<10)+s}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},Wa=function(t){let e=0;for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};var Wte=14400*1e3;function pt(t){return t&&t._delegate?t._delegate:t}var Ze=class{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var mi="[DEFAULT]";var xd=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){let r=new Wt;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(hF(e))try{this.getOrInitializeService({instanceIdentifier:mi})}catch{}for(let[n,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(n);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=mi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){let e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=mi){return this.instances.has(e)}getOptions(e=mi){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(let[o,s]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(o);r===a&&s.resolve(i)}return i}onInit(e,n){var r;let i=this.normalizeInstanceIdentifier(n),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);let s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){let r=this.onInitCallbacks.get(n);if(r)for(let i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:fF(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=mi){return this.component?this.component.multipleInstances?e:mi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function fF(t){return t===mi?void 0:t}function hF(t){return t.instantiationMode==="EAGER"}var za=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let n=new xd(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}};var pF=[],te=(function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t})(te||{}),gF={debug:te.DEBUG,verbose:te.VERBOSE,info:te.INFO,warn:te.WARN,error:te.ERROR,silent:te.SILENT},mF=te.INFO,_F={[te.DEBUG]:"log",[te.VERBOSE]:"log",[te.INFO]:"info",[te.WARN]:"warn",[te.ERROR]:"error"},vF=(t,e,...n)=>{if(e<t.logLevel)return;let r=new Date().toISOString(),i=_F[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},In=class{constructor(e){this.name=e,this._logLevel=mF,this._logHandler=vF,this._userLogHandler=null,pF.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in te))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?gF[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,te.DEBUG,...e),this._logHandler(this,te.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,te.VERBOSE,...e),this._logHandler(this,te.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,te.INFO,...e),this._logHandler(this,te.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,te.WARN,...e),this._logHandler(this,te.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,te.ERROR,...e),this._logHandler(this,te.ERROR,...e)}};var yF=(t,e)=>e.some(n=>t instanceof n),_T,vT;function EF(){return _T||(_T=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function IF(){return vT||(vT=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var yT=new WeakMap,r_=new WeakMap,ET=new WeakMap,n_=new WeakMap,o_=new WeakMap;function CF(t){let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("success",o),t.removeEventListener("error",s)},o=()=>{n(Cn(t.result)),i()},s=()=>{r(t.error),i()};t.addEventListener("success",o),t.addEventListener("error",s)});return e.then(n=>{n instanceof IDBCursor&&yT.set(n,t)}).catch(()=>{}),o_.set(e,t),e}function wF(t){if(r_.has(t))return;let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",s),t.removeEventListener("abort",s)},o=()=>{n(),i()},s=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",o),t.addEventListener("error",s),t.addEventListener("abort",s)});r_.set(t,e)}var i_={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return r_.get(t);if(e==="objectStoreNames")return t.objectStoreNames||ET.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Cn(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function IT(t){i_=t(i_)}function bF(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){let r=t.call(Od(this),e,...n);return ET.set(r,e.sort?e.sort():[e]),Cn(r)}:IF().includes(t)?function(...e){return t.apply(Od(this),e),Cn(yT.get(this))}:function(...e){return Cn(t.apply(Od(this),e))}}function DF(t){return typeof t=="function"?bF(t):(t instanceof IDBTransaction&&wF(t),yF(t,EF())?new Proxy(t,i_):t)}function Cn(t){if(t instanceof IDBRequest)return CF(t);if(n_.has(t))return n_.get(t);let e=DF(t);return e!==t&&(n_.set(t,e),o_.set(e,t)),e}var Od=t=>o_.get(t);function Pd(t,e,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(t,e),a=Cn(s);return r&&s.addEventListener("upgradeneeded",c=>{r(Cn(s.result),c.oldVersion,c.newVersion,Cn(s.transaction),c)}),n&&s.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),a.then(c=>{o&&c.addEventListener("close",()=>o()),i&&c.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}var TF=["get","getKey","getAll","getAllKeys","count"],SF=["put","add","delete","clear"],s_=new Map;function CT(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(s_.get(e))return s_.get(e);let n=e.replace(/FromIndex$/,""),r=e!==n,i=SF.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||TF.includes(n)))return;let o=async function(s,...a){let c=this.transaction(s,i?"readwrite":"readonly"),l=c.store;return r&&(l=l.index(a.shift())),(await Promise.all([l[n](...a),i&&c.done]))[0]};return s_.set(e,o),o}IT(t=>re(E({},t),{get:(e,n,r)=>CT(e,n)||t.get(e,n,r),has:(e,n)=>!!CT(e,n)||t.has(e,n)}));var c_=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(AF(n)){let r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}};function AF(t){let e=t.getComponent();return e?.type==="VERSION"}var l_="@firebase/app",wT="0.13.2";var Hn=new In("@firebase/app"),RF="@firebase/app-compat",NF="@firebase/analytics-compat",MF="@firebase/analytics",kF="@firebase/app-check-compat",xF="@firebase/app-check",OF="@firebase/auth",PF="@firebase/auth-compat",LF="@firebase/database",FF="@firebase/data-connect",UF="@firebase/database-compat",jF="@firebase/functions",BF="@firebase/functions-compat",VF="@firebase/installations",HF="@firebase/installations-compat",$F="@firebase/messaging",WF="@firebase/messaging-compat",zF="@firebase/performance",GF="@firebase/performance-compat",qF="@firebase/remote-config",KF="@firebase/remote-config-compat",YF="@firebase/storage",QF="@firebase/storage-compat",ZF="@firebase/firestore",JF="@firebase/ai",XF="@firebase/firestore-compat",eU="firebase",tU="11.10.0";var u_="[DEFAULT]",nU={[l_]:"fire-core",[RF]:"fire-core-compat",[MF]:"fire-analytics",[NF]:"fire-analytics-compat",[xF]:"fire-app-check",[kF]:"fire-app-check-compat",[OF]:"fire-auth",[PF]:"fire-auth-compat",[LF]:"fire-rtdb",[FF]:"fire-data-connect",[UF]:"fire-rtdb-compat",[jF]:"fire-fn",[BF]:"fire-fn-compat",[VF]:"fire-iid",[HF]:"fire-iid-compat",[$F]:"fire-fcm",[WF]:"fire-fcm-compat",[zF]:"fire-perf",[GF]:"fire-perf-compat",[qF]:"fire-rc",[KF]:"fire-rc-compat",[YF]:"fire-gcs",[QF]:"fire-gcs-compat",[ZF]:"fire-fst",[XF]:"fire-fst-compat",[JF]:"fire-vertex","fire-js":"fire-js",[eU]:"fire-js-all"};var Ga=new Map,rU=new Map,d_=new Map;function bT(t,e){try{t.container.addComponent(e)}catch(n){Hn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function qt(t){let e=t.name;if(d_.has(e))return Hn.debug(`There were multiple attempts to register component ${e}.`),!1;d_.set(e,t);for(let n of Ga.values())bT(n,t);for(let n of rU.values())bT(n,t);return!0}function Ld(t,e){let n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function $n(t){return t==null?!1:t.settings!==void 0}var iU={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},_r=new zt("app","Firebase",iU);var f_=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ze("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw _r.create("app-deleted",{appName:this._name})}};var qo=tU;function g_(t,e={}){let n=t;typeof e!="object"&&(e={name:e});let r=Object.assign({name:u_,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw _r.create("bad-app-name",{appName:String(i)});if(n||(n=Xm()),!n)throw _r.create("no-options");let o=Ga.get(i);if(o){if(gi(n,o.options)&&gi(r,o.config))return o;throw _r.create("duplicate-app",{appName:i})}let s=new za(i);for(let c of d_.values())s.addComponent(c);let a=new f_(n,r,s);return Ga.set(i,a),a}function Ko(t=u_){let e=Ga.get(t);if(!e&&t===u_&&Xm())return g_();if(!e)throw _r.create("no-app",{appName:t});return e}function Fd(){return Array.from(Ga.values())}function Ie(t,e,n){var r;let i=(r=nU[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);let o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){let a=[`Unable to register library "${i}" with version "${e}":`];o&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Hn.warn(a.join(" "));return}qt(new Ze(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var oU="firebase-heartbeat-database",sU=1,qa="firebase-heartbeat-store",a_=null;function AT(){return a_||(a_=Pd(oU,sU,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(qa)}catch(n){console.warn(n)}}}}).catch(t=>{throw _r.create("idb-open",{originalErrorMessage:t.message})})),a_}async function aU(t){try{let n=(await AT()).transaction(qa),r=await n.objectStore(qa).get(RT(t));return await n.done,r}catch(e){if(e instanceof vn)Hn.warn(e.message);else{let n=_r.create("idb-get",{originalErrorMessage:e?.message});Hn.warn(n.message)}}}async function DT(t,e){try{let r=(await AT()).transaction(qa,"readwrite");await r.objectStore(qa).put(e,RT(t)),await r.done}catch(n){if(n instanceof vn)Hn.warn(n.message);else{let r=_r.create("idb-set",{originalErrorMessage:n?.message});Hn.warn(r.message)}}}function RT(t){return`${t.name}!${t.options.appId}`}var cU=1024,lU=30,h_=class{constructor(e){this.container=e,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new p_(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=TT();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats.length>lU){let s=dU(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Hn.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let n=TT(),{heartbeatsToSend:r,unsentEntries:i}=uU(this._heartbeatsCache.heartbeats),o=Ba(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return Hn.warn(n),""}}};function TT(){return new Date().toISOString().substring(0,10)}function uU(t,e=cU){let n=[],r=t.slice();for(let i of t){let o=n.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),ST(n)>e){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),ST(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var p_=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Nd()?dT().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){let n=await aU(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){let i=await this.read();return DT(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){let i=await this.read();return DT(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}};function ST(t){return Ba(JSON.stringify({version:2,heartbeats:t})).length}function dU(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}function fU(t){qt(new Ze("platform-logger",e=>new c_(e),"PRIVATE")),qt(new Ze("heartbeat",e=>new h_(e),"PRIVATE")),Ie(l_,wT,t),Ie(l_,wT,"esm2017"),Ie("fire-js","")}fU("");var hU="firebase",pU="11.10.0";Ie(hU,pU,"app");function NT(t){t===void 0&&(t=g(De));let e=t.get(fo);return n=>new V(r=>{let i=e.add(),o=!1;function s(){o||(i(),o=!0)}let a=n.subscribe({next:c=>{r.next(c),s()},complete:()=>{r.complete(),s()},error:c=>{r.error(c),s()}});return a.add(()=>{r.unsubscribe(),s()}),a})}var vi=new Or("ANGULARFIRE2_VERSION");function jd(t,e,n){if(e){if(e.length===1)return e[0];let o=e.filter(s=>s.app===n);if(o.length===1)return o[0]}return n.container.getProvider(t).getImmediate({optional:!0})}var Qo=(t,e)=>{let n=e?[e]:Fd(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},Yo=(function(t){return t[t.SILENT=0]="SILENT",t[t.WARN=1]="WARN",t[t.VERBOSE=2]="VERBOSE",t})(Yo||{}),MT=em()&&typeof Zone<"u"?Yo.WARN:Yo.SILENT;var Ud=class{zone;delegate;constructor(e,n=Sh){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){let i=this.zone,o=function(s){i?i.runGuarded(()=>{e.apply(this,[s])}):e.apply(this,[s])};return this.delegate.schedule(o,n,r)}},yi=(()=>{class t{outsideAngular;insideAngular;constructor(){let n=g(fe);this.outsideAngular=n.runOutsideAngular(()=>new Ud(typeof Zone>"u"?void 0:Zone.current)),this.insideAngular=n.run(()=>new Ud(typeof Zone>"u"?void 0:Zone.current,Th))}static \u0275fac=function(r){return new(r||t)};static \u0275prov=w({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),kT=!1;function gU(t,e){!kT&&(MT>Yo.SILENT||em())&&(kT=!0,console.warn("Calling Firebase APIs outside of an Injection context may destabilize your application leading to subtle change-detection and hydration bugs. Find more at https://github.com/angular/angularfire/blob/main/docs/zones.md")),MT>=e&&console.warn(`Firebase API called outside injection context: ${t.name}`)}function mU(t){let e=g(fe,{optional:!0});return e?e.runOutsideAngular(()=>t()):t()}function _i(t){let e=g(fe,{optional:!0});return e?e.run(()=>t()):t()}var _U=(t,e,n)=>(...r)=>(e&&setTimeout(e,0),Ce(n,()=>_i(()=>t.apply(void 0,r)))),wn=(t,e,n)=>(n||=e?Yo.WARN:Yo.VERBOSE,function(){let r,i=arguments,o,s,a;try{o=g(yi),s=g(fo),a=g(ve)}catch{return gU(t,n),t.apply(this,i)}for(let l=0;l<arguments.length;l++)typeof i[l]=="function"&&(e&&(r||=_i(()=>s.add())),i[l]=_U(i[l],r,a));let c=mU(()=>t.apply(this,i));return e?c instanceof V?c.pipe(Jn(o.outsideAngular),Zn(o.insideAngular),NT(a)):c instanceof Promise?_i(()=>{let l=s.add();return new Promise((u,d)=>{c.then(f=>Ce(a,()=>_i(()=>u(f))),f=>Ce(a,()=>_i(()=>d(f)))).finally(l)})}):typeof c=="function"&&r?function(){return setTimeout(r,0),c.apply(this,arguments)}:_i(()=>c):c instanceof V?c.pipe(Jn(o.outsideAngular),Zn(o.insideAngular)):_i(()=>c)});var Ei=class{constructor(e){return e}},Ka=class{constructor(){return Fd()}};function vU(t){return t&&t.length===1?t[0]:new Ei(Ko())}var m_=new T("angularfire2._apps"),yU={provide:Ei,useFactory:vU,deps:[[new Pn,m_]]},EU={provide:Ka,deps:[[new Pn,m_]]};function IU(t){return(e,n)=>{let r=n.get(ti);Ie("angularfire",vi.full,"core"),Ie("angularfire",vi.full,"app"),Ie("angular",Yh.full,r.toString());let i=e.runOutsideAngular(()=>t(n));return new Ei(i)}}function xT(t,...e){return yt([yU,EU,{provide:m_,useFactory:IU(t),multi:!0,deps:[fe,De,yi,...e]}])}var OT=wn(g_,!0);var CU=new Map,wU={activated:!1,tokenObservers:[]},bU={initialized:!1,enabled:!1};function Kt(t){return CU.get(t)||Object.assign({},wU)}function UT(){return bU}var DU="https://content-firebaseappcheck.googleapis.com/v1";var TU="exchangeDebugToken",PT={OFFSET_DURATION:300*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:960*1e3},Wne=1440*60*1e3;var y_=class{constructor(e,n,r,i,o){if(this.operation=e,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(e){this.stop();try{this.pending=new Wt,this.pending.promise.catch(n=>{}),await SU(this.getNextRun(e)),this.pending.resolve(),await this.pending.promise,this.pending=new Wt,this.pending.promise.catch(n=>{}),await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}};function SU(t){return new Promise(e=>{setTimeout(e,t)})}var AU={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},vr=new zt("appCheck","AppCheck",AU);function jT(t){if(!Kt(t).activated)throw vr.create("use-before-activation",{appName:t.name})}async function BT({url:t,body:e},n){let r={"Content-Type":"application/json"},i=n.getImmediate({optional:!0});if(i){let d=await i.getHeartbeatsHeader();d&&(r["X-Firebase-Client"]=d)}let o={method:"POST",body:JSON.stringify(e),headers:r},s;try{s=await fetch(t,o)}catch(d){throw vr.create("fetch-network-error",{originalErrorMessage:d?.message})}if(s.status!==200)throw vr.create("fetch-status-error",{httpStatus:s.status});let a;try{a=await s.json()}catch(d){throw vr.create("fetch-parse-error",{originalErrorMessage:d?.message})}let c=a.ttl.match(/^([\d.]+)(s)$/);if(!c||!c[2]||isNaN(Number(c[1])))throw vr.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${a.ttl}`});let l=Number(c[1])*1e3,u=Date.now();return{token:a.token,expireTimeMillis:u+l,issuedAtTimeMillis:u}}function VT(t,e){let{projectId:n,appId:r,apiKey:i}=t.options;return{url:`${DU}/projects/${n}/apps/${r}:${TU}?key=${i}`,body:{debug_token:e}}}var RU="firebase-app-check-database",NU=1,E_="firebase-app-check-store";var Bd=null;function MU(){return Bd||(Bd=new Promise((t,e)=>{try{let n=indexedDB.open(RU,NU);n.onsuccess=r=>{t(r.target.result)},n.onerror=r=>{var i;e(vr.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},n.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(E_,{keyPath:"compositeKey"})}}}catch(n){e(vr.create("storage-open",{originalErrorMessage:n?.message}))}}),Bd)}function kU(t,e){return xU(OU(t),e)}async function xU(t,e){let r=(await MU()).transaction(E_,"readwrite"),o=r.objectStore(E_).put({compositeKey:t,value:e});return new Promise((s,a)=>{o.onsuccess=c=>{s()},r.onerror=c=>{var l;a(vr.create("storage-set",{originalErrorMessage:(l=c.target.error)===null||l===void 0?void 0:l.message}))}})}function OU(t){return`${t.options.appId}-${t.name}`}var Ya=new In("@firebase/app-check");function __(t,e){return Nd()?kU(t,e).catch(n=>{Ya.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}function HT(){return UT().enabled}async function $T(){let t=UT();if(t.enabled&&t.token)return t.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)}var PU={error:"UNKNOWN_ERROR"};function LU(t){return Go.encodeString(JSON.stringify(t),!1)}async function I_(t,e=!1,n=!1){let r=t.app;jT(r);let i=Kt(r),o=i.token,s;if(o&&!Qa(o)&&(i.token=void 0,o=void 0),!o){let l=await i.cachedTokenPromise;l&&(Qa(l)?o=l:await __(r,void 0))}if(!e&&o&&Qa(o))return{token:o.token};let a=!1;if(HT())try{i.exchangeTokenPromise||(i.exchangeTokenPromise=BT(VT(r,await $T()),t.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),a=!0);let l=await i.exchangeTokenPromise;return await __(r,l),i.token=l,{token:l.token}}catch(l){return l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?Ya.warn(l.message):n&&Ya.error(l),v_(l)}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),a=!0),o=await Kt(r).exchangeTokenPromise}catch(l){l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?Ya.warn(l.message):n&&Ya.error(l),s=l}let c;return o?s?Qa(o)?c={token:o.token,internalError:s}:c=v_(s):(c={token:o.token},i.token=o,await __(r,o)):c=v_(s),a&&BU(r,c),c}async function FU(t){let e=t.app;jT(e);let{provider:n}=Kt(e);if(HT()){let r=await $T(),{token:i}=await BT(VT(e,r),t.heartbeatServiceProvider);return{token:i}}else{let{token:r}=await n.getToken();return{token:r}}}function UU(t,e,n,r){let{app:i}=t,o=Kt(i),s={next:n,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&Qa(o.token)){let a=o.token;Promise.resolve().then(()=>{n({token:a.token}),LT(t)}).catch(()=>{})}o.cachedTokenPromise.then(()=>LT(t))}function WT(t,e){let n=Kt(t),r=n.tokenObservers.filter(i=>i.next!==e);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function LT(t){let{app:e}=t,n=Kt(e),r=n.tokenRefresher;r||(r=jU(t),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function jU(t){let{app:e}=t;return new y_(async()=>{let n=Kt(e),r;if(n.token?r=await I_(t,!0):r=await I_(t),r.error)throw r.error;if(r.internalError)throw r.internalError},()=>!0,()=>{let n=Kt(e);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5,i=n.token.expireTimeMillis-300*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},PT.RETRIAL_MIN_WAIT,PT.RETRIAL_MAX_WAIT)}function BU(t,e){let n=Kt(t).tokenObservers;for(let r of n)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function Qa(t){return t.expireTimeMillis-Date.now()>0}function v_(t){return{token:LU(PU),error:t}}var C_=class{constructor(e,n){this.app=e,this.heartbeatServiceProvider=n}_delete(){let{tokenObservers:e}=Kt(this.app);for(let n of e)WT(this.app,n.next);return Promise.resolve()}};function VU(t,e){return new C_(t,e)}function HU(t){return{getToken:e=>I_(t,e),getLimitedUseToken:()=>FU(t),addTokenListener:e=>UU(t,"INTERNAL",e),removeTokenListener:e=>WT(t.app,e)}}var $U="@firebase/app-check",WU="0.10.1";var zU="app-check",FT="app-check-internal";function GU(){qt(new Ze(zU,t=>{let e=t.getProvider("app").getImmediate(),n=t.getProvider("heartbeat");return VU(e,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider(FT).initialize()})),qt(new Ze(FT,t=>{let e=t.getProvider("app-check").getImmediate();return HU(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),Ie($U,WU)}GU();var qU="app-check";var Vd=class{constructor(){return Qo(qU)}};var KU=["localhost","0.0.0.0","127.0.0.1"],nre=typeof window<"u"&&KU.includes(window.location.hostname);var zT=()=>{};var w_={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};var I=function(t,e){if(!t)throw wi(e)},wi=function(t){return new Error("Firebase Database ("+w_.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};var KT=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},YU=function(t){let e=[],n=0,r=0;for(;n<t.length;){let i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=t[n++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=t[n++],s=t[n++],a=t[n++],c=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{let o=t[n++],s=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},Wd={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){let o=t[i],s=i+1<t.length,a=s?t[i+1]:0,c=i+2<t.length,l=c?t[i+2]:0,u=o>>2,d=(o&3)<<4|a>>4,f=(a&15)<<2|l>>6,h=l&63;c||(h=64,s||(f=64)),r.push(n[u],n[d],n[f],n[h])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(KT(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):YU(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();let n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){let o=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;let l=i<t.length?n[t.charAt(i)]:64;++i;let d=i<t.length?n[t.charAt(i)]:64;if(++i,o==null||a==null||l==null||d==null)throw new b_;let f=o<<2|a>>4;if(r.push(f),l!==64){let h=a<<4&240|l>>2;if(r.push(h),d!==64){let p=l<<6&192|d;r.push(p)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},b_=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},D_=function(t){let e=KT(t);return Wd.encodeByteArray(e,!0)},Ja=function(t){return D_(t).replace(/\./g,"")},Hd=function(t){try{return Wd.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function YT(t){return QT(void 0,t)}function QT(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:let n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(let n in e)!e.hasOwnProperty(n)||!QU(n)||(t[n]=QT(t[n],e[n]));return t}function QU(t){return t!=="__proto__"}function ZU(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var JU=()=>ZU().__FIREBASE_DEFAULTS__,XU=()=>{if(typeof process>"u"||typeof process.env>"u")return;let t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},ej=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=t&&Hd(t[1]);return e&&JSON.parse(e)},ZT=()=>{try{return zT()||JU()||XU()||ej()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},tj=t=>ZT()?.emulatorHosts?.[t],JT=t=>{let e=tj(t);if(!e)return;let n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},T_=()=>ZT()?.config;var Ii=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};function zd(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function XT(t){return(await fetch(t,{credentials:"include"})).ok}function eS(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=E({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Ja(JSON.stringify(n)),Ja(JSON.stringify(s)),""].join(".")}var Za={};function nj(){let t={prod:[],emulator:[]};for(let e of Object.keys(Za))Za[e]?t.emulator.push(e):t.prod.push(e);return t}function rj(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}var GT=!1;function tS(t,e){if(typeof window>"u"||typeof document>"u"||!zd(window.location.host)||Za[t]===e||Za[t]||GT)return;Za[t]=e;function n(f){return`__firebase__banner__${f}`}let r="__firebase__banner",o=nj().prod.length>0;function s(){let f=document.getElementById(r);f&&f.remove()}function a(f){f.style.display="flex",f.style.background="#7faaf0",f.style.position="fixed",f.style.bottom="5px",f.style.left="5px",f.style.padding=".5em",f.style.borderRadius="5px",f.style.alignItems="center"}function c(f,h){f.setAttribute("width","24"),f.setAttribute("id",h),f.setAttribute("height","24"),f.setAttribute("viewBox","0 0 24 24"),f.setAttribute("fill","none"),f.style.marginLeft="-6px"}function l(){let f=document.createElement("span");return f.style.cursor="pointer",f.style.marginLeft="16px",f.style.fontSize="24px",f.innerHTML=" &times;",f.onclick=()=>{GT=!0,s()},f}function u(f,h){f.setAttribute("id",h),f.innerText="Learn more",f.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",f.setAttribute("target","__blank"),f.style.paddingLeft="5px",f.style.textDecoration="underline"}function d(){let f=rj(r),h=n("text"),p=document.getElementById(h)||document.createElement("span"),_=n("learnmore"),C=document.getElementById(_)||document.createElement("a"),S=n("preprendIcon"),le=document.getElementById(S)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(f.created){let _e=f.element;a(_e),u(C,_);let tn=l();c(le,S),_e.append(le,p,C,tn),document.body.appendChild(_e)}o?(p.innerText="Preview backend disconnected.",le.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(le.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,p.innerText="Preview backend running in this workspace."),p.setAttribute("id",h)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",d):d()}function ij(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function S_(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ij())}function nS(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function bn(){return w_.NODE_CLIENT===!0||w_.NODE_ADMIN===!0}function rS(){try{return typeof indexedDB=="object"}catch{return!1}}function iS(){return new Promise((t,e)=>{try{let n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(n){e(n)}})}var oj="FirebaseError",Ci=class t extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=oj,Object.setPrototypeOf(this,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Xa.prototype.create)}},Xa=class{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){let r=n[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?sj(o,r):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new Ci(i,a,r)}};function sj(t,e){return t.replace(aj,(n,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var aj=/\{\$([^}]+)}/g;function Zo(t){return JSON.parse(t)}function xe(t){return JSON.stringify(t)}var oS=function(t){let e={},n={},r={},i="";try{let o=t.split(".");e=Zo(Hd(o[0])||""),n=Zo(Hd(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:i}};var sS=function(t){let e=oS(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},aS=function(t){let e=oS(t).claims;return typeof e=="object"&&e.admin===!0};function Dn(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function bi(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function A_(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function ec(t,e,n){let r={};for(let i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function Jo(t,e){if(t===e)return!0;let n=Object.keys(t),r=Object.keys(e);for(let i of n){if(!r.includes(i))return!1;let o=t[i],s=e[i];if(qT(o)&&qT(s)){if(!Jo(o,s))return!1}else if(o!==s)return!1}for(let i of r)if(!n.includes(i))return!1;return!0}function qT(t){return t!==null&&typeof t=="object"}function cS(t){let e=[];for(let[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}var $d=class{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);let r=this.W_;if(typeof e=="string")for(let d=0;d<16;d++)r[d]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let d=0;d<16;d++)r[d]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let d=16;d<80;d++){let f=r[d-3]^r[d-8]^r[d-14]^r[d-16];r[d]=(f<<1|f>>>31)&4294967295}let i=this.chain_[0],o=this.chain_[1],s=this.chain_[2],a=this.chain_[3],c=this.chain_[4],l,u;for(let d=0;d<80;d++){d<40?d<20?(l=a^o&(s^a),u=1518500249):(l=o^s^a,u=1859775393):d<60?(l=o&s|a&(o|s),u=2400959708):(l=o^s^a,u=3395469782);let f=(i<<5|i>>>27)+l+c+u+r[d]&4294967295;c=a,a=s,s=(o<<30|o>>>2)&4294967295,o=i,i=f}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+o&4294967295,this.chain_[2]=this.chain_[2]+s&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);let r=n-this.blockSize,i=0,o=this.buf_,s=this.inbuf_;for(;i<n;){if(s===0)for(;i<=r;)this.compress_(e,i),i+=this.blockSize;if(typeof e=="string"){for(;i<n;)if(o[s]=e.charCodeAt(i),++s,++i,s===this.blockSize){this.compress_(o),s=0;break}}else for(;i<n;)if(o[s]=e[i],++s,++i,s===this.blockSize){this.compress_(o),s=0;break}}this.inbuf_=s,this.total_+=n}digest(){let e=[],n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let o=24;o>=0;o-=8)e[r]=this.chain_[i]>>o&255,++r;return e}};function lS(t,e){return`${t} failed: ${e} argument `}var uS=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);if(i>=55296&&i<=56319){let o=i-55296;r++,I(r<t.length,"Surrogate pair missing trail surrogate.");let s=t.charCodeAt(r)-56320;i=65536+(o<<10)+s}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},tc=function(t){let e=0;for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};var are=14400*1e3;function R_(t){return t&&t._delegate?t._delegate:t}var Wn=class{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Di="[DEFAULT]";var Gd=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){let r=new Ii;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){let n=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(lj(e))try{this.getOrInitializeService({instanceIdentifier:Di})}catch{}for(let[n,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(n);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=Di){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){let e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Di){return this.instances.has(e)}getOptions(e=Di){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(let[o,s]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(o);r===a&&s.resolve(i)}return i}onInit(e,n){let r=this.normalizeInstanceIdentifier(n),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);let o=this.instances.get(r);return o&&e(o,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){let r=this.onInitCallbacks.get(n);if(r)for(let i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:cj(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Di){return this.component?this.component.multipleInstances?e:Di:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function cj(t){return t===Di?void 0:t}function lj(t){return t.instantiationMode==="EAGER"}var nc=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let n=new Gd(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}};var uj=[],ae=(function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t})(ae||{}),dj={debug:ae.DEBUG,verbose:ae.VERBOSE,info:ae.INFO,warn:ae.WARN,error:ae.ERROR,silent:ae.SILENT},fj=ae.INFO,hj={[ae.DEBUG]:"log",[ae.VERBOSE]:"log",[ae.INFO]:"info",[ae.WARN]:"warn",[ae.ERROR]:"error"},pj=(t,e,...n)=>{if(e<t.logLevel)return;let r=new Date().toISOString(),i=hj[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Xo=class{constructor(e){this.name=e,this._logLevel=fj,this._logHandler=pj,this._userLogHandler=null,uj.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ae))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?dj[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ae.DEBUG,...e),this._logHandler(this,ae.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ae.VERBOSE,...e),this._logHandler(this,ae.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ae.INFO,...e),this._logHandler(this,ae.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ae.WARN,...e),this._logHandler(this,ae.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ae.ERROR,...e),this._logHandler(this,ae.ERROR,...e)}};var M_=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(gj(n)){let r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}};function gj(t){return t.getComponent()?.type==="VERSION"}var k_="@firebase/app",dS="0.14.6";var zn=new Xo("@firebase/app"),mj="@firebase/app-compat",_j="@firebase/analytics-compat",vj="@firebase/analytics",yj="@firebase/app-check-compat",Ej="@firebase/app-check",Ij="@firebase/auth",Cj="@firebase/auth-compat",wj="@firebase/database",bj="@firebase/data-connect",Dj="@firebase/database-compat",Tj="@firebase/functions",Sj="@firebase/functions-compat",Aj="@firebase/installations",Rj="@firebase/installations-compat",Nj="@firebase/messaging",Mj="@firebase/messaging-compat",kj="@firebase/performance",xj="@firebase/performance-compat",Oj="@firebase/remote-config",Pj="@firebase/remote-config-compat",Lj="@firebase/storage",Fj="@firebase/storage-compat",Uj="@firebase/firestore",jj="@firebase/ai",Bj="@firebase/firestore-compat",Vj="firebase",Hj="12.6.0";var x_="[DEFAULT]",$j={[k_]:"fire-core",[mj]:"fire-core-compat",[vj]:"fire-analytics",[_j]:"fire-analytics-compat",[Ej]:"fire-app-check",[yj]:"fire-app-check-compat",[Ij]:"fire-auth",[Cj]:"fire-auth-compat",[wj]:"fire-rtdb",[bj]:"fire-data-connect",[Dj]:"fire-rtdb-compat",[Tj]:"fire-fn",[Sj]:"fire-fn-compat",[Aj]:"fire-iid",[Rj]:"fire-iid-compat",[Nj]:"fire-fcm",[Mj]:"fire-fcm-compat",[kj]:"fire-perf",[xj]:"fire-perf-compat",[Oj]:"fire-rc",[Pj]:"fire-rc-compat",[Lj]:"fire-gcs",[Fj]:"fire-gcs-compat",[Uj]:"fire-fst",[Bj]:"fire-fst-compat",[jj]:"fire-vertex","fire-js":"fire-js",[Vj]:"fire-js-all"};var qd=new Map,Wj=new Map,O_=new Map;function fS(t,e){try{t.container.addComponent(e)}catch(n){zn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function rc(t){let e=t.name;if(O_.has(e))return zn.debug(`There were multiple attempts to register component ${e}.`),!1;O_.set(e,t);for(let n of qd.values())fS(n,t);for(let n of Wj.values())fS(n,t);return!0}function mS(t,e){let n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function _S(t){return t==null?!1:t.settings!==void 0}var zj={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},yr=new Xa("app","Firebase",zj);var P_=class{constructor(e,n,r){this._isDeleted=!1,this._options=E({},e),this._config=E({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Wn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw yr.create("app-deleted",{appName:this._name})}};var vS=Hj;function Gj(t,e={}){let n=t;typeof e!="object"&&(e={name:e});let r=E({name:x_,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw yr.create("bad-app-name",{appName:String(i)});if(n||(n=T_()),!n)throw yr.create("no-options");let o=qd.get(i);if(o){if(Jo(n,o.options)&&Jo(r,o.config))return o;throw yr.create("duplicate-app",{appName:i})}let s=new nc(i);for(let c of O_.values())s.addComponent(c);let a=new P_(n,r,s);return qd.set(i,a),a}function yS(t=x_){let e=qd.get(t);if(!e&&t===x_&&T_())return Gj();if(!e)throw yr.create("no-app",{appName:t});return e}function es(t,e,n){let r=$j[t]??t;n&&(r+=`-${n}`);let i=r.match(/\s|\//),o=e.match(/\s|\//);if(i||o){let s=[`Unable to register library "${r}" with version "${e}":`];i&&s.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&o&&s.push("and"),o&&s.push(`version name "${e}" contains illegal characters (whitespace or "/")`),zn.warn(s.join(" "));return}rc(new Wn(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}var qj="firebase-heartbeat-database",Kj=1,ic="firebase-heartbeat-store",N_=null;function ES(){return N_||(N_=Pd(qj,Kj,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(ic)}catch(n){console.warn(n)}}}}).catch(t=>{throw yr.create("idb-open",{originalErrorMessage:t.message})})),N_}async function Yj(t){try{let n=(await ES()).transaction(ic),r=await n.objectStore(ic).get(IS(t));return await n.done,r}catch(e){if(e instanceof Ci)zn.warn(e.message);else{let n=yr.create("idb-get",{originalErrorMessage:e?.message});zn.warn(n.message)}}}async function hS(t,e){try{let r=(await ES()).transaction(ic,"readwrite");await r.objectStore(ic).put(e,IS(t)),await r.done}catch(n){if(n instanceof Ci)zn.warn(n.message);else{let r=yr.create("idb-set",{originalErrorMessage:n?.message});zn.warn(r.message)}}}function IS(t){return`${t.name}!${t.options.appId}`}var Qj=1024,Zj=30,L_=class{constructor(e){this.container=e,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new F_(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{let n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=pS();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>Zj){let i=Xj(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){zn.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";let e=pS(),{heartbeatsToSend:n,unsentEntries:r}=Jj(this._heartbeatsCache.heartbeats),i=Ja(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return zn.warn(e),""}}};function pS(){return new Date().toISOString().substring(0,10)}function Jj(t,e=Qj){let n=[],r=t.slice();for(let i of t){let o=n.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),gS(n)>e){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),gS(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var F_=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return rS()?iS().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){let n=await Yj(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){let r=await this.read();return hS(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){let r=await this.read();return hS(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}};function gS(t){return Ja(JSON.stringify({version:2,heartbeats:t})).length}function Xj(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}function eB(t){rc(new Wn("platform-logger",e=>new M_(e),"PRIVATE")),rc(new Wn("heartbeat",e=>new L_(e),"PRIVATE")),es(k_,dS,t),es(k_,dS,"esm2020"),es("fire-js","")}eB("");function RS(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var NS=RS,MS=new zt("auth","Firebase",RS());var Zd=new In("@firebase/auth");function tB(t,...e){Zd.logLevel<=te.WARN&&Zd.warn(`Auth (${qo}): ${t}`,...e)}function Yd(t,...e){Zd.logLevel<=te.ERROR&&Zd.error(`Auth (${qo}): ${t}`,...e)}function CS(t,...e){throw Y_(t,...e)}function K_(t,...e){return Y_(t,...e)}function kS(t,e,n){let r=Object.assign(Object.assign({},NS()),{[e]:n});return new zt("auth","Firebase",r).create(e,{appName:t.name})}function Qd(t){return kS(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Y_(t,...e){if(typeof t!="string"){let n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return MS.create(t,...e)}function Q(t,e,...n){if(!t)throw Y_(e,...n)}function oc(t){let e="INTERNAL ASSERTION FAILED: "+t;throw Yd(e),new Error(e)}function Jd(t,e){t||oc(e)}function nB(){return wS()==="http:"||wS()==="https:"}function wS(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}function rB(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(nB()||uT()||"connection"in navigator)?navigator.onLine:!0}function iB(){if(typeof navigator>"u")return null;let t=navigator;return t.languages&&t.languages[0]||t.language||null}var Ai=class{constructor(e,n){this.shortDelay=e,this.longDelay=n,Jd(n>e,"Short delay should be less than long delay!"),this.isMobile=Va()||Rd()}get(){return rB()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function oB(t,e){Jd(t.emulator,"Emulator should always be set here");let{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}var Xd=class{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;oc("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;oc("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;oc("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var sB={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var aB=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],cB=new Ai(3e4,6e4);function xS(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function of(t,e,n,r,i={}){return OS(t,i,async()=>{let o={},s={};r&&(e==="GET"?s=r:o={body:JSON.stringify(r)});let a=$a(Object.assign({key:t.config.apiKey},s)).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);let l=Object.assign({method:e,headers:c},o);return lT()||(l.referrerPolicy="no-referrer"),t.emulatorConfig&&hi(t.emulatorConfig.host)&&(l.credentials="include"),Xd.fetch()(await PS(t,t.config.apiHost,n,a),l)})}async function OS(t,e,n){t._canInitEmulator=!1;let r=Object.assign(Object.assign({},sB),e);try{let i=new B_(t),o=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();let s=await o.json();if("needConfirmation"in s)throw Kd(t,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{let a=o.ok?s.errorMessage:s.error.message,[c,l]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Kd(t,"credential-already-in-use",s);if(c==="EMAIL_EXISTS")throw Kd(t,"email-already-in-use",s);if(c==="USER_DISABLED")throw Kd(t,"user-disabled",s);let u=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw kS(t,u,l);CS(t,u)}}catch(i){if(i instanceof vn)throw i;CS(t,"network-request-failed",{message:String(i)})}}async function PS(t,e,n,r){let i=`${e}${n}?${r}`,o=t,s=o.config.emulator?oB(t.config,i):`${t.config.apiScheme}://${i}`;return aB.includes(n)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(s).toString():s}var B_=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(K_(this.auth,"network-request-failed")),cB.get())})}};function Kd(t,e,n){let r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=K_(t,e,r);return i.customData._tokenResponse=n,i}async function lB(t,e){return of(t,"POST","/v1/accounts:delete",e)}async function ef(t,e){return of(t,"POST","/v1/accounts:lookup",e)}function sc(t){if(t)try{let e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Q_(t,e=!1){let n=pt(t),r=await n.getIdToken(e),i=LS(r);Q(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:sc(U_(i.auth_time)),issuedAtTime:sc(U_(i.iat)),expirationTime:sc(U_(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}}function U_(t){return Number(t)*1e3}function LS(t){let[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Yd("JWT malformed, contained fewer than 3 sections"),null;try{let i=Wo(n);return i?JSON.parse(i):(Yd("Failed to decode base64 JWT payload"),null)}catch(i){return Yd("Caught error parsing JWT payload as JSON",i?.toString()),null}}function bS(t){let e=LS(t);return Q(e,"internal-error"),Q(typeof e.exp<"u","internal-error"),Q(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function V_(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof vn&&uB(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function uB({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}var H_=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}};var cc=class{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=sc(this.lastLoginAt),this.creationTime=sc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};async function tf(t){var e;let n=t.auth,r=await t.getIdToken(),i=await V_(t,ef(n,{idToken:r}));Q(i?.users.length,n,"internal-error");let o=i.users[0];t._notifyReloadListener(o);let s=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?FS(o.providerUserInfo):[],a=dB(t.providerData,s),c=t.isAnonymous,l=!(t.email&&o.passwordHash)&&!a?.length,u=c?l:!1,d={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new cc(o.createdAt,o.lastLoginAt),isAnonymous:u};Object.assign(t,d)}async function Z_(t){let e=pt(t);await tf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function dB(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function FS(t){return t.map(e=>{var{providerId:n}=e,r=Ah(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}async function fB(t,e){let n=await OS(t,{},async()=>{let r=$a({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=t.config,s=await PS(t,i,"/v1/token",`key=${o}`),a=await t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";let c={method:"POST",headers:a,body:r};return t.emulatorConfig&&hi(t.emulatorConfig.host)&&(c.credentials="include"),Xd.fetch()(s,c)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function hB(t,e){return of(t,"POST","/v2/accounts:revokeToken",xS(t,e))}var ac=class t{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Q(e.idToken,"internal-error"),Q(typeof e.idToken<"u","internal-error"),Q(typeof e.refreshToken<"u","internal-error");let n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):bS(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Q(e.length!==0,"internal-error");let n=bS(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Q(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){let{accessToken:r,refreshToken:i,expiresIn:o}=await fB(e,n);this.updateTokensAndExpiration(r,i,Number(o))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){let{refreshToken:r,accessToken:i,expirationTime:o}=n,s=new t;return r&&(Q(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(Q(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(Q(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new t,this.toJSON())}_performRefresh(){return oc("not implemented")}};function Er(t,e){Q(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}var Ti=class t{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,o=Ah(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new H_(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new cc(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){let n=await V_(this,this.stsTokenManager.getToken(this.auth,e));return Q(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return Q_(this,e)}reload(){return Z_(this)}_assign(e){this!==e&&(Q(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let n=new t(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Q(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await tf(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if($n(this.auth.app))return Promise.reject(Qd(this.auth));let e=await this.getIdToken();return await V_(this,lB(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,o,s,a,c,l,u;let d=(r=n.displayName)!==null&&r!==void 0?r:void 0,f=(i=n.email)!==null&&i!==void 0?i:void 0,h=(o=n.phoneNumber)!==null&&o!==void 0?o:void 0,p=(s=n.photoURL)!==null&&s!==void 0?s:void 0,_=(a=n.tenantId)!==null&&a!==void 0?a:void 0,C=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,S=(l=n.createdAt)!==null&&l!==void 0?l:void 0,le=(u=n.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:_e,emailVerified:tn,isAnonymous:kE,providerData:sh,stsTokenManager:xE}=n;Q(_e&&xE,e,"internal-error");let SN=ac.fromJSON(this.name,xE);Q(typeof _e=="string",e,"internal-error"),Er(d,e.name),Er(f,e.name),Q(typeof tn=="boolean",e,"internal-error"),Q(typeof kE=="boolean",e,"internal-error"),Er(h,e.name),Er(p,e.name),Er(_,e.name),Er(C,e.name),Er(S,e.name),Er(le,e.name);let ah=new t({uid:_e,auth:e,email:f,emailVerified:tn,displayName:d,isAnonymous:kE,photoURL:p,phoneNumber:h,tenantId:_,stsTokenManager:SN,createdAt:S,lastLoginAt:le});return sh&&Array.isArray(sh)&&(ah.providerData=sh.map(AN=>Object.assign({},AN))),C&&(ah._redirectEventId=C),ah}static async _fromIdTokenResponse(e,n,r=!1){let i=new ac;i.updateFromServerResponse(n);let o=new t({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await tf(o),o}static async _fromGetAccountInfoResponse(e,n,r){let i=n.users[0];Q(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?FS(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!o?.length,a=new ac;a.updateFromIdToken(r);let c=new t({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:s}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new cc(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(c,l),c}};var DS=new Map;function Si(t){Jd(t instanceof Function,"Expected a class definition");let e=DS.get(t);return e?(Jd(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,DS.set(t,e),e)}var pB=(()=>{class t{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(n,r){this.storage[n]=r}async _get(n){let r=this.storage[n];return r===void 0?null:r}async _remove(n){delete this.storage[n]}_addListener(n,r){}_removeListener(n,r){}}return t.type="NONE",t})(),$_=pB;function j_(t,e,n){return`firebase:${t}:${e}:${n}`}var nf=class t{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=j_(this.userKey,i.apiKey,o),this.fullPersistenceKey=j_("persistence",i.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){let e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let n=await ef(this.auth,{idToken:e}).catch(()=>{});return n?Ti._fromGetAccountInfoResponse(this.auth,n,e):null}return Ti._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;let n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new t(Si($_),e,r);let i=(await Promise.all(n.map(async l=>{if(await l._isAvailable())return l}))).filter(l=>l),o=i[0]||Si($_),s=j_(r,e.config.apiKey,e.name),a=null;for(let l of n)try{let u=await l._get(s);if(u){let d;if(typeof u=="string"){let f=await ef(e,{idToken:u}).catch(()=>{});if(!f)break;d=await Ti._fromGetAccountInfoResponse(e,f,u)}else d=Ti._fromJSON(e,u);l!==o&&(a=d),o=l;break}}catch{}let c=i.filter(l=>l._shouldAllowMigration);return!o._shouldAllowMigration||!c.length?new t(o,e,r):(o=c[0],a&&await o._set(s,a.toJSON()),await Promise.all(n.map(async l=>{if(l!==o)try{await l._remove(s)}catch{}})),new t(o,e,r))}};function TS(t){let e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(vB(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(gB(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(EB(e))return"Blackberry";if(IB(e))return"Webos";if(mB(e))return"Safari";if((e.includes("chrome/")||_B(e))&&!e.includes("edge/"))return"Chrome";if(yB(e))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function gB(t=Gt()){return/firefox\//i.test(t)}function mB(t=Gt()){let e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function _B(t=Gt()){return/crios\//i.test(t)}function vB(t=Gt()){return/iemobile/i.test(t)}function yB(t=Gt()){return/android/i.test(t)}function EB(t=Gt()){return/blackberry/i.test(t)}function IB(t=Gt()){return/webos/i.test(t)}function US(t,e=[]){let n;switch(t){case"Browser":n=TS(Gt());break;case"Worker":n=`${TS(Gt())}-${t}`;break;default:n=t}let r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${qo}/${r}`}var W_=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){let r=o=>new Promise((s,a)=>{try{let c=e(o);s(c)}catch(c){a(c)}});r.onAbort=n,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;let n=[];try{for(let r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(let i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}};async function CB(t,e={}){return of(t,"GET","/v2/passwordPolicy",xS(t,e))}var wB=6,z_=class{constructor(e){var n,r,i,o;let s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=s.minPasswordLength)!==null&&n!==void 0?n:wB,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,o,s,a;let c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(n=c.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(o=c.containsUppercaseLetter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(s=c.containsNumericCharacter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(a=c.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),c}validatePasswordLengthOptions(e,n){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var G_=class{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new rf(this),this.idTokenSubscription=new rf(this),this.beforeStateQueue=new W_(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=MS,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Si(n)),this._initializationPromise=this.queue(async()=>{var r,i,o;if(!this._deleted&&(this.persistenceManager=await nf.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;let e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{let n=await ef(this,{idToken:e}),r=await Ti._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if($n(this.app)){let s=this.app.settings.authIdToken;return s?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(a,a))}):this.directlySetCurrentUser(null)}let r=await this.assertedPersistence.getCurrentUser(),i=r,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();let s=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i?._redirectEventId,c=await this.tryRedirectSignIn(e);(!s||s===a)&&c?.user&&(i=c.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(i)}catch(s){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Q(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await tf(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=iB()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if($n(this.app))return Promise.reject(Qd(this));let n=e?pt(e):null;return n&&Q(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Q(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return $n(this.app)?Promise.reject(Qd(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return $n(this.app)?Promise.reject(Qd(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Si(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();let n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){let e=await CB(this),n=new z_(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new zt("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){let n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await hB(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){let r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){let n=e&&Si(e)||this._popupRedirectResolver;Q(n,this,"argument-error"),this.redirectPersistenceManager=await nf.create(this,[Si(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};let o=typeof n=="function"?n:n.next.bind(n),s=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Q(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),typeof n=="function"){let c=e.addObserver(n,r,i);return()=>{s=!0,c()}}else{let c=e.addObserver(n);return()=>{s=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Q(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=US(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;let n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);let r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);let i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;if($n(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n?.error&&tB(`Error while retrieving App Check token: ${n.error}`),n?.token}};function bB(t){return pt(t)}var rf=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=gT(n=>this.observer=n)}get next(){return Q(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var DB={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function TB(t){DB=t}function SB(t){return`__${t}${Math.floor(Math.random()*1e6)}`}function AB(t,e){let n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(Si);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}var kre=SB("rcb"),xre=new Ai(3e4,6e4);var Ore=new Ai(2e3,1e4);var Pre=600*1e3;var Lre=new Ai(3e4,6e4);var Fre=new Ai(5e3,15e3);var Ure=encodeURIComponent("fac");var SS="@firebase/auth",AS="1.10.8";var q_=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Q(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function RB(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function NB(t){qt(new Ze("auth",(e,{options:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;Q(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});let c={apiKey:s,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:US(t)},l=new G_(r,i,o,c);return AB(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),qt(new Ze("auth-internal",e=>{let n=bB(e.getProvider("auth").getImmediate());return(r=>new q_(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ie(SS,AS,RB(t)),Ie(SS,AS,"esm2017")}var MB=300,jre=aT("authIdTokenMaxAge")||MB;function kB(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}TB({loadJS(t){return new Promise((e,n)=>{let r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{let o=K_("internal-error");o.customData=i,n(o)},r.type="text/javascript",r.charset="UTF-8",kB().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});NB("Browser");var N2="auth";var sf=class{constructor(){return Qo(N2)}};var jS="@firebase/database",BS="1.1.0";var Yv="";function M2(t){Yv=t}var ov=class{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),xe(n))}get(e){let n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:Zo(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}};var sv=class{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return Dn(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}};var v0=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){let e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new ov(e)}}catch{}return new sv},Ni=v0("localStorage"),av=v0("sessionStorage");var is=new Xo("@firebase/database"),k2=(function(){let t=1;return function(){return t++}})(),y0=function(t){let e=uS(t),n=new $d;n.update(e);let r=n.digest();return Wd.encodeByteArray(r)},Ic=function(...t){let e="";for(let n=0;n<t.length;n++){let r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=Ic.apply(null,r):typeof r=="object"?e+=xe(r):e+=r,e+=" "}return e},Mi=null,VS=!0,x2=function(t,e){I(!e||t===!0||t===!1,"Can't turn on custom loggers persistently."),t===!0?(is.logLevel=ae.VERBOSE,Mi=is.log.bind(is),e&&av.set("logging_enabled",!0)):typeof t=="function"?Mi=t:(Mi=null,av.remove("logging_enabled"))},Ve=function(...t){if(VS===!0&&(VS=!1,Mi===null&&av.get("logging_enabled")===!0&&x2(!0)),Mi){let e=Ic.apply(null,t);Mi(e)}},Cc=function(t){return function(...e){Ve(t,...e)}},cv=function(...t){let e="FIREBASE INTERNAL ERROR: "+Ic(...t);is.error(e)},qn=function(...t){let e=`FIREBASE FATAL ERROR: ${Ic(...t)}`;throw is.error(e),new Error(e)},gt=function(...t){let e="FIREBASE WARNING: "+Ic(...t);is.warn(e)},O2=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&gt("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},E0=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},P2=function(t){if(bn()||document.readyState==="complete")t();else{let e=!1,n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},ss="[MIN_NAME]",ki="[MAX_NAME]",hs=function(t,e){if(t===e)return 0;if(t===ss||e===ki)return-1;if(e===ss||t===ki)return 1;{let n=HS(t),r=HS(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},L2=function(t,e){return t===e?0:t<e?-1:1},lc=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+xe(e))},Qv=function(t){if(typeof t!="object"||t===null)return xe(t);let e=[];for(let r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=xe(e[r]),n+=":",n+=Qv(t[e[r]]);return n+="}",n},I0=function(t,e){let n=t.length;if(n<=e)return[t];let r=[];for(let i=0;i<n;i+=e)i+e>n?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r};function Nt(t,e){for(let n in t)t.hasOwnProperty(n)&&e(n,t[n])}var C0=function(t){I(!E0(t),"Invalid JSON number");let e=11,n=52,r=(1<<e-1)-1,i,o,s,a,c;t===0?(o=0,s=0,i=1/t===-1/0?1:0):(i=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),r),o=a+r,s=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(o=0,s=Math.round(t/Math.pow(2,1-r-n))));let l=[];for(c=n;c;c-=1)l.push(s%2?1:0),s=Math.floor(s/2);for(c=e;c;c-=1)l.push(o%2?1:0),o=Math.floor(o/2);l.push(i?1:0),l.reverse();let u=l.join(""),d="";for(c=0;c<64;c+=8){let f=parseInt(u.substr(c,8),2).toString(16);f.length===1&&(f="0"+f),d=d+f}return d.toLowerCase()},F2=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},U2=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};var j2=new RegExp("^-?(0*)\\d{1,10}$"),B2=-2147483648,V2=2147483647,HS=function(t){if(j2.test(t)){let e=Number(t);if(e>=B2&&e<=V2)return e}return null},wc=function(t){try{t()}catch(e){setTimeout(()=>{let n=e.stack||"";throw gt("Exception was thrown by user callback.",n),e},Math.floor(0))}},H2=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},pc=function(t,e){let n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};var lv=class{constructor(e,n){this.appCheckProvider=n,this.appName=e.name,_S(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.appCheck=n?.getImmediate({optional:!0}),this.appCheck||n?.get().then(r=>this.appCheck=r)}getToken(e){if(this.serverAppAppCheckToken){if(e)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.appCheckProvider?.get().then(n=>n.addTokenListener(e))}notifyForInvalidToken(){gt(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}};var uv=class{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(Ve("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',gt(e)}},gc=(()=>{class t{constructor(n){this.accessToken=n}getToken(n){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(n){n(this.accessToken)}removeTokenChangeListener(n){}notifyForInvalidToken(){}}t.OWNER="owner";return t})(),cf="5",w0="v",b0="s",D0="r",T0="f",S0=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,A0="ls",R0="p",dv="ac",N0="websocket",M0="long_polling";var lf=class{constructor(e,n,r,i,o=!1,s="",a=!1,c=!1,l=null){this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=o,this.persistenceKey=s,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=c,this.emulatorOptions=l,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Ni.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Ni.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){let e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}};function $2(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function k0(t,e,n){I(typeof e=="string","typeof type must == string"),I(typeof n=="object","typeof params must == object");let r;if(e===N0)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===M0)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);$2(t)&&(n.ns=t.namespace);let i=[];return Nt(n,(o,s)=>{i.push(o+"="+s)}),r+i.join("&")}var fv=class{constructor(){this.counters_={}}incrementCounter(e,n=1){Dn(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return YT(this.counters_)}};var J_={},X_={};function Zv(t){let e=t.toString();return J_[e]||(J_[e]=new fv),J_[e]}function W2(t,e){let n=t.toString();return X_[n]||(X_[n]=e()),X_[n]}var hv=class{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){let r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&wc(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}};var $S="start",z2="close",G2="pLPCommand",q2="pRTLPCB",x0="id",O0="pw",P0="ser",K2="cb",Y2="seg",Q2="ts",Z2="d",J2="dframe",L0=1870,F0=30,X2=L0-F0,eV=25e3,tV=3e4,pv=class t{constructor(e,n,r,i,o,s,a){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=o,this.transportSessionId=s,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Cc(e),this.stats_=Zv(n),this.urlFn=c=>(this.appCheckToken&&(c[dv]=this.appCheckToken),k0(n,M0,c))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new hv(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(tV)),P2(()=>{if(this.isClosed_)return;this.scriptTagHolder=new gv((...o)=>{let[s,a,c,l,u]=o;if(this.incrementIncomingBytes_(o),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,s===$S)this.id=a,this.password=c;else if(s===z2)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+s)},(...o)=>{let[s,a]=o;this.incrementIncomingBytes_(o),this.myPacketOrderer.handleResponse(s,a)},()=>{this.onClosed_()},this.urlFn);let r={};r[$S]="t",r[P0]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[K2]=this.scriptTagHolder.uniqueCallbackIdentifier),r[w0]=cf,this.transportSessionId&&(r[b0]=this.transportSessionId),this.lastSessionId&&(r[A0]=this.lastSessionId),this.applicationId&&(r[R0]=this.applicationId),this.appCheckToken&&(r[dv]=this.appCheckToken),typeof location<"u"&&location.hostname&&S0.test(location.hostname)&&(r[D0]=T0);let i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){t.forceAllow_=!0}static forceDisallow(){t.forceDisallow_=!0}static isAvailable(){return bn()?!1:t.forceAllow_?!0:!t.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!F2()&&!U2()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){let n=xe(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);let r=D_(n),i=I0(r,X2);for(let o=0;o<i.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[o]),this.curSegmentNum++}addDisconnectPingFrame(e,n){if(bn())return;this.myDisconnFrame=document.createElement("iframe");let r={};r[J2]="t",r[x0]=e,r[O0]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){let n=xe(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}},gv=class t{constructor(e,n,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0,bn())this.commandCB=e,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=k2(),window[G2+this.uniqueCallbackIdentifier]=e,window[q2+this.uniqueCallbackIdentifier]=n,this.myIFrame=t.createIFrame_();let o="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(o='<script>document.domain="'+document.domain+'";<\/script>');let s="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(s),this.myIFrame.doc.close()}catch(a){Ve("frame writing exception"),a.stack&&Ve(a.stack),Ve(a)}}}static createIFrame_(){let e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||Ve("No IE domain setting required")}catch{let r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));let e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;let e={};e[x0]=this.myID,e[O0]=this.myPW,e[P0]=this.currentSerial;let n=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+F0+r.length<=L0;){let s=this.pendingSegs.shift();r=r+"&"+Y2+i+"="+s.seg+"&"+Q2+i+"="+s.ts+"&"+Z2+i+"="+s.d,i++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);let r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},i=setTimeout(r,Math.floor(eV)),o=()=>{clearTimeout(i),r()};this.addTag(e,o)}addTag(e,n){bn()?this.doNodeLongPoll(e,n):setTimeout(()=>{try{if(!this.sendNewPolls)return;let r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){let i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{Ve("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}};var nV=16384,rV=45e3,uf=null;typeof MozWebSocket<"u"?uf=MozWebSocket:typeof WebSocket<"u"&&(uf=WebSocket);var uc=(()=>{class t{constructor(n,r,i,o,s,a,c){this.connId=n,this.applicationId=i,this.appCheckToken=o,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Cc(this.connId),this.stats_=Zv(r),this.connURL=t.connectionURL_(r,a,c,o,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(n,r,i,o,s){let a={};return a[w0]=cf,!bn()&&typeof location<"u"&&location.hostname&&S0.test(location.hostname)&&(a[D0]=T0),r&&(a[b0]=r),i&&(a[A0]=i),o&&(a[dv]=o),s&&(a[R0]=s),k0(n,N0,a)}open(n,r){this.onDisconnect=r,this.onMessage=n,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Ni.set("previous_websocket_failure",!0);try{let i;if(bn()){let o=this.nodeAdmin?"AdminNode":"Node";i={headers:{"User-Agent":`Firebase/${cf}/${Yv}/${process.platform}/${o}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);let s=process.env,a=this.connURL.indexOf("wss://")===0?s.HTTPS_PROXY||s.https_proxy:s.HTTP_PROXY||s.http_proxy;a&&(i.proxy={origin:a})}this.mySock=new uf(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");let o=i.message||i.data;o&&this.log_(o),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");let o=i.message||i.data;o&&this.log_(o),this.onClosed_()}}start(){}static forceDisallow(){t.forceDisallow_=!0}static isAvailable(){let n=!1;if(typeof navigator<"u"&&navigator.userAgent){let r=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(r);i&&i.length>1&&parseFloat(i[1])<4.4&&(n=!0)}return!n&&uf!==null&&!t.forceDisallow_}static previouslyFailed(){return Ni.isInMemoryStorage||Ni.get("previous_websocket_failure")===!0}markConnectionHealthy(){Ni.remove("previous_websocket_failure")}appendFrame_(n){if(this.frames.push(n),this.frames.length===this.totalFrames){let r=this.frames.join("");this.frames=null;let i=Zo(r);this.onMessage(i)}}handleNewFrameCount_(n){this.totalFrames=n,this.frames=[]}extractFrameCount_(n){if(I(this.frames===null,"We already have a frame buffer"),n.length<=6){let r=Number(n);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),n}handleIncomingFrame(n){if(this.mySock===null)return;let r=n.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(r);else{let i=this.extractFrameCount_(r);i!==null&&this.appendFrame_(i)}}send(n){this.resetKeepAlive();let r=xe(n);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);let i=I0(r,nV);i.length>1&&this.sendString_(String(i.length));for(let o=0;o<i.length;o++)this.sendString_(i[o])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(rV))}sendString_(n){try{this.mySock.send(n)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4;return t})(),iV=(()=>{class t{static get ALL_TRANSPORTS(){return[pv,uc]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(n){this.initTransports_(n)}initTransports_(n){let r=uc&&uc.isAvailable(),i=r&&!uc.previouslyFailed();if(n.webSocketOnly&&(r||gt("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[uc];else{let o=this.transports_=[];for(let s of t.ALL_TRANSPORTS)s&&s.isAvailable()&&o.push(s);t.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}t.globalTransportInitialized_=!1;return t})(),oV=6e4,sV=5e3,aV=10*1024,cV=100*1024,ev="t",WS="d",lV="s",zS="r",uV="e",GS="o",qS="a",KS="n",YS="p",dV="h",mv=class{constructor(e,n,r,i,o,s,a,c,l,u){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=o,this.onMessage_=s,this.onReady_=a,this.onDisconnect_=c,this.onKill_=l,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Cc("c:"+this.id+":"),this.transportManager_=new iV(n),this.log_("Connection created"),this.start_()}start_(){let e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));let i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=pc(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>cV?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>aV?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){let n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(ev in e){let n=e[ev];n===qS?this.upgradeIfSecondaryHealthy_():n===zS?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===GS&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){let n=lc("t",e),r=lc("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:YS,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:qS,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:KS,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){let n=lc("t",e),r=lc("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){let n=lc(ev,e);if(WS in e){let r=e[WS];if(n===dV){let i=E({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(n===KS){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===lV?this.onConnectionShutdown_(r):n===zS?this.onReset_(r):n===uV?cv("Server Error: "+r):n===GS?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):cv("Unknown control packet command: "+n)}}onHandshake_(e){let n=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),cf!==r&&gt("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){let e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),pc(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(oV))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):pc(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(sV))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:YS,d:{}}}))}onSecondaryConnectionLost_(){let e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Ni.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}};var df=class{put(e,n,r,i){}merge(e,n,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}};var ff=class{constructor(e){this.allowedEvents_=e,this.listeners_={},I(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){let r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});let i=this.getInitialEvent(e);i&&n.apply(r,i)}off(e,n,r){this.validateEventType_(e);let i=this.listeners_[e]||[];for(let o=0;o<i.length;o++)if(i[o].callback===n&&(!r||r===i[o].context)){i.splice(o,1);return}}validateEventType_(e){I(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}};var hf=class t extends ff{static getInstance(){return new t}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!S_()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(e){return I(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}};var QS=32,ZS=768,se=class{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}};function oe(){return new se("")}function z(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function Cr(t){return t.pieces_.length-t.pieceNum_}function ue(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new se(t.pieces_,e)}function U0(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function fV(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function j0(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function B0(t){if(t.pieceNum_>=t.pieces_.length)return null;let e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new se(e,0)}function Oe(t,e){let n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof se)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{let r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&n.push(r[i])}return new se(n,0)}function W(t){return t.pieceNum_>=t.pieces_.length}function At(t,e){let n=z(t),r=z(e);if(n===null)return e;if(n===r)return At(ue(t),ue(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function V0(t,e){if(Cr(t)!==Cr(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function Qt(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(Cr(t)>Cr(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}var _v=class{constructor(e,n){this.errorPrefix_=n,this.parts_=j0(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=tc(this.parts_[r]);H0(this)}};function hV(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=tc(e),H0(t)}function pV(t){let e=t.parts_.pop();t.byteLength_-=tc(e),t.parts_.length>0&&(t.byteLength_-=1)}function H0(t){if(t.byteLength_>ZS)throw new Error(t.errorPrefix_+"has a key path longer than "+ZS+" bytes ("+t.byteLength_+").");if(t.parts_.length>QS)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+QS+") or object contains a cycle "+Ri(t))}function Ri(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}var vv=class t extends ff{static getInstance(){return new t}constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{let r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}getInitialEvent(e){return I(e==="visible","Unknown event type: "+e),[this.visible_]}};var dc=1e3,gV=300*1e3,JS=30*1e3,mV=1.3,_V=3e4,vV="server_kill",XS=3,Jv=(()=>{class t extends df{constructor(n,r,i,o,s,a,c,l){if(super(),this.repoInfo_=n,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=o,this.onServerInfoUpdate_=s,this.authTokenProvider_=a,this.appCheckTokenProvider_=c,this.authOverride_=l,this.id=t.nextPersistentConnectionId_++,this.log_=Cc("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=dc,this.maxReconnectDelay_=gV,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l&&!bn())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");vv.getInstance().on("visible",this.onVisible_,this),n.host.indexOf("fblocal")===-1&&hf.getInstance().on("online",this.onOnline_,this)}sendRequest(n,r,i){let o=++this.requestNumber_,s={r:o,a:n,b:r};this.log_(xe(s)),I(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(s),i&&(this.requestCBHash_[o]=i)}get(n){this.initConnection_();let r=new Ii,o={action:"g",request:{p:n._path.toString(),q:n._queryObject},onComplete:a=>{let c=a.d;a.s==="ok"?r.resolve(c):r.reject(c)}};this.outstandingGets_.push(o),this.outstandingGetCount_++;let s=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(s),r.promise}listen(n,r,i,o){this.initConnection_();let s=n._queryIdentifier,a=n._path.toString();this.log_("Listen called for "+a+" "+s),this.listens.has(a)||this.listens.set(a,new Map),I(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"listen() called for non-default but complete query"),I(!this.listens.get(a).has(s),"listen() called twice for same path/queryId.");let c={onComplete:o,hashFn:r,query:n,tag:i};this.listens.get(a).set(s,c),this.connected_&&this.sendListen_(c)}sendGet_(n){let r=this.outstandingGets_[n];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[n],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(n){let r=n.query,i=r._path.toString(),o=r._queryIdentifier;this.log_("Listen on "+i+" for "+o);let s={p:i},a="q";n.tag&&(s.q=r._queryObject,s.t=n.tag),s.h=n.hashFn(),this.sendRequest(a,s,c=>{let l=c.d,u=c.s;t.warnOnListenWarnings_(l,r),(this.listens.get(i)&&this.listens.get(i).get(o))===n&&(this.log_("listen response",c),u!=="ok"&&this.removeListen_(i,o),n.onComplete&&n.onComplete(u,l))})}static warnOnListenWarnings_(n,r){if(n&&typeof n=="object"&&Dn(n,"w")){let i=bi(n,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){let o='".indexOn": "'+r._queryParams.getIndex().toString()+'"',s=r._path.toString();gt(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${o} at ${s} to your security rules for better performance.`)}}}refreshAuthToken(n){this.authToken_=n,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(n)}reduceReconnectDelayIfAdminCredential_(n){(n&&n.length===40||aS(n))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=JS)}refreshAppCheckToken(n){this.appCheckToken_=n,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){let n=this.authToken_,r=sS(n)?"auth":"gauth",i={cred:n};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(r,i,o=>{let s=o.s,a=o.d||"error";this.authToken_===n&&(s==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(s,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},n=>{let r=n.s,i=n.d||"error";r==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(n,r){let i=n._path.toString(),o=n._queryIdentifier;this.log_("Unlisten called for "+i+" "+o),I(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,o)&&this.connected_&&this.sendUnlisten_(i,o,n._queryObject,r)}sendUnlisten_(n,r,i,o){this.log_("Unlisten on "+n+" for "+r);let s={p:n},a="n";o&&(s.q=i,s.t=o),this.sendRequest(a,s)}onDisconnectPut(n,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"o",data:r,onComplete:i})}onDisconnectMerge(n,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"om",data:r,onComplete:i})}onDisconnectCancel(n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",n,null,r):this.onDisconnectRequestQueue_.push({pathString:n,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(n,r,i,o){let s={p:r,d:i};this.log_("onDisconnect "+n,s),this.sendRequest(n,s,a=>{o&&setTimeout(()=>{o(a.s,a.d)},Math.floor(0))})}put(n,r,i,o){this.putInternal("p",n,r,i,o)}merge(n,r,i,o){this.putInternal("m",n,r,i,o)}putInternal(n,r,i,o,s){this.initConnection_();let a={p:r,d:i};s!==void 0&&(a.h=s),this.outstandingPuts_.push({action:n,request:a,onComplete:o}),this.outstandingPutCount_++;let c=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(c):this.log_("Buffering put: "+r)}sendPut_(n){let r=this.outstandingPuts_[n].action,i=this.outstandingPuts_[n].request,o=this.outstandingPuts_[n].onComplete;this.outstandingPuts_[n].queued=this.connected_,this.sendRequest(r,i,s=>{this.log_(r+" response",s),delete this.outstandingPuts_[n],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),o&&o(s.s,s.d)})}reportStats(n){if(this.connected_){let r={c:n};this.log_("reportStats",r),this.sendRequest("s",r,i=>{if(i.s!=="ok"){let s=i.d;this.log_("reportStats","Error sending stats: "+s)}})}}onDataMessage_(n){if("r"in n){this.log_("from server: "+xe(n));let r=n.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(n.b))}else{if("error"in n)throw"A server-side error has occurred: "+n.error;"a"in n&&this.onDataPush_(n.a,n.b)}}onDataPush_(n,r){this.log_("handleServerMessage",n,r),n==="d"?this.onDataUpdate_(r.p,r.d,!1,r.t):n==="m"?this.onDataUpdate_(r.p,r.d,!0,r.t):n==="c"?this.onListenRevoked_(r.p,r.q):n==="ac"?this.onAuthRevoked_(r.s,r.d):n==="apc"?this.onAppCheckRevoked_(r.s,r.d):n==="sd"?this.onSecurityDebugPacket_(r):cv("Unrecognized action received from server: "+xe(n)+`
Are you using the latest client?`)}onReady_(n,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(n),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(n){I(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(n))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(n){n&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=dc,this.realtime_||this.scheduleConnect_(0)),this.visible_=n}onOnline_(n){n?(this.log_("Browser went online."),this.reconnectDelay_=dc,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>_V&&(this.reconnectDelay_=dc),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());let n=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_),r=Math.max(0,this.reconnectDelay_-n);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*mV)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;let n=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),o=this.id+":"+t.nextConnectionId_++,s=this.lastSessionId,a=!1,c=null,l=function(){c?c.close():(a=!0,i())},u=function(f){I(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(f)};this.realtime_={close:l,sendRequest:u};let d=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{let[f,h]=await Promise.all([this.authTokenProvider_.getToken(d),this.appCheckTokenProvider_.getToken(d)]);a?Ve("getToken() completed but was canceled"):(Ve("getToken() completed. Creating connection."),this.authToken_=f&&f.accessToken,this.appCheckToken_=h&&h.token,c=new mv(o,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,n,r,i,p=>{gt(p+" ("+this.repoInfo_.toString()+")"),this.interrupt(vV)},s))}catch(f){this.log_("Failed to get token: "+f),a||(this.repoInfo_.nodeAdmin&&gt(f),l())}}}interrupt(n){Ve("Interrupting connection for reason: "+n),this.interruptReasons_[n]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(n){Ve("Resuming connection for reason: "+n),delete this.interruptReasons_[n],A_(this.interruptReasons_)&&(this.reconnectDelay_=dc,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(n){let r=n-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let n=0;n<this.outstandingPuts_.length;n++){let r=this.outstandingPuts_[n];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[n],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(n,r){let i;r?i=r.map(s=>Qv(s)).join("$"):i="default";let o=this.removeListen_(n,i);o&&o.onComplete&&o.onComplete("permission_denied")}removeListen_(n,r){let i=new se(n).toString(),o;if(this.listens.has(i)){let s=this.listens.get(i);o=s.get(r),s.delete(r),s.size===0&&this.listens.delete(i)}else o=void 0;return o}onAuthRevoked_(n,r){Ve("Auth token revoked: "+n+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(n==="invalid_token"||n==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=XS&&(this.reconnectDelay_=JS,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(n,r){Ve("App check token revoked: "+n+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(n==="invalid_token"||n==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=XS&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(n){this.securityDebugCallback_?this.securityDebugCallback_(n):"msg"in n&&console.log("FIREBASE: "+n.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(let n of this.listens.values())for(let r of n.values())this.sendListen_(r);for(let n=0;n<this.outstandingPuts_.length;n++)this.outstandingPuts_[n]&&this.sendPut_(n);for(;this.onDisconnectRequestQueue_.length;){let n=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(n.action,n.pathString,n.data,n.onComplete)}for(let n=0;n<this.outstandingGets_.length;n++)this.outstandingGets_[n]&&this.sendGet_(n)}sendConnectStats_(){let n={},r="js";bn()&&(this.repoInfo_.nodeAdmin?r="admin_node":r="node"),n["sdk."+r+"."+Yv.replace(/\./g,"-")]=1,S_()?n["framework.cordova"]=1:nS()&&(n["framework.reactnative"]=1),this.reportStats(n)}shouldReconnect_(){let n=hf.getInstance().currentlyOnline();return A_(this.interruptReasons_)&&n}}t.nextPersistentConnectionId_=0,t.nextConnectionId_=0;return t})(),G=class t{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new t(e,n)}};var as=class{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){let r=new G(ss,e),i=new G(ss,n);return this.compare(r,i)!==0}minPost(){return G.MIN}};var af,pf=class extends as{static get __EMPTY_NODE(){return af}static set __EMPTY_NODE(e){af=e}compare(e,n){return hs(e.name,n.name)}isDefinedOn(e){throw wi("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return G.MIN}maxPost(){return new G(ki,af)}makePost(e,n){return I(typeof e=="string","KeyIndex indexValue must always be a string."),new G(e,af)}toString(){return".key"}},os=new pf;var ns=class{constructor(e,n,r,i,o=null){this.isReverse_=i,this.resultGenerator_=o,this.nodeStack_=[];let s=1;for(;!e.isEmpty();)if(e=e,s=n?r(e.key,n):1,i&&(s*=-1),s<0)this.isReverse_?e=e.left:e=e.right;else if(s===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}},Yt=(()=>{class t{constructor(n,r,i,o,s){this.key=n,this.value=r,this.color=i??t.RED,this.left=o??Rt.EMPTY_NODE,this.right=s??Rt.EMPTY_NODE}copy(n,r,i,o,s){return new t(n??this.key,r??this.value,i??this.color,o??this.left,s??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(n){return this.left.inorderTraversal(n)||!!n(this.key,this.value)||this.right.inorderTraversal(n)}reverseTraversal(n){return this.right.reverseTraversal(n)||n(this.key,this.value)||this.left.reverseTraversal(n)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(n,r,i){let o=this,s=i(n,o.key);return s<0?o=o.copy(null,null,null,o.left.insert(n,r,i),null):s===0?o=o.copy(null,r,null,null,null):o=o.copy(null,null,null,null,o.right.insert(n,r,i)),o.fixUp_()}removeMin_(){if(this.left.isEmpty())return Rt.EMPTY_NODE;let n=this;return!n.left.isRed_()&&!n.left.left.isRed_()&&(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.removeMin_(),null),n.fixUp_()}remove(n,r){let i,o;if(i=this,r(n,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(n,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),r(n,i.key)===0){if(i.right.isEmpty())return Rt.EMPTY_NODE;o=i.right.min_(),i=i.copy(o.key,o.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(n,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let n=this;return n.right.isRed_()&&!n.left.isRed_()&&(n=n.rotateLeft_()),n.left.isRed_()&&n.left.left.isRed_()&&(n=n.rotateRight_()),n.left.isRed_()&&n.right.isRed_()&&(n=n.colorFlip_()),n}moveRedLeft_(){let n=this.colorFlip_();return n.right.left.isRed_()&&(n=n.copy(null,null,null,null,n.right.rotateRight_()),n=n.rotateLeft_(),n=n.colorFlip_()),n}moveRedRight_(){let n=this.colorFlip_();return n.left.left.isRed_()&&(n=n.rotateRight_(),n=n.colorFlip_()),n}rotateLeft_(){let n=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,n,null)}rotateRight_(){let n=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,n)}colorFlip_(){let n=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,n,r)}checkMaxDepth_(){let n=this.check_();return Math.pow(2,n)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");let n=this.left.check_();if(n!==this.right.check_())throw new Error("Black depths differ");return n+(this.isRed_()?0:1)}}return t.RED=!0,t.BLACK=!1,t})(),yv=class{copy(e,n,r,i,o){return this}insert(e,n,r){return new Yt(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}},Rt=class t{constructor(e,n=t.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new t(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Yt.BLACK,null,null))}remove(e){return new t(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Yt.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,i=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new ns(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new ns(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new ns(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new ns(this.root_,null,this.comparator_,!0,e)}};Rt.EMPTY_NODE=new yv;function yV(t,e){return hs(t.name,e.name)}function Xv(t,e){return hs(t,e)}var Ev;function EV(t){Ev=t}var $0=function(t){return typeof t=="number"?"number:"+C0(t):"string:"+t},W0=function(t){if(t.isLeafNode()){let e=t.val();I(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Dn(e,".sv"),"Priority must be a string or number.")}else I(t===Ev||t.isEmpty(),"priority of unexpected type.");I(t===Ev||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};var e0,cs=(()=>{class t{static set __childrenNodeConstructor(n){e0=n}static get __childrenNodeConstructor(){return e0}constructor(n,r=t.__childrenNodeConstructor.EMPTY_NODE){this.value_=n,this.priorityNode_=r,this.lazyHash_=null,I(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),W0(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(n){return new t(this.value_,n)}getImmediateChild(n){return n===".priority"?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE}getChild(n){return W(n)?this:z(n)===".priority"?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(n,r){return null}updateImmediateChild(n,r){return n===".priority"?this.updatePriority(r):r.isEmpty()&&n!==".priority"?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(n,r).updatePriority(this.priorityNode_)}updateChild(n,r){let i=z(n);return i===null?r:r.isEmpty()&&i!==".priority"?this:(I(i!==".priority"||Cr(n)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(ue(n),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(n,r){return!1}val(n){return n&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let n="";this.priorityNode_.isEmpty()||(n+="priority:"+$0(this.priorityNode_.val())+":");let r=typeof this.value_;n+=r+":",r==="number"?n+=C0(this.value_):n+=this.value_,this.lazyHash_=y0(n)}return this.lazyHash_}getValue(){return this.value_}compareTo(n){return n===t.__childrenNodeConstructor.EMPTY_NODE?1:n instanceof t.__childrenNodeConstructor?-1:(I(n.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(n))}compareToLeafNode_(n){let r=typeof n.value_,i=typeof this.value_,o=t.VALUE_TYPE_ORDER.indexOf(r),s=t.VALUE_TYPE_ORDER.indexOf(i);return I(o>=0,"Unknown leaf type: "+r),I(s>=0,"Unknown leaf type: "+i),o===s?i==="object"?0:this.value_<n.value_?-1:this.value_===n.value_?0:1:s-o}withIndex(){return this}isIndexed(){return!0}equals(n){if(n===this)return!0;if(n.isLeafNode()){let r=n;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}else return!1}}t.VALUE_TYPE_ORDER=["object","boolean","number","string"];return t})(),z0,G0;function IV(t){z0=t}function CV(t){G0=t}var Iv=class extends as{compare(e,n){let r=e.node.getPriority(),i=n.node.getPriority(),o=r.compareTo(i);return o===0?hs(e.name,n.name):o}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return G.MIN}maxPost(){return new G(ki,new cs("[PRIORITY-POST]",G0))}makePost(e,n){let r=z0(e);return new G(n,new cs("[PRIORITY-POST]",r))}toString(){return".priority"}},$e=new Iv;var wV=Math.log(2),Cv=class{constructor(e){let n=o=>parseInt(Math.log(o)/wV,10),r=o=>parseInt(Array(o+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;let i=r(this.count);this.bits_=e+1&i}nextBitIsOne(){let e=!(this.bits_&1<<this.current_);return this.current_--,e}},gf=function(t,e,n,r){t.sort(e);let i=function(c,l){let u=l-c,d,f;if(u===0)return null;if(u===1)return d=t[c],f=n?n(d):d,new Yt(f,d.node,Yt.BLACK,null,null);{let h=parseInt(u/2,10)+c,p=i(c,h),_=i(h+1,l);return d=t[h],f=n?n(d):d,new Yt(f,d.node,Yt.BLACK,p,_)}},o=function(c){let l=null,u=null,d=t.length,f=function(p,_){let C=d-p,S=d;d-=p;let le=i(C+1,S),_e=t[C],tn=n?n(_e):_e;h(new Yt(tn,_e.node,_,null,le))},h=function(p){l?(l.left=p,l=p):(u=p,l=p)};for(let p=0;p<c.count;++p){let _=c.nextBitIsOne(),C=Math.pow(2,c.count-(p+1));_?f(C,Yt.BLACK):(f(C,Yt.BLACK),f(C,Yt.RED))}return u},s=new Cv(t.length),a=o(s);return new Rt(r||e,a)};var tv,ts={},ls=class t{static get Default(){return I(ts&&$e,"ChildrenNode.ts has not been loaded"),tv=tv||new t({".priority":ts},{".priority":$e}),tv}constructor(e,n){this.indexes_=e,this.indexSet_=n}get(e){let n=bi(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof Rt?n:null}hasIndex(e){return Dn(this.indexSet_,e.toString())}addIndex(e,n){I(e!==os,"KeyIndex always exists and isn't meant to be added to the IndexMap.");let r=[],i=!1,o=n.getIterator(G.Wrap),s=o.getNext();for(;s;)i=i||e.isDefinedOn(s.node),r.push(s),s=o.getNext();let a;i?a=gf(r,e.getCompare()):a=ts;let c=e.toString(),l=E({},this.indexSet_);l[c]=e;let u=E({},this.indexes_);return u[c]=a,new t(u,l)}addToIndexes(e,n){let r=ec(this.indexes_,(i,o)=>{let s=bi(this.indexSet_,o);if(I(s,"Missing index implementation for "+o),i===ts)if(s.isDefinedOn(e.node)){let a=[],c=n.getIterator(G.Wrap),l=c.getNext();for(;l;)l.name!==e.name&&a.push(l),l=c.getNext();return a.push(e),gf(a,s.getCompare())}else return ts;else{let a=n.get(e.name),c=i;return a&&(c=c.remove(new G(e.name,a))),c.insert(e,e.node)}});return new t(r,this.indexSet_)}removeFromIndexes(e,n){let r=ec(this.indexes_,i=>{if(i===ts)return i;{let o=n.get(e.name);return o?i.remove(new G(e.name,o)):i}});return new t(r,this.indexSet_)}};var fc,he=(()=>{class t{static get EMPTY_NODE(){return fc||(fc=new t(new Rt(Xv),null,ls.Default))}constructor(n,r,i){this.children_=n,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&W0(this.priorityNode_),this.children_.isEmpty()&&I(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||fc}updatePriority(n){return this.children_.isEmpty()?this:new t(this.children_,n,this.indexMap_)}getImmediateChild(n){if(n===".priority")return this.getPriority();{let r=this.children_.get(n);return r===null?fc:r}}getChild(n){let r=z(n);return r===null?this:this.getImmediateChild(r).getChild(ue(n))}hasChild(n){return this.children_.get(n)!==null}updateImmediateChild(n,r){if(I(r,"We should always be passing snapshot nodes"),n===".priority")return this.updatePriority(r);{let i=new G(n,r),o,s;r.isEmpty()?(o=this.children_.remove(n),s=this.indexMap_.removeFromIndexes(i,this.children_)):(o=this.children_.insert(n,r),s=this.indexMap_.addToIndexes(i,this.children_));let a=o.isEmpty()?fc:this.priorityNode_;return new t(o,a,s)}}updateChild(n,r){let i=z(n);if(i===null)return r;{I(z(n)!==".priority"||Cr(n)===1,".priority must be the last token in a path");let o=this.getImmediateChild(i).updateChild(ue(n),r);return this.updateImmediateChild(i,o)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(n){if(this.isEmpty())return null;let r={},i=0,o=0,s=!0;if(this.forEachChild($e,(a,c)=>{r[a]=c.val(n),i++,s&&t.INTEGER_REGEXP_.test(a)?o=Math.max(o,Number(a)):s=!1}),!n&&s&&o<2*i){let a=[];for(let c in r)a[c]=r[c];return a}else return n&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(this.lazyHash_===null){let n="";this.getPriority().isEmpty()||(n+="priority:"+$0(this.getPriority().val())+":"),this.forEachChild($e,(r,i)=>{let o=i.hash();o!==""&&(n+=":"+r+":"+o)}),this.lazyHash_=n===""?"":y0(n)}return this.lazyHash_}getPredecessorChildName(n,r,i){let o=this.resolveIndex_(i);if(o){let s=o.getPredecessorKey(new G(n,r));return s?s.name:null}else return this.children_.getPredecessorKey(n)}getFirstChildName(n){let r=this.resolveIndex_(n);if(r){let i=r.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(n){let r=this.getFirstChildName(n);return r?new G(r,this.children_.get(r)):null}getLastChildName(n){let r=this.resolveIndex_(n);if(r){let i=r.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(n){let r=this.getLastChildName(n);return r?new G(r,this.children_.get(r)):null}forEachChild(n,r){let i=this.resolveIndex_(n);return i?i.inorderTraversal(o=>r(o.name,o.node)):this.children_.inorderTraversal(r)}getIterator(n){return this.getIteratorFrom(n.minPost(),n)}getIteratorFrom(n,r){let i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(n,o=>o);{let o=this.children_.getIteratorFrom(n.name,G.Wrap),s=o.peek();for(;s!=null&&r.compare(s,n)<0;)o.getNext(),s=o.peek();return o}}getReverseIterator(n){return this.getReverseIteratorFrom(n.maxPost(),n)}getReverseIteratorFrom(n,r){let i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(n,o=>o);{let o=this.children_.getReverseIteratorFrom(n.name,G.Wrap),s=o.peek();for(;s!=null&&r.compare(s,n)>0;)o.getNext(),s=o.peek();return o}}compareTo(n){return this.isEmpty()?n.isEmpty()?0:-1:n.isLeafNode()||n.isEmpty()?1:n===bc?-1:0}withIndex(n){if(n===os||this.indexMap_.hasIndex(n))return this;{let r=this.indexMap_.addIndex(n,this.children_);return new t(this.children_,this.priorityNode_,r)}}isIndexed(n){return n===os||this.indexMap_.hasIndex(n)}equals(n){if(n===this)return!0;if(n.isLeafNode())return!1;{let r=n;if(this.getPriority().equals(r.getPriority()))if(this.children_.count()===r.children_.count()){let i=this.getIterator($e),o=r.getIterator($e),s=i.getNext(),a=o.getNext();for(;s&&a;){if(s.name!==a.name||!s.node.equals(a.node))return!1;s=i.getNext(),a=o.getNext()}return s===null&&a===null}else return!1;else return!1}}resolveIndex_(n){return n===os?null:this.indexMap_.get(n.toString())}}return t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t})(),wv=class extends he{constructor(){super(new Rt(Xv),he.EMPTY_NODE,ls.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return he.EMPTY_NODE}isEmpty(){return!1}},bc=new wv;Object.defineProperties(G,{MIN:{value:new G(ss,he.EMPTY_NODE)},MAX:{value:new G(ki,bc)}});pf.__EMPTY_NODE=he.EMPTY_NODE;cs.__childrenNodeConstructor=he;EV(bc);CV(bc);var bV=!0;function He(t,e=null){if(t===null)return he.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),I(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){let n=t;return new cs(n,He(e))}if(!(t instanceof Array)&&bV){let n=[],r=!1;if(Nt(t,(s,a)=>{if(s.substring(0,1)!=="."){let c=He(a);c.isEmpty()||(r=r||!c.getPriority().isEmpty(),n.push(new G(s,c)))}}),n.length===0)return he.EMPTY_NODE;let o=gf(n,yV,s=>s.name,Xv);if(r){let s=gf(n,$e.getCompare());return new he(o,He(e),new ls({".priority":s},{".priority":$e}))}else return new he(o,He(e),ls.Default)}else{let n=he.EMPTY_NODE;return Nt(t,(r,i)=>{if(Dn(t,r)&&r.substring(0,1)!=="."){let o=He(i);(o.isLeafNode()||!o.isEmpty())&&(n=n.updateImmediateChild(r,o))}}),n.updatePriority(He(e))}}IV(He);var bv=class extends as{constructor(e){super(),this.indexPath_=e,I(!W(e)&&z(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){let r=this.extractChild(e.node),i=this.extractChild(n.node),o=r.compareTo(i);return o===0?hs(e.name,n.name):o}makePost(e,n){let r=He(e),i=he.EMPTY_NODE.updateChild(this.indexPath_,r);return new G(n,i)}maxPost(){let e=he.EMPTY_NODE.updateChild(this.indexPath_,bc);return new G(ki,e)}toString(){return j0(this.indexPath_,0).join("/")}};var Dv=class extends as{compare(e,n){let r=e.node.compareTo(n.node);return r===0?hs(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return G.MIN}maxPost(){return G.MAX}makePost(e,n){let r=He(e);return new G(n,r)}toString(){return".value"}},DV=new Dv;function TV(t){return{type:"value",snapshotNode:t}}function SV(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function AV(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function t0(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function RV(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}var Tv=class t{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=$e}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return I(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return I(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:ss}hasEnd(){return this.endSet_}getIndexEndValue(){return I(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return I(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:ki}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return I(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===$e}copy(){let e=new t;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}};function n0(t){let e={};if(t.isDefault())return e;let n;if(t.index_===$e?n="$priority":t.index_===DV?n="$value":t.index_===os?n="$key":(I(t.index_ instanceof bv,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=xe(n),t.startSet_){let r=t.startAfterSet_?"startAfter":"startAt";e[r]=xe(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+xe(t.indexStartName_))}if(t.endSet_){let r=t.endBeforeSet_?"endBefore":"endAt";e[r]=xe(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+xe(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function r0(t){let e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==$e&&(e.i=t.index_.toString()),e}var Sv=class t extends df{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(I(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,n,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=Cc("p:rest:"),this.listens_={}}listen(e,n,r,i){let o=e._path.toString();this.log_("Listen called for "+o+" "+e._queryIdentifier);let s=t.getListenId_(e,r),a={};this.listens_[s]=a;let c=n0(e._queryParams);this.restRequest_(o+".json",c,(l,u)=>{let d=u;if(l===404&&(d=null,l=null),l===null&&this.onDataUpdate_(o,d,!1,r),bi(this.listens_,s)===a){let f;l?l===401?f="permission_denied":f="rest_error:"+l:f="ok",i(f,null)}})}unlisten(e,n){let r=t.getListenId_(e,n);delete this.listens_[r]}get(e){let n=n0(e._queryParams),r=e._path.toString(),i=new Ii;return this.restRequest_(r+".json",n,(o,s)=>{let a=s;o===404&&(a=null,o=null),o===null?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,o])=>{i&&i.accessToken&&(n.auth=i.accessToken),o&&o.token&&(n.ac=o.token);let s=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+cS(n);this.log_("Sending REST request for "+s);let a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+s+" received. status:",a.status,"response:",a.responseText);let c=null;if(a.status>=200&&a.status<300){try{c=Zo(a.responseText)}catch{gt("Failed to parse JSON response for "+s+": "+a.responseText)}r(null,c)}else a.status!==401&&a.status!==404&&gt("Got unsuccessful REST response for "+s+" Status: "+a.status),r(a.status);r=null}},a.open("GET",s,!0),a.send()})}};var Av=class{constructor(){this.rootNode_=he.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}};function mf(){return{value:null,children:new Map}}function q0(t,e,n){if(W(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{let r=z(e);t.children.has(r)||t.children.set(r,mf());let i=t.children.get(r);e=ue(e),q0(i,e,n)}}function Rv(t,e,n){t.value!==null?n(e,t.value):NV(t,(r,i)=>{let o=new se(e.toString()+"/"+r);Rv(i,o,n)})}function NV(t,e){t.children.forEach((n,r)=>{e(r,n)})}var Nv=class{constructor(e){this.collection_=e,this.last_=null}get(){let e=this.collection_.get(),n=E({},e);return this.last_&&Nt(this.last_,(r,i)=>{n[r]=n[r]-i}),this.last_=e,n}};var i0=10*1e3,MV=30*1e3,kV=300*1e3,Mv=class{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new Nv(e);let r=i0+(MV-i0)*Math.random();pc(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){let e=this.statsListener_.get(),n={},r=!1;Nt(e,(i,o)=>{o>0&&Dn(this.statsToReport_,i)&&(n[i]=o,r=!0)}),r&&this.server_.reportStats(n),pc(this.reportStats_.bind(this),Math.floor(Math.random()*2*kV))}};var Gn=(function(t){return t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",t})(Gn||{});function K0(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function Y0(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function Q0(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}var kv=class t{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=Gn.ACK_USER_WRITE,this.source=K0()}operationForChild(e){if(W(this.path)){if(this.affectedTree.value!=null)return I(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{let n=this.affectedTree.subtree(new se(e));return new t(oe(),n,this.revert)}}else return I(z(this.path)===e,"operationForChild called for unrelated child."),new t(ue(this.path),this.affectedTree,this.revert)}};var us=class t{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=Gn.OVERWRITE}operationForChild(e){return W(this.path)?new t(this.source,oe(),this.snap.getImmediateChild(e)):new t(this.source,ue(this.path),this.snap)}};var _f=class t{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=Gn.MERGE}operationForChild(e){if(W(this.path)){let n=this.children.subtree(new se(e));return n.isEmpty()?null:n.value?new us(this.source,oe(),n.value):new t(this.source,oe(),n)}else return I(z(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new t(this.source,ue(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}};var vc=class{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(W(e))return this.isFullyInitialized()&&!this.filtered_;let n=z(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}};function xV(t,e,n,r){let i=[],o=[];return e.forEach(s=>{s.type==="child_changed"&&t.index_.indexedValueChanged(s.oldSnap,s.snapshotNode)&&o.push(RV(s.childName,s.snapshotNode))}),hc(t,i,"child_removed",e,r,n),hc(t,i,"child_added",e,r,n),hc(t,i,"child_moved",o,r,n),hc(t,i,"child_changed",e,r,n),hc(t,i,"value",e,r,n),i}function hc(t,e,n,r,i,o){let s=r.filter(a=>a.type===n);s.sort((a,c)=>PV(t,a,c)),s.forEach(a=>{let c=OV(t,a,o);i.forEach(l=>{l.respondsTo(a.type)&&e.push(l.createEvent(c,t.query_))})})}function OV(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function PV(t,e,n){if(e.childName==null||n.childName==null)throw wi("Should only compare child_ events.");let r=new G(e.childName,e.snapshotNode),i=new G(n.childName,n.snapshotNode);return t.index_.compare(r,i)}function Z0(t,e){return{eventCache:t,serverCache:e}}function mc(t,e,n,r){return Z0(new vc(e,n,r),t.serverCache)}function J0(t,e,n,r){return Z0(t.eventCache,new vc(e,n,r))}function xv(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function xi(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}var nv,LV=()=>(nv||(nv=new Rt(L2)),nv),it=class t{static fromObject(e){let n=new t(null);return Nt(e,(r,i)=>{n=n.set(new se(r),i)}),n}constructor(e,n=LV()){this.value=e,this.children=n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:oe(),value:this.value};if(W(e))return null;{let r=z(e),i=this.children.get(r);if(i!==null){let o=i.findRootMostMatchingPathAndValue(ue(e),n);return o!=null?{path:Oe(new se(r),o.path),value:o.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(W(e))return this;{let n=z(e),r=this.children.get(n);return r!==null?r.subtree(ue(e)):new t(null)}}set(e,n){if(W(e))return new t(n,this.children);{let r=z(e),o=(this.children.get(r)||new t(null)).set(ue(e),n),s=this.children.insert(r,o);return new t(this.value,s)}}remove(e){if(W(e))return this.children.isEmpty()?new t(null):new t(null,this.children);{let n=z(e),r=this.children.get(n);if(r){let i=r.remove(ue(e)),o;return i.isEmpty()?o=this.children.remove(n):o=this.children.insert(n,i),this.value===null&&o.isEmpty()?new t(null):new t(this.value,o)}else return this}}get(e){if(W(e))return this.value;{let n=z(e),r=this.children.get(n);return r?r.get(ue(e)):null}}setTree(e,n){if(W(e))return n;{let r=z(e),o=(this.children.get(r)||new t(null)).setTree(ue(e),n),s;return o.isEmpty()?s=this.children.remove(r):s=this.children.insert(r,o),new t(this.value,s)}}fold(e){return this.fold_(oe(),e)}fold_(e,n){let r={};return this.children.inorderTraversal((i,o)=>{r[i]=o.fold_(Oe(e,i),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,oe(),n)}findOnPath_(e,n,r){let i=this.value?r(n,this.value):!1;if(i)return i;if(W(e))return null;{let o=z(e),s=this.children.get(o);return s?s.findOnPath_(ue(e),Oe(n,o),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,oe(),n)}foreachOnPath_(e,n,r){if(W(e))return this;{this.value&&r(n,this.value);let i=z(e),o=this.children.get(i);return o?o.foreachOnPath_(ue(e),Oe(n,i),r):new t(null)}}foreach(e){this.foreach_(oe(),e)}foreach_(e,n){this.children.inorderTraversal((r,i)=>{i.foreach_(Oe(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}};var Zt=class t{constructor(e){this.writeTree_=e}static empty(){return new t(new it(null))}};function _c(t,e,n){if(W(e))return new Zt(new it(n));{let r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){let i=r.path,o=r.value,s=At(i,e);return o=o.updateChild(s,n),new Zt(t.writeTree_.set(i,o))}else{let i=new it(n),o=t.writeTree_.setTree(e,i);return new Zt(o)}}}function o0(t,e,n){let r=t;return Nt(n,(i,o)=>{r=_c(r,Oe(e,i),o)}),r}function s0(t,e){if(W(e))return Zt.empty();{let n=t.writeTree_.setTree(e,new it(null));return new Zt(n)}}function Ov(t,e){return Oi(t,e)!=null}function Oi(t,e){let n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(At(n.path,e)):null}function a0(t){let e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild($e,(r,i)=>{e.push(new G(r,i))}):t.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&e.push(new G(r,i.value))}),e}function Ir(t,e){if(W(e))return t;{let n=Oi(t,e);return n!=null?new Zt(new it(n)):new Zt(t.writeTree_.subtree(e))}}function Pv(t){return t.writeTree_.isEmpty()}function ds(t,e){return X0(oe(),t.writeTree_,e)}function X0(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((i,o)=>{i===".priority"?(I(o.value!==null,"Priority writes must always be leaf nodes"),r=o.value):n=X0(Oe(t,i),o,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(Oe(t,".priority"),r)),n}}function eA(t,e){return oA(e,t)}function FV(t,e,n,r,i){I(r>t.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:i}),i&&(t.visibleWrites=_c(t.visibleWrites,e,n)),t.lastWriteId=r}function UV(t,e){for(let n=0;n<t.allWrites.length;n++){let r=t.allWrites[n];if(r.writeId===e)return r}return null}function jV(t,e){let n=t.allWrites.findIndex(a=>a.writeId===e);I(n>=0,"removeWrite called with nonexistent writeId.");let r=t.allWrites[n];t.allWrites.splice(n,1);let i=r.visible,o=!1,s=t.allWrites.length-1;for(;i&&s>=0;){let a=t.allWrites[s];a.visible&&(s>=n&&BV(a,r.path)?i=!1:Qt(r.path,a.path)&&(o=!0)),s--}if(i){if(o)return VV(t),!0;if(r.snap)t.visibleWrites=s0(t.visibleWrites,r.path);else{let a=r.children;Nt(a,c=>{t.visibleWrites=s0(t.visibleWrites,Oe(r.path,c))})}return!0}else return!1}function BV(t,e){if(t.snap)return Qt(t.path,e);for(let n in t.children)if(t.children.hasOwnProperty(n)&&Qt(Oe(t.path,n),e))return!0;return!1}function VV(t){t.visibleWrites=tA(t.allWrites,HV,oe()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function HV(t){return t.visible}function tA(t,e,n){let r=Zt.empty();for(let i=0;i<t.length;++i){let o=t[i];if(e(o)){let s=o.path,a;if(o.snap)Qt(n,s)?(a=At(n,s),r=_c(r,a,o.snap)):Qt(s,n)&&(a=At(s,n),r=_c(r,oe(),o.snap.getChild(a)));else if(o.children){if(Qt(n,s))a=At(n,s),r=o0(r,a,o.children);else if(Qt(s,n))if(a=At(s,n),W(a))r=o0(r,oe(),o.children);else{let c=bi(o.children,z(a));if(c){let l=c.getChild(ue(a));r=_c(r,oe(),l)}}}else throw wi("WriteRecord should have .snap or .children")}}return r}function nA(t,e,n,r,i){if(!r&&!i){let o=Oi(t.visibleWrites,e);if(o!=null)return o;{let s=Ir(t.visibleWrites,e);if(Pv(s))return n;if(n==null&&!Ov(s,oe()))return null;{let a=n||he.EMPTY_NODE;return ds(s,a)}}}else{let o=Ir(t.visibleWrites,e);if(!i&&Pv(o))return n;if(!i&&n==null&&!Ov(o,oe()))return null;{let s=function(l){return(l.visible||i)&&(!r||!~r.indexOf(l.writeId))&&(Qt(l.path,e)||Qt(e,l.path))},a=tA(t.allWrites,s,e),c=n||he.EMPTY_NODE;return ds(a,c)}}}function $V(t,e,n){let r=he.EMPTY_NODE,i=Oi(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild($e,(o,s)=>{r=r.updateImmediateChild(o,s)}),r;if(n){let o=Ir(t.visibleWrites,e);return n.forEachChild($e,(s,a)=>{let c=ds(Ir(o,new se(s)),a);r=r.updateImmediateChild(s,c)}),a0(o).forEach(s=>{r=r.updateImmediateChild(s.name,s.node)}),r}else{let o=Ir(t.visibleWrites,e);return a0(o).forEach(s=>{r=r.updateImmediateChild(s.name,s.node)}),r}}function WV(t,e,n,r,i){I(r||i,"Either existingEventSnap or existingServerSnap must exist");let o=Oe(e,n);if(Ov(t.visibleWrites,o))return null;{let s=Ir(t.visibleWrites,o);return Pv(s)?i.getChild(n):ds(s,i.getChild(n))}}function zV(t,e,n,r){let i=Oe(e,n),o=Oi(t.visibleWrites,i);if(o!=null)return o;if(r.isCompleteForChild(n)){let s=Ir(t.visibleWrites,i);return ds(s,r.getNode().getImmediateChild(n))}else return null}function GV(t,e){return Oi(t.visibleWrites,e)}function qV(t,e,n,r,i,o,s){let a,c=Ir(t.visibleWrites,e),l=Oi(c,oe());if(l!=null)a=l;else if(n!=null)a=ds(c,n);else return[];if(a=a.withIndex(s),!a.isEmpty()&&!a.isLeafNode()){let u=[],d=s.getCompare(),f=o?a.getReverseIteratorFrom(r,s):a.getIteratorFrom(r,s),h=f.getNext();for(;h&&u.length<i;)d(h,r)!==0&&u.push(h),h=f.getNext();return u}else return[]}function KV(){return{visibleWrites:Zt.empty(),allWrites:[],lastWriteId:-1}}function Lv(t,e,n,r){return nA(t.writeTree,t.treePath,e,n,r)}function rA(t,e){return $V(t.writeTree,t.treePath,e)}function c0(t,e,n,r){return WV(t.writeTree,t.treePath,e,n,r)}function vf(t,e){return GV(t.writeTree,Oe(t.treePath,e))}function YV(t,e,n,r,i,o){return qV(t.writeTree,t.treePath,e,n,r,i,o)}function ey(t,e,n){return zV(t.writeTree,t.treePath,e,n)}function iA(t,e){return oA(Oe(t.treePath,e),t.writeTree)}function oA(t,e){return{treePath:t,writeTree:e}}var Fv=class{constructor(){this.changeMap=new Map}trackChildChange(e){let n=e.type,r=e.childName;I(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),I(r!==".priority","Only non-priority child changes can be tracked.");let i=this.changeMap.get(r);if(i){let o=i.type;if(n==="child_added"&&o==="child_removed")this.changeMap.set(r,t0(r,e.snapshotNode,i.snapshotNode));else if(n==="child_removed"&&o==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&o==="child_changed")this.changeMap.set(r,AV(r,i.oldSnap));else if(n==="child_changed"&&o==="child_added")this.changeMap.set(r,SV(r,e.snapshotNode));else if(n==="child_changed"&&o==="child_changed")this.changeMap.set(r,t0(r,e.snapshotNode,i.oldSnap));else throw wi("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}};var Uv=class{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}},sA=new Uv,yc=class{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){let n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{let r=this.optCompleteServerCache_!=null?new vc(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return ey(this.writes_,e,r)}}getChildAfterChild(e,n,r){let i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:xi(this.viewCache_),o=YV(this.writes_,i,n,1,r,e);return o.length===0?null:o[0]}};function QV(t,e){I(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),I(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function ZV(t,e,n,r,i){let o=new Fv,s,a;if(n.type===Gn.OVERWRITE){let l=n;l.source.fromUser?s=jv(t,e,l.path,l.snap,r,i,o):(I(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered()&&!W(l.path),s=yf(t,e,l.path,l.snap,r,i,a,o))}else if(n.type===Gn.MERGE){let l=n;l.source.fromUser?s=XV(t,e,l.path,l.children,r,i,o):(I(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered(),s=Bv(t,e,l.path,l.children,r,i,a,o))}else if(n.type===Gn.ACK_USER_WRITE){let l=n;l.revert?s=nH(t,e,l.path,r,i,o):s=eH(t,e,l.path,l.affectedTree,r,i,o)}else if(n.type===Gn.LISTEN_COMPLETE)s=tH(t,e,n.path,r,o);else throw wi("Unknown operation type: "+n.type);let c=o.getChanges();return JV(e,s,c),{viewCache:s,changes:c}}function JV(t,e,n){let r=e.eventCache;if(r.isFullyInitialized()){let i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=xv(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(TV(xv(e)))}}function aA(t,e,n,r,i,o){let s=e.eventCache;if(vf(r,n)!=null)return e;{let a,c;if(W(n))if(I(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){let l=xi(e),u=l instanceof he?l:he.EMPTY_NODE,d=rA(r,u);a=t.filter.updateFullNode(e.eventCache.getNode(),d,o)}else{let l=Lv(r,xi(e));a=t.filter.updateFullNode(e.eventCache.getNode(),l,o)}else{let l=z(n);if(l===".priority"){I(Cr(n)===1,"Can't have a priority with additional path components");let u=s.getNode();c=e.serverCache.getNode();let d=c0(r,n,u,c);d!=null?a=t.filter.updatePriority(u,d):a=s.getNode()}else{let u=ue(n),d;if(s.isCompleteForChild(l)){c=e.serverCache.getNode();let f=c0(r,n,s.getNode(),c);f!=null?d=s.getNode().getImmediateChild(l).updateChild(u,f):d=s.getNode().getImmediateChild(l)}else d=ey(r,l,e.serverCache);d!=null?a=t.filter.updateChild(s.getNode(),l,d,u,i,o):a=s.getNode()}}return mc(e,a,s.isFullyInitialized()||W(n),t.filter.filtersNodes())}}function yf(t,e,n,r,i,o,s,a){let c=e.serverCache,l,u=s?t.filter:t.filter.getIndexedFilter();if(W(n))l=u.updateFullNode(c.getNode(),r,null);else if(u.filtersNodes()&&!c.isFiltered()){let h=c.getNode().updateChild(n,r);l=u.updateFullNode(c.getNode(),h,null)}else{let h=z(n);if(!c.isCompleteForPath(n)&&Cr(n)>1)return e;let p=ue(n),C=c.getNode().getImmediateChild(h).updateChild(p,r);h===".priority"?l=u.updatePriority(c.getNode(),C):l=u.updateChild(c.getNode(),h,C,p,sA,null)}let d=J0(e,l,c.isFullyInitialized()||W(n),u.filtersNodes()),f=new yc(i,d,o);return aA(t,d,n,i,f,a)}function jv(t,e,n,r,i,o,s){let a=e.eventCache,c,l,u=new yc(i,e,o);if(W(n))l=t.filter.updateFullNode(e.eventCache.getNode(),r,s),c=mc(e,l,!0,t.filter.filtersNodes());else{let d=z(n);if(d===".priority")l=t.filter.updatePriority(e.eventCache.getNode(),r),c=mc(e,l,a.isFullyInitialized(),a.isFiltered());else{let f=ue(n),h=a.getNode().getImmediateChild(d),p;if(W(f))p=r;else{let _=u.getCompleteChild(d);_!=null?U0(f)===".priority"&&_.getChild(B0(f)).isEmpty()?p=_:p=_.updateChild(f,r):p=he.EMPTY_NODE}if(h.equals(p))c=e;else{let _=t.filter.updateChild(a.getNode(),d,p,f,u,s);c=mc(e,_,a.isFullyInitialized(),t.filter.filtersNodes())}}}return c}function l0(t,e){return t.eventCache.isCompleteForChild(e)}function XV(t,e,n,r,i,o,s){let a=e;return r.foreach((c,l)=>{let u=Oe(n,c);l0(e,z(u))&&(a=jv(t,a,u,l,i,o,s))}),r.foreach((c,l)=>{let u=Oe(n,c);l0(e,z(u))||(a=jv(t,a,u,l,i,o,s))}),a}function u0(t,e,n){return n.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function Bv(t,e,n,r,i,o,s,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let c=e,l;W(n)?l=r:l=new it(null).setTree(n,r);let u=e.serverCache.getNode();return l.children.inorderTraversal((d,f)=>{if(u.hasChild(d)){let h=e.serverCache.getNode().getImmediateChild(d),p=u0(t,h,f);c=yf(t,c,new se(d),p,i,o,s,a)}}),l.children.inorderTraversal((d,f)=>{let h=!e.serverCache.isCompleteForChild(d)&&f.value===null;if(!u.hasChild(d)&&!h){let p=e.serverCache.getNode().getImmediateChild(d),_=u0(t,p,f);c=yf(t,c,new se(d),_,i,o,s,a)}}),c}function eH(t,e,n,r,i,o,s){if(vf(i,n)!=null)return e;let a=e.serverCache.isFiltered(),c=e.serverCache;if(r.value!=null){if(W(n)&&c.isFullyInitialized()||c.isCompleteForPath(n))return yf(t,e,n,c.getNode().getChild(n),i,o,a,s);if(W(n)){let l=new it(null);return c.getNode().forEachChild(os,(u,d)=>{l=l.set(new se(u),d)}),Bv(t,e,n,l,i,o,a,s)}else return e}else{let l=new it(null);return r.foreach((u,d)=>{let f=Oe(n,u);c.isCompleteForPath(f)&&(l=l.set(u,c.getNode().getChild(f)))}),Bv(t,e,n,l,i,o,a,s)}}function tH(t,e,n,r,i){let o=e.serverCache,s=J0(e,o.getNode(),o.isFullyInitialized()||W(n),o.isFiltered());return aA(t,s,n,r,sA,i)}function nH(t,e,n,r,i,o){let s;if(vf(r,n)!=null)return e;{let a=new yc(r,e,i),c=e.eventCache.getNode(),l;if(W(n)||z(n)===".priority"){let u;if(e.serverCache.isFullyInitialized())u=Lv(r,xi(e));else{let d=e.serverCache.getNode();I(d instanceof he,"serverChildren would be complete if leaf node"),u=rA(r,d)}u=u,l=t.filter.updateFullNode(c,u,o)}else{let u=z(n),d=ey(r,u,e.serverCache);d==null&&e.serverCache.isCompleteForChild(u)&&(d=c.getImmediateChild(u)),d!=null?l=t.filter.updateChild(c,u,d,ue(n),a,o):e.eventCache.getNode().hasChild(u)?l=t.filter.updateChild(c,u,he.EMPTY_NODE,ue(n),a,o):l=c,l.isEmpty()&&e.serverCache.isFullyInitialized()&&(s=Lv(r,xi(e)),s.isLeafNode()&&(l=t.filter.updateFullNode(l,s,o)))}return s=e.serverCache.isFullyInitialized()||vf(r,oe())!=null,mc(e,l,s,t.filter.filtersNodes())}}function rH(t,e){let n=xi(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!W(e)&&!n.getImmediateChild(z(e)).isEmpty())?n.getChild(e):null}function d0(t,e,n,r){e.type===Gn.MERGE&&e.source.queryId!==null&&(I(xi(t.viewCache_),"We should always have a full cache before handling merges"),I(xv(t.viewCache_),"Missing event cache, even though we have a server cache"));let i=t.viewCache_,o=ZV(t.processor_,i,e,n,r);return QV(t.processor_,o.viewCache),I(o.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=o.viewCache,iH(t,o.changes,o.viewCache.eventCache.getNode(),null)}function iH(t,e,n,r){let i=r?[r]:t.eventRegistrations_;return xV(t.eventGenerator_,e,n,i)}var f0;function oH(t){I(!f0,"__referenceConstructor has already been defined"),f0=t}function ty(t,e,n,r){let i=e.source.queryId;if(i!==null){let o=t.views.get(i);return I(o!=null,"SyncTree gave us an op for an invalid query."),d0(o,e,n,r)}else{let o=[];for(let s of t.views.values())o=o.concat(d0(s,e,n,r));return o}}function ny(t,e){let n=null;for(let r of t.views.values())n=n||rH(r,e);return n}var h0;function sH(t){I(!h0,"__referenceConstructor has already been defined"),h0=t}var Ef=class{constructor(e){this.listenProvider_=e,this.syncPointTree_=new it(null),this.pendingWriteTree_=KV(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}};function aH(t,e,n,r,i){return FV(t.pendingWriteTree_,e,n,r,i),i?Cf(t,new us(K0(),e,n)):[]}function rs(t,e,n=!1){let r=UV(t.pendingWriteTree_,e);if(jV(t.pendingWriteTree_,e)){let o=new it(null);return r.snap!=null?o=o.set(oe(),!0):Nt(r.children,s=>{o=o.set(new se(s),!0)}),Cf(t,new kv(r.path,o,n))}else return[]}function If(t,e,n){return Cf(t,new us(Y0(),e,n))}function cH(t,e,n){let r=it.fromObject(n);return Cf(t,new _f(Y0(),e,r))}function lH(t,e,n,r){let i=dA(t,r);if(i!=null){let o=fA(i),s=o.path,a=o.queryId,c=At(s,e),l=new us(Q0(a),c,n);return hA(t,s,l)}else return[]}function uH(t,e,n,r){let i=dA(t,r);if(i){let o=fA(i),s=o.path,a=o.queryId,c=At(s,e),l=it.fromObject(n),u=new _f(Q0(a),c,l);return hA(t,s,u)}else return[]}function cA(t,e,n){let i=t.pendingWriteTree_,o=t.syncPointTree_.findOnPath(e,(s,a)=>{let c=At(s,e),l=ny(a,c);if(l)return l});return nA(i,e,o,n,!0)}function Cf(t,e){return lA(e,t.syncPointTree_,null,eA(t.pendingWriteTree_,oe()))}function lA(t,e,n,r){if(W(t.path))return uA(t,e,n,r);{let i=e.get(oe());n==null&&i!=null&&(n=ny(i,oe()));let o=[],s=z(t.path),a=t.operationForChild(s),c=e.children.get(s);if(c&&a){let l=n?n.getImmediateChild(s):null,u=iA(r,s);o=o.concat(lA(a,c,l,u))}return i&&(o=o.concat(ty(i,t,r,n))),o}}function uA(t,e,n,r){let i=e.get(oe());n==null&&i!=null&&(n=ny(i,oe()));let o=[];return e.children.inorderTraversal((s,a)=>{let c=n?n.getImmediateChild(s):null,l=iA(r,s),u=t.operationForChild(s);u&&(o=o.concat(uA(u,a,c,l)))}),i&&(o=o.concat(ty(i,t,r,n))),o}function dA(t,e){return t.tagToQueryMap.get(e)}function fA(t){let e=t.indexOf("$");return I(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new se(t.substr(0,e))}}function hA(t,e,n){let r=t.syncPointTree_.get(e);I(r,"Missing sync point for query tag that we're tracking");let i=eA(t.pendingWriteTree_,e);return ty(r,n,i,null)}var Vv=class t{constructor(e){this.node_=e}getImmediateChild(e){let n=this.node_.getImmediateChild(e);return new t(n)}node(){return this.node_}},Hv=class t{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){let n=Oe(this.path_,e);return new t(this.syncTree_,n)}node(){return cA(this.syncTree_,this.path_)}},dH=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},p0=function(t,e,n){if(!t||typeof t!="object")return t;if(I(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return fH(t[".sv"],e,n);if(typeof t[".sv"]=="object")return hH(t[".sv"],e);I(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},fH=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:I(!1,"Unexpected server value: "+t)}},hH=function(t,e,n){t.hasOwnProperty("increment")||I(!1,"Unexpected server value: "+JSON.stringify(t,null,2));let r=t.increment;typeof r!="number"&&I(!1,"Unexpected increment value: "+r);let i=e.node();if(I(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;let s=i.getValue();return typeof s!="number"?r:s+r},pH=function(t,e,n,r){return ry(e,new Hv(n,t),r)},gH=function(t,e,n){return ry(t,new Vv(e),n)};function ry(t,e,n){let r=t.getPriority().val(),i=p0(r,e.getImmediateChild(".priority"),n),o;if(t.isLeafNode()){let s=t,a=p0(s.getValue(),e,n);return a!==s.getValue()||i!==s.getPriority().val()?new cs(a,He(i)):t}else{let s=t;return o=s,i!==s.getPriority().val()&&(o=o.updatePriority(new cs(i))),s.forEachChild($e,(a,c)=>{let l=ry(c,e.getImmediateChild(a),n);l!==c&&(o=o.updateImmediateChild(a,l))}),o}}var Ec=class{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}};function iy(t,e){let n=e instanceof se?e:new se(e),r=t,i=z(n);for(;i!==null;){let o=bi(r.node.children,i)||{children:{},childCount:0};r=new Ec(i,r,o),n=ue(n),i=z(n)}return r}function ps(t){return t.node.value}function pA(t,e){t.node.value=e,$v(t)}function gA(t){return t.node.childCount>0}function mH(t){return ps(t)===void 0&&!gA(t)}function wf(t,e){Nt(t.node.children,(n,r)=>{e(new Ec(n,t,r))})}function mA(t,e,n,r){n&&!r&&e(t),wf(t,i=>{mA(i,e,!0,r)}),n&&r&&e(t)}function _H(t,e,n){let r=n?t:t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function Dc(t){return new se(t.parent===null?t.name:Dc(t.parent)+"/"+t.name)}function $v(t){t.parent!==null&&vH(t.parent,t.name,t)}function vH(t,e,n){let r=mH(n),i=Dn(t.node.children,e);r&&i?(delete t.node.children[e],t.node.childCount--,$v(t)):!r&&!i&&(t.node.children[e]=n.node,t.node.childCount++,$v(t))}var yH=/[\[\].#$\/\u0000-\u001F\u007F]/,EH=/[\[\].#$\u0000-\u001F\u007F]/,rv=10*1024*1024,_A=function(t){return typeof t=="string"&&t.length!==0&&!yH.test(t)},IH=function(t){return typeof t=="string"&&t.length!==0&&!EH.test(t)},CH=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),IH(t)};var vA=function(t,e,n){let r=n instanceof se?new _v(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+Ri(r));if(typeof e=="function")throw new Error(t+"contains a function "+Ri(r)+" with contents = "+e.toString());if(E0(e))throw new Error(t+"contains "+e.toString()+" "+Ri(r));if(typeof e=="string"&&e.length>rv/3&&tc(e)>rv)throw new Error(t+"contains a string greater than "+rv+" utf8 bytes "+Ri(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let i=!1,o=!1;if(Nt(e,(s,a)=>{if(s===".value")i=!0;else if(s!==".priority"&&s!==".sv"&&(o=!0,!_A(s)))throw new Error(t+" contains an invalid key ("+s+") "+Ri(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);hV(r,s),vA(t,a,r),pV(r)}),i&&o)throw new Error(t+' contains ".value" child '+Ri(r)+" in addition to actual children.")}};var wH=function(t,e){let n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!_A(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!CH(n))throw new Error(lS(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};var Wv=class{constructor(){this.eventLists_=[],this.recursionDepth_=0}};function bH(t,e){let n=null;for(let r=0;r<e.length;r++){let i=e[r],o=i.getPath();n!==null&&!V0(o,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:o}),n.events.push(i)}n&&t.eventLists_.push(n)}function Pi(t,e,n){bH(t,n),DH(t,r=>Qt(r,e)||Qt(e,r))}function DH(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){let i=t.eventLists_[r];if(i){let o=i.path;e(o)?(TH(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function TH(t){for(let e=0;e<t.events.length;e++){let n=t.events[e];if(n!==null){t.events[e]=null;let r=n.getEventRunner();Mi&&Ve("event: "+n.toString()),wc(r)}}}var SH="repo_interrupt",AH=25,zv=class{constructor(e,n,r,i){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Wv,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=mf(),this.transactionQueueTree_=new Ec,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}};function RH(t,e,n){if(t.stats_=Zv(t.repoInfo_),t.forceRestClient_||H2())t.server_=new Sv(t.repoInfo_,(r,i,o,s)=>{g0(t,r,i,o,s)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>m0(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{xe(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new Jv(t.repoInfo_,e,(r,i,o,s)=>{g0(t,r,i,o,s)},r=>{m0(t,r)},r=>{MH(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=W2(t.repoInfo_,()=>new Mv(t.stats_,t.server_)),t.infoData_=new Av,t.infoSyncTree_=new Ef({startListening:(r,i,o,s)=>{let a=[],c=t.infoData_.getNode(r._path);return c.isEmpty()||(a=If(t.infoSyncTree_,r._path,c),setTimeout(()=>{s("ok")},0)),a},stopListening:()=>{}}),oy(t,"connected",!1),t.serverSyncTree_=new Ef({startListening:(r,i,o,s)=>(t.server_.listen(r,o,i,(a,c)=>{let l=s(a,c);Pi(t.eventQueue_,r._path,l)}),[]),stopListening:(r,i)=>{t.server_.unlisten(r,i)}})}function NH(t){let n=t.infoData_.getNode(new se(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function yA(t){return dH({timestamp:NH(t)})}function g0(t,e,n,r,i){t.dataUpdateCount++;let o=new se(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let s=[];if(i)if(r){let c=ec(n,l=>He(l));s=uH(t.serverSyncTree_,o,c,i)}else{let c=He(n);s=lH(t.serverSyncTree_,o,c,i)}else if(r){let c=ec(n,l=>He(l));s=cH(t.serverSyncTree_,o,c)}else{let c=He(n);s=If(t.serverSyncTree_,o,c)}let a=o;s.length>0&&(a=ay(t,o)),Pi(t.eventQueue_,a,s)}function m0(t,e){oy(t,"connected",e),e===!1&&xH(t)}function MH(t,e){Nt(e,(n,r)=>{oy(t,n,r)})}function oy(t,e,n){let r=new se("/.info/"+e),i=He(n);t.infoData_.updateSnapshot(r,i);let o=If(t.infoSyncTree_,r,i);Pi(t.eventQueue_,r,o)}function kH(t){return t.nextWriteId_++}function xH(t){EA(t,"onDisconnectEvents");let e=yA(t),n=mf();Rv(t.onDisconnect_,oe(),(i,o)=>{let s=pH(i,o,t.serverSyncTree_,e);q0(n,i,s)});let r=[];Rv(n,oe(),(i,o)=>{r=r.concat(If(t.serverSyncTree_,i,o));let s=FH(t,i);ay(t,s)}),t.onDisconnect_=mf(),Pi(t.eventQueue_,oe(),r)}function OH(t){t.persistentConnection_&&t.persistentConnection_.interrupt(SH)}function EA(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),Ve(n,...e)}function IA(t,e,n){return cA(t.serverSyncTree_,e,n)||he.EMPTY_NODE}function sy(t,e=t.transactionQueueTree_){if(e||bf(t,e),ps(e)){let n=wA(t,e);I(n.length>0,"Sending zero length transaction queue"),n.every(i=>i.status===0)&&PH(t,Dc(e),n)}else gA(e)&&wf(e,n=>{sy(t,n)})}function PH(t,e,n){let r=n.map(l=>l.currentWriteId),i=IA(t,e,r),o=i,s=i.hash();for(let l=0;l<n.length;l++){let u=n[l];I(u.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;let d=At(e,u.path);o=o.updateChild(d,u.currentOutputSnapshotRaw)}let a=o.val(!0),c=e;t.server_.put(c.toString(),a,l=>{EA(t,"transaction put response",{path:c.toString(),status:l});let u=[];if(l==="ok"){let d=[];for(let f=0;f<n.length;f++)n[f].status=2,u=u.concat(rs(t.serverSyncTree_,n[f].currentWriteId)),n[f].onComplete&&d.push(()=>n[f].onComplete(null,!0,n[f].currentOutputSnapshotResolved)),n[f].unwatcher();bf(t,iy(t.transactionQueueTree_,e)),sy(t,t.transactionQueueTree_),Pi(t.eventQueue_,e,u);for(let f=0;f<d.length;f++)wc(d[f])}else{if(l==="datastale")for(let d=0;d<n.length;d++)n[d].status===3?n[d].status=4:n[d].status=0;else{gt("transaction at "+c.toString()+" failed: "+l);for(let d=0;d<n.length;d++)n[d].status=4,n[d].abortReason=l}ay(t,e)}},s)}function ay(t,e){let n=CA(t,e),r=Dc(n),i=wA(t,n);return LH(t,i,r),r}function LH(t,e,n){if(e.length===0)return;let r=[],i=[],s=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){let c=e[a],l=At(n,c.path),u=!1,d;if(I(l!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),c.status===4)u=!0,d=c.abortReason,i=i.concat(rs(t.serverSyncTree_,c.currentWriteId,!0));else if(c.status===0)if(c.retryCount>=AH)u=!0,d="maxretry",i=i.concat(rs(t.serverSyncTree_,c.currentWriteId,!0));else{let f=IA(t,c.path,s);c.currentInputSnapshot=f;let h=e[a].update(f.val());if(h!==void 0){vA("transaction failed: Data returned ",h,c.path);let p=He(h);typeof h=="object"&&h!=null&&Dn(h,".priority")||(p=p.updatePriority(f.getPriority()));let C=c.currentWriteId,S=yA(t),le=gH(p,f,S);c.currentOutputSnapshotRaw=p,c.currentOutputSnapshotResolved=le,c.currentWriteId=kH(t),s.splice(s.indexOf(C),1),i=i.concat(aH(t.serverSyncTree_,c.path,le,c.currentWriteId,c.applyLocally)),i=i.concat(rs(t.serverSyncTree_,C,!0))}else u=!0,d="nodata",i=i.concat(rs(t.serverSyncTree_,c.currentWriteId,!0))}Pi(t.eventQueue_,n,i),i=[],u&&(e[a].status=2,(function(f){setTimeout(f,Math.floor(0))})(e[a].unwatcher),e[a].onComplete&&(d==="nodata"?r.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):r.push(()=>e[a].onComplete(new Error(d),!1,null))))}bf(t,t.transactionQueueTree_);for(let a=0;a<r.length;a++)wc(r[a]);sy(t,t.transactionQueueTree_)}function CA(t,e){let n,r=t.transactionQueueTree_;for(n=z(e);n!==null&&ps(r)===void 0;)r=iy(r,n),e=ue(e),n=z(e);return r}function wA(t,e){let n=[];return bA(t,e,n),n.sort((r,i)=>r.order-i.order),n}function bA(t,e,n){let r=ps(e);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);wf(e,i=>{bA(t,i,n)})}function bf(t,e){let n=ps(e);if(n){let r=0;for(let i=0;i<n.length;i++)n[i].status!==2&&(n[r]=n[i],r++);n.length=r,pA(e,n.length>0?n:void 0)}wf(e,r=>{bf(t,r)})}function FH(t,e){let n=Dc(CA(t,e)),r=iy(t.transactionQueueTree_,e);return _H(r,i=>{iv(t,i)}),iv(t,r),mA(r,i=>{iv(t,i)}),n}function iv(t,e){let n=ps(e);if(n){let r=[],i=[],o=-1;for(let s=0;s<n.length;s++)n[s].status===3||(n[s].status===1?(I(o===s-1,"All SENT items should be at beginning of queue."),o=s,n[s].status=3,n[s].abortReason="set"):(I(n[s].status===0,"Unexpected transaction status in abort"),n[s].unwatcher(),i=i.concat(rs(t.serverSyncTree_,n[s].currentWriteId,!0)),n[s].onComplete&&r.push(n[s].onComplete.bind(null,new Error("set"),!1,null))));o===-1?pA(e,void 0):n.length=o+1,Pi(t.eventQueue_,Dc(e),i);for(let s=0;s<r.length;s++)wc(r[s])}}function UH(t){let e="",n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}function jH(t){let e={};t.charAt(0)==="?"&&(t=t.substring(1));for(let n of t.split("&")){if(n.length===0)continue;let r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):gt(`Invalid query segment '${n}' in query '${t}'`)}return e}var _0=function(t,e){let n=BH(t),r=n.namespace;n.domain==="firebase.com"&&qn(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&qn("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||O2();let i=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new lf(n.host,n.secure,r,i,e,"",r!==n.subdomain),path:new se(n.pathString)}},BH=function(t){let e="",n="",r="",i="",o="",s=!0,a="https",c=443;if(typeof t=="string"){let l=t.indexOf("//");l>=0&&(a=t.substring(0,l-1),t=t.substring(l+2));let u=t.indexOf("/");u===-1&&(u=t.length);let d=t.indexOf("?");d===-1&&(d=t.length),e=t.substring(0,Math.min(u,d)),u<d&&(i=UH(t.substring(u,d)));let f=jH(t.substring(Math.min(t.length,d)));l=e.indexOf(":"),l>=0?(s=a==="https"||a==="wss",c=parseInt(e.substring(l+1),10)):l=e.length;let h=e.slice(0,l);if(h.toLowerCase()==="localhost")n="localhost";else if(h.split(".").length<=2)n=h;else{let p=e.indexOf(".");r=e.substring(0,p).toLowerCase(),n=e.substring(p+1),o=r}"ns"in f&&(o=f.ns)}return{host:e,port:c,domain:n,subdomain:r,secure:s,scheme:a,pathString:i,namespace:o}};var Gv=class t{constructor(e,n,r,i){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=i}get key(){return W(this._path)?null:U0(this._path)}get ref(){return new fs(this._repo,this._path)}get _queryIdentifier(){let e=r0(this._queryParams),n=Qv(e);return n==="{}"?"default":n}get _queryObject(){return r0(this._queryParams)}isEqual(e){if(e=R_(e),!(e instanceof t))return!1;let n=this._repo===e._repo,r=V0(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return n&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+fV(this._path)}};var fs=class t extends Gv{constructor(e,n){super(e,n,new Tv,!1)}get parent(){let e=B0(this._path);return e===null?null:new t(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}};oH(fs);sH(fs);var VH="FIREBASE_DATABASE_EMULATOR_HOST",qv={},HH=!1;function $H(t,e,n,r){let i=e.lastIndexOf(":"),o=e.substring(0,i),s=zd(o);t.repoInfo_=new lf(e,s,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0,n),r&&(t.authTokenProvider_=r)}function WH(t,e,n,r,i){let o=r||t.options.databaseURL;o===void 0&&(t.options.projectId||qn("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Ve("Using default host for project ",t.options.projectId),o=`${t.options.projectId}-default-rtdb.firebaseio.com`);let s=_0(o,i),a=s.repoInfo,c,l;typeof process<"u"&&process.env&&(l=process.env[VH]),l?(c=!0,o=`http://${l}?ns=${a.namespace}`,s=_0(o,i),a=s.repoInfo):c=!s.repoInfo.secure;let u=i&&c?new gc(gc.OWNER):new uv(t.name,t.options,e);wH("Invalid Firebase Database URL",s),W(s.path)||qn("Database URL must point to the root of a Firebase Database (not including a child path).");let d=GH(a,t,u,new lv(t,n));return new Kv(d,t)}function zH(t,e){let n=qv[e];(!n||n[t.key]!==t)&&qn(`Database ${e}(${t.repoInfo_}) has already been deleted.`),OH(t),delete n[t.key]}function GH(t,e,n,r){let i=qv[e.name];i||(i={},qv[e.name]=i);let o=i[t.toURLString()];return o&&qn("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new zv(t,HH,n,r),i[t.toURLString()]=o,o}var Kv=class{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(RH(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new fs(this._repo,oe())),this._rootInternal}_delete(){return this._rootInternal!==null&&(zH(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&qn("Cannot call "+e+" on a deleted database.")}};function DA(t=yS(),e){let n=mS(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){let r=JT("database");r&&qH(n,...r)}return n}function qH(t,e,n,r={}){t=R_(t),t._checkNotDeleted("useEmulator");let i=`${e}:${n}`,o=t._repoInternal;if(t._instanceStarted){if(i===t._repoInternal.repoInfo_.host&&Jo(r,o.repoInfo_.emulatorOptions))return;qn("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let s;if(o.repoInfo_.nodeAdmin)r.mockUserToken&&qn('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new gc(gc.OWNER);else if(r.mockUserToken){let a=typeof r.mockUserToken=="string"?r.mockUserToken:eS(r.mockUserToken,t.app.options.projectId);s=new gc(a)}zd(e)&&(XT(e),tS("Database",!0)),$H(o,i,r,s)}function KH(t){M2(vS),rc(new Wn("database",(e,{instanceIdentifier:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),o=e.getProvider("app-check-internal");return WH(r,i,o,n)},"PUBLIC").setMultipleInstances(!0)),es(jS,BS,t),es(jS,BS,"esm2020")}Jv.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};Jv.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};KH();var TA="@firebase/database",SA="1.0.20";var uE="";function YH(t){uE=t}var gy=class{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),we(n))}get(e){let n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:zo(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}};var my=class{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return En(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}};var iR=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){let e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new gy(e)}}catch{}return new my},Fi=iR("localStorage"),_y=iR("sessionStorage");var _s=new In("@firebase/database"),QH=(function(){let t=1;return function(){return t++}})(),oR=function(t){let e=mT(t),n=new Ad;n.update(e);let r=n.digest();return Go.encodeByteArray(r)},$c=function(...t){let e="";for(let n=0;n<t.length;n++){let r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=$c.apply(null,r):typeof r=="object"?e+=we(r):e+=r,e+=" "}return e},ji=null,AA=!0,ZH=function(t,e){v(!e||t===!0||t===!1,"Can't turn on custom loggers persistently."),t===!0?(_s.logLevel=te.VERBOSE,ji=_s.log.bind(_s),e&&_y.set("logging_enabled",!0)):typeof t=="function"?ji=t:(ji=null,_y.remove("logging_enabled"))},We=function(...t){if(AA===!0&&(AA=!1,ji===null&&_y.get("logging_enabled")===!0&&ZH(!0)),ji){let e=$c.apply(null,t);ji(e)}},Wc=function(t){return function(...e){We(t,...e)}},vy=function(...t){let e="FIREBASE INTERNAL ERROR: "+$c(...t);_s.error(e)},Kn=function(...t){let e=`FIREBASE FATAL ERROR: ${$c(...t)}`;throw _s.error(e),new Error(e)},ot=function(...t){let e="FIREBASE WARNING: "+$c(...t);_s.warn(e)},JH=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&ot("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},sR=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},XH=function(t){if(yn()||document.readyState==="complete")t();else{let e=!1,n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},ys="[MIN_NAME]",Bi="[MAX_NAME]",Ts=function(t,e){if(t===e)return 0;if(t===ys||e===Bi)return-1;if(e===ys||t===Bi)return 1;{let n=RA(t),r=RA(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},e$=function(t,e){return t===e?0:t<e?-1:1},Tc=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+we(e))},dE=function(t){if(typeof t!="object"||t===null)return we(t);let e=[];for(let r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=we(e[r]),n+=":",n+=dE(t[e[r]]);return n+="}",n},aR=function(t,e){let n=t.length;if(n<=e)return[t];let r=[];for(let i=0;i<n;i+=e)i+e>n?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r};function st(t,e){for(let n in t)t.hasOwnProperty(n)&&e(n,t[n])}var cR=function(t){v(!sR(t),"Invalid JSON number");let e=11,n=52,r=(1<<e-1)-1,i,o,s,a,c;t===0?(o=0,s=0,i=1/t===-1/0?1:0):(i=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),r),o=a+r,s=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(o=0,s=Math.round(t/Math.pow(2,1-r-n))));let l=[];for(c=n;c;c-=1)l.push(s%2?1:0),s=Math.floor(s/2);for(c=e;c;c-=1)l.push(o%2?1:0),o=Math.floor(o/2);l.push(i?1:0),l.reverse();let u=l.join(""),d="";for(c=0;c<64;c+=8){let f=parseInt(u.substr(c,8),2).toString(16);f.length===1&&(f="0"+f),d=d+f}return d.toLowerCase()},t$=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},n$=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function r$(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");let r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}var i$=new RegExp("^-?(0*)\\d{1,10}$"),o$=-2147483648,s$=2147483647,RA=function(t){if(i$.test(t)){let e=Number(t);if(e>=o$&&e<=s$)return e}return null},Ss=function(t){try{t()}catch(e){setTimeout(()=>{let n=e.stack||"";throw ot("Exception was thrown by user callback.",n),e},Math.floor(0))}},a$=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Mc=function(t,e){let n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};var yy=class{constructor(e,n){this.appCheckProvider=n,this.appName=e.name,$n(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.appCheck=n?.getImmediate({optional:!0}),this.appCheck||n?.get().then(r=>this.appCheck=r)}getToken(e){if(this.serverAppAppCheckToken){if(e)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){ot(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}};var Ey=class{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(We("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',ot(e)}},kc=(()=>{class t{constructor(n){this.accessToken=n}getToken(n){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(n){n(this.accessToken)}removeTokenChangeListener(n){}notifyForInvalidToken(){}}t.OWNER="owner";return t})(),Tf="5",lR="v",uR="s",dR="r",fR="f",hR=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,pR="ls",gR="p",Iy="ac",mR="websocket",_R="long_polling";var Sf=class{constructor(e,n,r,i,o=!1,s="",a=!1,c=!1,l=null){this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=o,this.persistenceKey=s,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=c,this.emulatorOptions=l,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Fi.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Fi.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){let e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}};function c$(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function vR(t,e,n){v(typeof e=="string","typeof type must == string"),v(typeof n=="object","typeof params must == object");let r;if(e===mR)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===_R)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);c$(t)&&(n.ns=t.namespace);let i=[];return st(n,(o,s)=>{i.push(o+"="+s)}),r+i.join("&")}var Cy=class{constructor(){this.counters_={}}incrementCounter(e,n=1){En(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return nT(this.counters_)}};var cy={},ly={};function fE(t){let e=t.toString();return cy[e]||(cy[e]=new Cy),cy[e]}function l$(t,e){let n=t.toString();return ly[n]||(ly[n]=e()),ly[n]}var wy=class{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){let r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&Ss(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}};var NA="start",u$="close",d$="pLPCommand",f$="pRTLPCB",yR="id",ER="pw",IR="ser",h$="cb",p$="seg",g$="ts",m$="d",_$="dframe",CR=1870,wR=30,v$=CR-wR,y$=25e3,E$=3e4,by=class t{constructor(e,n,r,i,o,s,a){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=o,this.transportSessionId=s,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Wc(e),this.stats_=fE(n),this.urlFn=c=>(this.appCheckToken&&(c[Iy]=this.appCheckToken),vR(n,_R,c))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new wy(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(E$)),XH(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Dy((...o)=>{let[s,a,c,l,u]=o;if(this.incrementIncomingBytes_(o),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,s===NA)this.id=a,this.password=c;else if(s===u$)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+s)},(...o)=>{let[s,a]=o;this.incrementIncomingBytes_(o),this.myPacketOrderer.handleResponse(s,a)},()=>{this.onClosed_()},this.urlFn);let r={};r[NA]="t",r[IR]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[h$]=this.scriptTagHolder.uniqueCallbackIdentifier),r[lR]=Tf,this.transportSessionId&&(r[uR]=this.transportSessionId),this.lastSessionId&&(r[pR]=this.lastSessionId),this.applicationId&&(r[gR]=this.applicationId),this.appCheckToken&&(r[Iy]=this.appCheckToken),typeof location<"u"&&location.hostname&&hR.test(location.hostname)&&(r[dR]=fR);let i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){t.forceAllow_=!0}static forceDisallow(){t.forceDisallow_=!0}static isAvailable(){return yn()?!1:t.forceAllow_?!0:!t.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!t$()&&!n$()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){let n=we(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);let r=Zm(n),i=aR(r,v$);for(let o=0;o<i.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[o]),this.curSegmentNum++}addDisconnectPingFrame(e,n){if(yn())return;this.myDisconnFrame=document.createElement("iframe");let r={};r[_$]="t",r[yR]=e,r[ER]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){let n=we(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}},Dy=class t{constructor(e,n,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0,yn())this.commandCB=e,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=QH(),window[d$+this.uniqueCallbackIdentifier]=e,window[f$+this.uniqueCallbackIdentifier]=n,this.myIFrame=t.createIFrame_();let o="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(o='<script>document.domain="'+document.domain+'";<\/script>');let s="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(s),this.myIFrame.doc.close()}catch(a){We("frame writing exception"),a.stack&&We(a.stack),We(a)}}}static createIFrame_(){let e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||We("No IE domain setting required")}catch{let r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));let e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;let e={};e[yR]=this.myID,e[ER]=this.myPW,e[IR]=this.currentSerial;let n=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+wR+r.length<=CR;){let s=this.pendingSegs.shift();r=r+"&"+p$+i+"="+s.seg+"&"+g$+i+"="+s.ts+"&"+m$+i+"="+s.d,i++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);let r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},i=setTimeout(r,Math.floor(y$)),o=()=>{clearTimeout(i),r()};this.addTag(e,o)}addTag(e,n){yn()?this.doNodeLongPoll(e,n):setTimeout(()=>{try{if(!this.sendNewPolls)return;let r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){let i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{We("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}};var I$=16384,C$=45e3,Af=null;typeof MozWebSocket<"u"?Af=MozWebSocket:typeof WebSocket<"u"&&(Af=WebSocket);var Sc=(()=>{class t{constructor(n,r,i,o,s,a,c){this.connId=n,this.applicationId=i,this.appCheckToken=o,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Wc(this.connId),this.stats_=fE(r),this.connURL=t.connectionURL_(r,a,c,o,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(n,r,i,o,s){let a={};return a[lR]=Tf,!yn()&&typeof location<"u"&&location.hostname&&hR.test(location.hostname)&&(a[dR]=fR),r&&(a[uR]=r),i&&(a[pR]=i),o&&(a[Iy]=o),s&&(a[gR]=s),vR(n,mR,a)}open(n,r){this.onDisconnect=r,this.onMessage=n,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Fi.set("previous_websocket_failure",!0);try{let i;if(yn()){let o=this.nodeAdmin?"AdminNode":"Node";i={headers:{"User-Agent":`Firebase/${Tf}/${uE}/${process.platform}/${o}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);let s=process.env,a=this.connURL.indexOf("wss://")===0?s.HTTPS_PROXY||s.https_proxy:s.HTTP_PROXY||s.http_proxy;a&&(i.proxy={origin:a})}this.mySock=new Af(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");let o=i.message||i.data;o&&this.log_(o),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");let o=i.message||i.data;o&&this.log_(o),this.onClosed_()}}start(){}static forceDisallow(){t.forceDisallow_=!0}static isAvailable(){let n=!1;if(typeof navigator<"u"&&navigator.userAgent){let r=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(r);i&&i.length>1&&parseFloat(i[1])<4.4&&(n=!0)}return!n&&Af!==null&&!t.forceDisallow_}static previouslyFailed(){return Fi.isInMemoryStorage||Fi.get("previous_websocket_failure")===!0}markConnectionHealthy(){Fi.remove("previous_websocket_failure")}appendFrame_(n){if(this.frames.push(n),this.frames.length===this.totalFrames){let r=this.frames.join("");this.frames=null;let i=zo(r);this.onMessage(i)}}handleNewFrameCount_(n){this.totalFrames=n,this.frames=[]}extractFrameCount_(n){if(v(this.frames===null,"We already have a frame buffer"),n.length<=6){let r=Number(n);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),n}handleIncomingFrame(n){if(this.mySock===null)return;let r=n.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(r);else{let i=this.extractFrameCount_(r);i!==null&&this.appendFrame_(i)}}send(n){this.resetKeepAlive();let r=we(n);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);let i=aR(r,I$);i.length>1&&this.sendString_(String(i.length));for(let o=0;o<i.length;o++)this.sendString_(i[o])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(C$))}sendString_(n){try{this.mySock.send(n)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4;return t})(),w$=(()=>{class t{static get ALL_TRANSPORTS(){return[by,Sc]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(n){this.initTransports_(n)}initTransports_(n){let r=Sc&&Sc.isAvailable(),i=r&&!Sc.previouslyFailed();if(n.webSocketOnly&&(r||ot("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[Sc];else{let o=this.transports_=[];for(let s of t.ALL_TRANSPORTS)s&&s.isAvailable()&&o.push(s);t.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}t.globalTransportInitialized_=!1;return t})(),b$=6e4,D$=5e3,T$=10*1024,S$=100*1024,uy="t",MA="d",A$="s",kA="r",R$="e",xA="o",OA="a",PA="n",LA="p",N$="h",Ty=class{constructor(e,n,r,i,o,s,a,c,l,u){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=o,this.onMessage_=s,this.onReady_=a,this.onDisconnect_=c,this.onKill_=l,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Wc("c:"+this.id+":"),this.transportManager_=new w$(n),this.log_("Connection created"),this.start_()}start_(){let e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));let i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=Mc(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>S$?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>T$?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){let n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(uy in e){let n=e[uy];n===OA?this.upgradeIfSecondaryHealthy_():n===kA?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===xA&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){let n=Tc("t",e),r=Tc("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:LA,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:OA,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:PA,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){let n=Tc("t",e),r=Tc("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){let n=Tc(uy,e);if(MA in e){let r=e[MA];if(n===N$){let i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(n===PA){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===A$?this.onConnectionShutdown_(r):n===kA?this.onReset_(r):n===R$?vy("Server Error: "+r):n===xA?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):vy("Unknown control packet command: "+n)}}onHandshake_(e){let n=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),Tf!==r&&ot("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){let e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),Mc(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(b$))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Mc(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(D$))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:LA,d:{}}}))}onSecondaryConnectionLost_(){let e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Fi.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}};var Rf=class{put(e,n,r,i){}merge(e,n,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}};var Nf=class{constructor(e){this.allowedEvents_=e,this.listeners_={},v(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){let r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});let i=this.getInitialEvent(e);i&&n.apply(r,i)}off(e,n,r){this.validateEventType_(e);let i=this.listeners_[e]||[];for(let o=0;o<i.length;o++)if(i[o].callback===n&&(!r||r===i[o].context)){i.splice(o,1);return}}validateEventType_(e){v(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}};var Mf=class t extends Nf{static getInstance(){return new t}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Va()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(e){return v(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}};var FA=32,UA=768,ne=class{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}};function K(){return new ne("")}function $(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function Dr(t){return t.pieces_.length-t.pieceNum_}function ce(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new ne(t.pieces_,e)}function bR(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function M$(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function DR(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function TR(t){if(t.pieceNum_>=t.pieces_.length)return null;let e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new ne(e,0)}function Se(t,e){let n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof ne)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{let r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&n.push(r[i])}return new ne(n,0)}function B(t){return t.pieceNum_>=t.pieces_.length}function Je(t,e){let n=$(t),r=$(e);if(n===null)return e;if(n===r)return Je(ce(t),ce(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function SR(t,e){if(Dr(t)!==Dr(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function Xt(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(Dr(t)>Dr(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}var Sy=class{constructor(e,n){this.errorPrefix_=n,this.parts_=DR(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=Wa(this.parts_[r]);AR(this)}};function k$(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=Wa(e),AR(t)}function x$(t){let e=t.parts_.pop();t.byteLength_-=Wa(e),t.parts_.length>0&&(t.byteLength_-=1)}function AR(t){if(t.byteLength_>UA)throw new Error(t.errorPrefix_+"has a key path longer than "+UA+" bytes ("+t.byteLength_+").");if(t.parts_.length>FA)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+FA+") or object contains a cycle "+Li(t))}function Li(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}var Ay=class t extends Nf{static getInstance(){return new t}constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{let r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}getInitialEvent(e){return v(e==="visible","Unknown event type: "+e),[this.visible_]}};var Ac=1e3,O$=300*1e3,jA=30*1e3,P$=1.3,L$=3e4,F$="server_kill",BA=3,hE=(()=>{class t extends Rf{constructor(n,r,i,o,s,a,c,l){if(super(),this.repoInfo_=n,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=o,this.onServerInfoUpdate_=s,this.authTokenProvider_=a,this.appCheckTokenProvider_=c,this.authOverride_=l,this.id=t.nextPersistentConnectionId_++,this.log_=Wc("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Ac,this.maxReconnectDelay_=O$,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l&&!yn())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Ay.getInstance().on("visible",this.onVisible_,this),n.host.indexOf("fblocal")===-1&&Mf.getInstance().on("online",this.onOnline_,this)}sendRequest(n,r,i){let o=++this.requestNumber_,s={r:o,a:n,b:r};this.log_(we(s)),v(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(s),i&&(this.requestCBHash_[o]=i)}get(n){this.initConnection_();let r=new Wt,o={action:"g",request:{p:n._path.toString(),q:n._queryObject},onComplete:a=>{let c=a.d;a.s==="ok"?r.resolve(c):r.reject(c)}};this.outstandingGets_.push(o),this.outstandingGetCount_++;let s=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(s),r.promise}listen(n,r,i,o){this.initConnection_();let s=n._queryIdentifier,a=n._path.toString();this.log_("Listen called for "+a+" "+s),this.listens.has(a)||this.listens.set(a,new Map),v(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"listen() called for non-default but complete query"),v(!this.listens.get(a).has(s),"listen() called twice for same path/queryId.");let c={onComplete:o,hashFn:r,query:n,tag:i};this.listens.get(a).set(s,c),this.connected_&&this.sendListen_(c)}sendGet_(n){let r=this.outstandingGets_[n];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[n],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(n){let r=n.query,i=r._path.toString(),o=r._queryIdentifier;this.log_("Listen on "+i+" for "+o);let s={p:i},a="q";n.tag&&(s.q=r._queryObject,s.t=n.tag),s.h=n.hashFn(),this.sendRequest(a,s,c=>{let l=c.d,u=c.s;t.warnOnListenWarnings_(l,r),(this.listens.get(i)&&this.listens.get(i).get(o))===n&&(this.log_("listen response",c),u!=="ok"&&this.removeListen_(i,o),n.onComplete&&n.onComplete(u,l))})}static warnOnListenWarnings_(n,r){if(n&&typeof n=="object"&&En(n,"w")){let i=pi(n,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){let o='".indexOn": "'+r._queryParams.getIndex().toString()+'"',s=r._path.toString();ot(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${o} at ${s} to your security rules for better performance.`)}}}refreshAuthToken(n){this.authToken_=n,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(n)}reduceReconnectDelayIfAdminCredential_(n){(n&&n.length===40||pT(n))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=jA)}refreshAppCheckToken(n){this.appCheckToken_=n,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){let n=this.authToken_,r=hT(n)?"auth":"gauth",i={cred:n};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(r,i,o=>{let s=o.s,a=o.d||"error";this.authToken_===n&&(s==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(s,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},n=>{let r=n.s,i=n.d||"error";r==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(n,r){let i=n._path.toString(),o=n._queryIdentifier;this.log_("Unlisten called for "+i+" "+o),v(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,o)&&this.connected_&&this.sendUnlisten_(i,o,n._queryObject,r)}sendUnlisten_(n,r,i,o){this.log_("Unlisten on "+n+" for "+r);let s={p:n},a="n";o&&(s.q=i,s.t=o),this.sendRequest(a,s)}onDisconnectPut(n,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"o",data:r,onComplete:i})}onDisconnectMerge(n,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"om",data:r,onComplete:i})}onDisconnectCancel(n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",n,null,r):this.onDisconnectRequestQueue_.push({pathString:n,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(n,r,i,o){let s={p:r,d:i};this.log_("onDisconnect "+n,s),this.sendRequest(n,s,a=>{o&&setTimeout(()=>{o(a.s,a.d)},Math.floor(0))})}put(n,r,i,o){this.putInternal("p",n,r,i,o)}merge(n,r,i,o){this.putInternal("m",n,r,i,o)}putInternal(n,r,i,o,s){this.initConnection_();let a={p:r,d:i};s!==void 0&&(a.h=s),this.outstandingPuts_.push({action:n,request:a,onComplete:o}),this.outstandingPutCount_++;let c=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(c):this.log_("Buffering put: "+r)}sendPut_(n){let r=this.outstandingPuts_[n].action,i=this.outstandingPuts_[n].request,o=this.outstandingPuts_[n].onComplete;this.outstandingPuts_[n].queued=this.connected_,this.sendRequest(r,i,s=>{this.log_(r+" response",s),delete this.outstandingPuts_[n],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),o&&o(s.s,s.d)})}reportStats(n){if(this.connected_){let r={c:n};this.log_("reportStats",r),this.sendRequest("s",r,i=>{if(i.s!=="ok"){let s=i.d;this.log_("reportStats","Error sending stats: "+s)}})}}onDataMessage_(n){if("r"in n){this.log_("from server: "+we(n));let r=n.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(n.b))}else{if("error"in n)throw"A server-side error has occurred: "+n.error;"a"in n&&this.onDataPush_(n.a,n.b)}}onDataPush_(n,r){this.log_("handleServerMessage",n,r),n==="d"?this.onDataUpdate_(r.p,r.d,!1,r.t):n==="m"?this.onDataUpdate_(r.p,r.d,!0,r.t):n==="c"?this.onListenRevoked_(r.p,r.q):n==="ac"?this.onAuthRevoked_(r.s,r.d):n==="apc"?this.onAppCheckRevoked_(r.s,r.d):n==="sd"?this.onSecurityDebugPacket_(r):vy("Unrecognized action received from server: "+we(n)+`
Are you using the latest client?`)}onReady_(n,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(n),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(n){v(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(n))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(n){n&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Ac,this.realtime_||this.scheduleConnect_(0)),this.visible_=n}onOnline_(n){n?(this.log_("Browser went online."),this.reconnectDelay_=Ac,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>L$&&(this.reconnectDelay_=Ac),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());let n=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_),r=Math.max(0,this.reconnectDelay_-n);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*P$)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;let n=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),o=this.id+":"+t.nextConnectionId_++,s=this.lastSessionId,a=!1,c=null,l=function(){c?c.close():(a=!0,i())},u=function(f){v(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(f)};this.realtime_={close:l,sendRequest:u};let d=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{let[f,h]=await Promise.all([this.authTokenProvider_.getToken(d),this.appCheckTokenProvider_.getToken(d)]);a?We("getToken() completed but was canceled"):(We("getToken() completed. Creating connection."),this.authToken_=f&&f.accessToken,this.appCheckToken_=h&&h.token,c=new Ty(o,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,n,r,i,p=>{ot(p+" ("+this.repoInfo_.toString()+")"),this.interrupt(F$)},s))}catch(f){this.log_("Failed to get token: "+f),a||(this.repoInfo_.nodeAdmin&&ot(f),l())}}}interrupt(n){We("Interrupting connection for reason: "+n),this.interruptReasons_[n]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(n){We("Resuming connection for reason: "+n),delete this.interruptReasons_[n],Md(this.interruptReasons_)&&(this.reconnectDelay_=Ac,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(n){let r=n-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let n=0;n<this.outstandingPuts_.length;n++){let r=this.outstandingPuts_[n];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[n],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(n,r){let i;r?i=r.map(s=>dE(s)).join("$"):i="default";let o=this.removeListen_(n,i);o&&o.onComplete&&o.onComplete("permission_denied")}removeListen_(n,r){let i=new ne(n).toString(),o;if(this.listens.has(i)){let s=this.listens.get(i);o=s.get(r),s.delete(r),s.size===0&&this.listens.delete(i)}else o=void 0;return o}onAuthRevoked_(n,r){We("Auth token revoked: "+n+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(n==="invalid_token"||n==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=BA&&(this.reconnectDelay_=jA,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(n,r){We("App check token revoked: "+n+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(n==="invalid_token"||n==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=BA&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(n){this.securityDebugCallback_?this.securityDebugCallback_(n):"msg"in n&&console.log("FIREBASE: "+n.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(let n of this.listens.values())for(let r of n.values())this.sendListen_(r);for(let n=0;n<this.outstandingPuts_.length;n++)this.outstandingPuts_[n]&&this.sendPut_(n);for(;this.onDisconnectRequestQueue_.length;){let n=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(n.action,n.pathString,n.data,n.onComplete)}for(let n=0;n<this.outstandingGets_.length;n++)this.outstandingGets_[n]&&this.sendGet_(n)}sendConnectStats_(){let n={},r="js";yn()&&(this.repoInfo_.nodeAdmin?r="admin_node":r="node"),n["sdk."+r+"."+uE.replace(/\./g,"-")]=1,Va()?n["framework.cordova"]=1:Rd()&&(n["framework.reactnative"]=1),this.reportStats(n)}shouldReconnect_(){let n=Mf.getInstance().currentlyOnline();return Md(this.interruptReasons_)&&n}}t.nextPersistentConnectionId_=0,t.nextConnectionId_=0;return t})(),j=class t{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new t(e,n)}};var Es=class{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){let r=new j(ys,e),i=new j(ys,n);return this.compare(r,i)!==0}minPost(){return j.MIN}};var Df,kf=class extends Es{static get __EMPTY_NODE(){return Df}static set __EMPTY_NODE(e){Df=e}compare(e,n){return Ts(e.name,n.name)}isDefinedOn(e){throw fi("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return j.MIN}maxPost(){return new j(Bi,Df)}makePost(e,n){return v(typeof e=="string","KeyIndex indexValue must always be a string."),new j(e,Df)}toString(){return".key"}},vs=new kf;var ms=class{constructor(e,n,r,i,o=null){this.isReverse_=i,this.resultGenerator_=o,this.nodeStack_=[];let s=1;for(;!e.isEmpty();)if(e=e,s=n?r(e.key,n):1,i&&(s*=-1),s<0)this.isReverse_?e=e.left:e=e.right;else if(s===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}},Jt=(()=>{class t{constructor(n,r,i,o,s){this.key=n,this.value=r,this.color=i??t.RED,this.left=o??Mt.EMPTY_NODE,this.right=s??Mt.EMPTY_NODE}copy(n,r,i,o,s){return new t(n??this.key,r??this.value,i??this.color,o??this.left,s??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(n){return this.left.inorderTraversal(n)||!!n(this.key,this.value)||this.right.inorderTraversal(n)}reverseTraversal(n){return this.right.reverseTraversal(n)||n(this.key,this.value)||this.left.reverseTraversal(n)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(n,r,i){let o=this,s=i(n,o.key);return s<0?o=o.copy(null,null,null,o.left.insert(n,r,i),null):s===0?o=o.copy(null,r,null,null,null):o=o.copy(null,null,null,null,o.right.insert(n,r,i)),o.fixUp_()}removeMin_(){if(this.left.isEmpty())return Mt.EMPTY_NODE;let n=this;return!n.left.isRed_()&&!n.left.left.isRed_()&&(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.removeMin_(),null),n.fixUp_()}remove(n,r){let i,o;if(i=this,r(n,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(n,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),r(n,i.key)===0){if(i.right.isEmpty())return Mt.EMPTY_NODE;o=i.right.min_(),i=i.copy(o.key,o.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(n,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let n=this;return n.right.isRed_()&&!n.left.isRed_()&&(n=n.rotateLeft_()),n.left.isRed_()&&n.left.left.isRed_()&&(n=n.rotateRight_()),n.left.isRed_()&&n.right.isRed_()&&(n=n.colorFlip_()),n}moveRedLeft_(){let n=this.colorFlip_();return n.right.left.isRed_()&&(n=n.copy(null,null,null,null,n.right.rotateRight_()),n=n.rotateLeft_(),n=n.colorFlip_()),n}moveRedRight_(){let n=this.colorFlip_();return n.left.left.isRed_()&&(n=n.rotateRight_(),n=n.colorFlip_()),n}rotateLeft_(){let n=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,n,null)}rotateRight_(){let n=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,n)}colorFlip_(){let n=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,n,r)}checkMaxDepth_(){let n=this.check_();return Math.pow(2,n)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");let n=this.left.check_();if(n!==this.right.check_())throw new Error("Black depths differ");return n+(this.isRed_()?0:1)}}return t.RED=!0,t.BLACK=!1,t})(),Ry=class{copy(e,n,r,i,o){return this}insert(e,n,r){return new Jt(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}},Mt=class t{constructor(e,n=t.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new t(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Jt.BLACK,null,null))}remove(e){return new t(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Jt.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,i=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new ms(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new ms(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new ms(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new ms(this.root_,null,this.comparator_,!0,e)}};Mt.EMPTY_NODE=new Ry;function U$(t,e){return Ts(t.name,e.name)}function pE(t,e){return Ts(t,e)}var Ny;function j$(t){Ny=t}var RR=function(t){return typeof t=="number"?"number:"+cR(t):"string:"+t},NR=function(t){if(t.isLeafNode()){let e=t.val();v(typeof e=="string"||typeof e=="number"||typeof e=="object"&&En(e,".sv"),"Priority must be a string or number.")}else v(t===Ny||t.isEmpty(),"priority of unexpected type.");v(t===Ny||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};var VA,Is=(()=>{class t{static set __childrenNodeConstructor(n){VA=n}static get __childrenNodeConstructor(){return VA}constructor(n,r=t.__childrenNodeConstructor.EMPTY_NODE){this.value_=n,this.priorityNode_=r,this.lazyHash_=null,v(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),NR(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(n){return new t(this.value_,n)}getImmediateChild(n){return n===".priority"?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE}getChild(n){return B(n)?this:$(n)===".priority"?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(n,r){return null}updateImmediateChild(n,r){return n===".priority"?this.updatePriority(r):r.isEmpty()&&n!==".priority"?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(n,r).updatePriority(this.priorityNode_)}updateChild(n,r){let i=$(n);return i===null?r:r.isEmpty()&&i!==".priority"?this:(v(i!==".priority"||Dr(n)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(ce(n),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(n,r){return!1}val(n){return n&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let n="";this.priorityNode_.isEmpty()||(n+="priority:"+RR(this.priorityNode_.val())+":");let r=typeof this.value_;n+=r+":",r==="number"?n+=cR(this.value_):n+=this.value_,this.lazyHash_=oR(n)}return this.lazyHash_}getValue(){return this.value_}compareTo(n){return n===t.__childrenNodeConstructor.EMPTY_NODE?1:n instanceof t.__childrenNodeConstructor?-1:(v(n.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(n))}compareToLeafNode_(n){let r=typeof n.value_,i=typeof this.value_,o=t.VALUE_TYPE_ORDER.indexOf(r),s=t.VALUE_TYPE_ORDER.indexOf(i);return v(o>=0,"Unknown leaf type: "+r),v(s>=0,"Unknown leaf type: "+i),o===s?i==="object"?0:this.value_<n.value_?-1:this.value_===n.value_?0:1:s-o}withIndex(){return this}isIndexed(){return!0}equals(n){if(n===this)return!0;if(n.isLeafNode()){let r=n;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}else return!1}}t.VALUE_TYPE_ORDER=["object","boolean","number","string"];return t})(),MR,kR;function B$(t){MR=t}function V$(t){kR=t}var My=class extends Es{compare(e,n){let r=e.node.getPriority(),i=n.node.getPriority(),o=r.compareTo(i);return o===0?Ts(e.name,n.name):o}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return j.MIN}maxPost(){return new j(Bi,new Is("[PRIORITY-POST]",kR))}makePost(e,n){let r=MR(e);return new j(n,new Is("[PRIORITY-POST]",r))}toString(){return".priority"}},me=new My;var H$=Math.log(2),ky=class{constructor(e){let n=o=>parseInt(Math.log(o)/H$,10),r=o=>parseInt(Array(o+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;let i=r(this.count);this.bits_=e+1&i}nextBitIsOne(){let e=!(this.bits_&1<<this.current_);return this.current_--,e}},xf=function(t,e,n,r){t.sort(e);let i=function(c,l){let u=l-c,d,f;if(u===0)return null;if(u===1)return d=t[c],f=n?n(d):d,new Jt(f,d.node,Jt.BLACK,null,null);{let h=parseInt(u/2,10)+c,p=i(c,h),_=i(h+1,l);return d=t[h],f=n?n(d):d,new Jt(f,d.node,Jt.BLACK,p,_)}},o=function(c){let l=null,u=null,d=t.length,f=function(p,_){let C=d-p,S=d;d-=p;let le=i(C+1,S),_e=t[C],tn=n?n(_e):_e;h(new Jt(tn,_e.node,_,null,le))},h=function(p){l?(l.left=p,l=p):(u=p,l=p)};for(let p=0;p<c.count;++p){let _=c.nextBitIsOne(),C=Math.pow(2,c.count-(p+1));_?f(C,Jt.BLACK):(f(C,Jt.BLACK),f(C,Jt.RED))}return u},s=new ky(t.length),a=o(s);return new Mt(r||e,a)};var dy,gs={},Cs=class t{static get Default(){return v(gs&&me,"ChildrenNode.ts has not been loaded"),dy=dy||new t({".priority":gs},{".priority":me}),dy}constructor(e,n){this.indexes_=e,this.indexSet_=n}get(e){let n=pi(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof Mt?n:null}hasIndex(e){return En(this.indexSet_,e.toString())}addIndex(e,n){v(e!==vs,"KeyIndex always exists and isn't meant to be added to the IndexMap.");let r=[],i=!1,o=n.getIterator(j.Wrap),s=o.getNext();for(;s;)i=i||e.isDefinedOn(s.node),r.push(s),s=o.getNext();let a;i?a=xf(r,e.getCompare()):a=gs;let c=e.toString(),l=Object.assign({},this.indexSet_);l[c]=e;let u=Object.assign({},this.indexes_);return u[c]=a,new t(u,l)}addToIndexes(e,n){let r=Ha(this.indexes_,(i,o)=>{let s=pi(this.indexSet_,o);if(v(s,"Missing index implementation for "+o),i===gs)if(s.isDefinedOn(e.node)){let a=[],c=n.getIterator(j.Wrap),l=c.getNext();for(;l;)l.name!==e.name&&a.push(l),l=c.getNext();return a.push(e),xf(a,s.getCompare())}else return gs;else{let a=n.get(e.name),c=i;return a&&(c=c.remove(new j(e.name,a))),c.insert(e,e.node)}});return new t(r,this.indexSet_)}removeFromIndexes(e,n){let r=Ha(this.indexes_,i=>{if(i===gs)return i;{let o=n.get(e.name);return o?i.remove(new j(e.name,o)):i}});return new t(r,this.indexSet_)}};var Rc,x=(()=>{class t{static get EMPTY_NODE(){return Rc||(Rc=new t(new Mt(pE),null,Cs.Default))}constructor(n,r,i){this.children_=n,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&NR(this.priorityNode_),this.children_.isEmpty()&&v(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Rc}updatePriority(n){return this.children_.isEmpty()?this:new t(this.children_,n,this.indexMap_)}getImmediateChild(n){if(n===".priority")return this.getPriority();{let r=this.children_.get(n);return r===null?Rc:r}}getChild(n){let r=$(n);return r===null?this:this.getImmediateChild(r).getChild(ce(n))}hasChild(n){return this.children_.get(n)!==null}updateImmediateChild(n,r){if(v(r,"We should always be passing snapshot nodes"),n===".priority")return this.updatePriority(r);{let i=new j(n,r),o,s;r.isEmpty()?(o=this.children_.remove(n),s=this.indexMap_.removeFromIndexes(i,this.children_)):(o=this.children_.insert(n,r),s=this.indexMap_.addToIndexes(i,this.children_));let a=o.isEmpty()?Rc:this.priorityNode_;return new t(o,a,s)}}updateChild(n,r){let i=$(n);if(i===null)return r;{v($(n)!==".priority"||Dr(n)===1,".priority must be the last token in a path");let o=this.getImmediateChild(i).updateChild(ce(n),r);return this.updateImmediateChild(i,o)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(n){if(this.isEmpty())return null;let r={},i=0,o=0,s=!0;if(this.forEachChild(me,(a,c)=>{r[a]=c.val(n),i++,s&&t.INTEGER_REGEXP_.test(a)?o=Math.max(o,Number(a)):s=!1}),!n&&s&&o<2*i){let a=[];for(let c in r)a[c]=r[c];return a}else return n&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(this.lazyHash_===null){let n="";this.getPriority().isEmpty()||(n+="priority:"+RR(this.getPriority().val())+":"),this.forEachChild(me,(r,i)=>{let o=i.hash();o!==""&&(n+=":"+r+":"+o)}),this.lazyHash_=n===""?"":oR(n)}return this.lazyHash_}getPredecessorChildName(n,r,i){let o=this.resolveIndex_(i);if(o){let s=o.getPredecessorKey(new j(n,r));return s?s.name:null}else return this.children_.getPredecessorKey(n)}getFirstChildName(n){let r=this.resolveIndex_(n);if(r){let i=r.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(n){let r=this.getFirstChildName(n);return r?new j(r,this.children_.get(r)):null}getLastChildName(n){let r=this.resolveIndex_(n);if(r){let i=r.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(n){let r=this.getLastChildName(n);return r?new j(r,this.children_.get(r)):null}forEachChild(n,r){let i=this.resolveIndex_(n);return i?i.inorderTraversal(o=>r(o.name,o.node)):this.children_.inorderTraversal(r)}getIterator(n){return this.getIteratorFrom(n.minPost(),n)}getIteratorFrom(n,r){let i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(n,o=>o);{let o=this.children_.getIteratorFrom(n.name,j.Wrap),s=o.peek();for(;s!=null&&r.compare(s,n)<0;)o.getNext(),s=o.peek();return o}}getReverseIterator(n){return this.getReverseIteratorFrom(n.maxPost(),n)}getReverseIteratorFrom(n,r){let i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(n,o=>o);{let o=this.children_.getReverseIteratorFrom(n.name,j.Wrap),s=o.peek();for(;s!=null&&r.compare(s,n)>0;)o.getNext(),s=o.peek();return o}}compareTo(n){return this.isEmpty()?n.isEmpty()?0:-1:n.isLeafNode()||n.isEmpty()?1:n===zc?-1:0}withIndex(n){if(n===vs||this.indexMap_.hasIndex(n))return this;{let r=this.indexMap_.addIndex(n,this.children_);return new t(this.children_,this.priorityNode_,r)}}isIndexed(n){return n===vs||this.indexMap_.hasIndex(n)}equals(n){if(n===this)return!0;if(n.isLeafNode())return!1;{let r=n;if(this.getPriority().equals(r.getPriority()))if(this.children_.count()===r.children_.count()){let i=this.getIterator(me),o=r.getIterator(me),s=i.getNext(),a=o.getNext();for(;s&&a;){if(s.name!==a.name||!s.node.equals(a.node))return!1;s=i.getNext(),a=o.getNext()}return s===null&&a===null}else return!1;else return!1}}resolveIndex_(n){return n===vs?null:this.indexMap_.get(n.toString())}}return t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t})(),xy=class extends x{constructor(){super(new Mt(pE),x.EMPTY_NODE,Cs.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return x.EMPTY_NODE}isEmpty(){return!1}},zc=new xy;Object.defineProperties(j,{MIN:{value:new j(ys,x.EMPTY_NODE)},MAX:{value:new j(Bi,zc)}});kf.__EMPTY_NODE=x.EMPTY_NODE;Is.__childrenNodeConstructor=x;j$(zc);V$(zc);var $$=!0;function Pe(t,e=null){if(t===null)return x.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),v(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){let n=t;return new Is(n,Pe(e))}if(!(t instanceof Array)&&$$){let n=[],r=!1;if(st(t,(s,a)=>{if(s.substring(0,1)!=="."){let c=Pe(a);c.isEmpty()||(r=r||!c.getPriority().isEmpty(),n.push(new j(s,c)))}}),n.length===0)return x.EMPTY_NODE;let o=xf(n,U$,s=>s.name,pE);if(r){let s=xf(n,me.getCompare());return new x(o,Pe(e),new Cs({".priority":s},{".priority":me}))}else return new x(o,Pe(e),Cs.Default)}else{let n=x.EMPTY_NODE;return st(t,(r,i)=>{if(En(t,r)&&r.substring(0,1)!=="."){let o=Pe(i);(o.isLeafNode()||!o.isEmpty())&&(n=n.updateImmediateChild(r,o))}}),n.updatePriority(Pe(e))}}B$(Pe);var Oy=class extends Es{constructor(e){super(),this.indexPath_=e,v(!B(e)&&$(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){let r=this.extractChild(e.node),i=this.extractChild(n.node),o=r.compareTo(i);return o===0?Ts(e.name,n.name):o}makePost(e,n){let r=Pe(e),i=x.EMPTY_NODE.updateChild(this.indexPath_,r);return new j(n,i)}maxPost(){let e=x.EMPTY_NODE.updateChild(this.indexPath_,zc);return new j(Bi,e)}toString(){return DR(this.indexPath_,0).join("/")}};var Py=class extends Es{compare(e,n){let r=e.node.compareTo(n.node);return r===0?Ts(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return j.MIN}maxPost(){return j.MAX}makePost(e,n){let r=Pe(e);return new j(n,r)}toString(){return".value"}},W$=new Py;function xR(t){return{type:"value",snapshotNode:t}}function ws(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function Lc(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function Fc(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function z$(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}var Uc=class{constructor(e){this.index_=e}updateChild(e,n,r,i,o,s){v(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");let a=e.getImmediateChild(n);return a.getChild(i).equals(r.getChild(i))&&a.isEmpty()===r.isEmpty()||(s!=null&&(r.isEmpty()?e.hasChild(n)?s.trackChildChange(Lc(n,a)):v(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?s.trackChildChange(ws(n,r)):s.trackChildChange(Fc(n,r,a))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(n,r).withIndex(this.index_)}updateFullNode(e,n,r){return r!=null&&(e.isLeafNode()||e.forEachChild(me,(i,o)=>{n.hasChild(i)||r.trackChildChange(Lc(i,o))}),n.isLeafNode()||n.forEachChild(me,(i,o)=>{if(e.hasChild(i)){let s=e.getImmediateChild(i);s.equals(o)||r.trackChildChange(Fc(i,o,s))}else r.trackChildChange(ws(i,o))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?x.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}};var Of=class t{constructor(e){this.indexedFilter_=new Uc(e.getIndex()),this.index_=e.getIndex(),this.startPost_=t.getStartPost_(e),this.endPost_=t.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){let n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&r}updateChild(e,n,r,i,o,s){return this.matches(new j(n,r))||(r=x.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,r,i,o,s)}updateFullNode(e,n,r){n.isLeafNode()&&(n=x.EMPTY_NODE);let i=n.withIndex(this.index_);i=i.updatePriority(x.EMPTY_NODE);let o=this;return n.forEachChild(me,(s,a)=>{o.matches(new j(s,a))||(i=i.updateImmediateChild(s,x.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){let n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){let n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}};var Ly=class{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{let r=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=n=>{let r=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new Of(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,r,i,o,s){return this.rangedFilter_.matches(new j(n,r))||(r=x.EMPTY_NODE),e.getImmediateChild(n).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,r,i,o,s):this.fullLimitUpdateChild_(e,n,r,o,s)}updateFullNode(e,n,r){let i;if(n.isLeafNode()||n.isEmpty())i=x.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){i=x.EMPTY_NODE.withIndex(this.index_);let o;this.reverse_?o=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):o=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let s=0;for(;o.hasNext()&&s<this.limit_;){let a=o.getNext();if(this.withinDirectionalStart(a))if(this.withinDirectionalEnd(a))i=i.updateImmediateChild(a.name,a.node),s++;else break;else continue}}else{i=n.withIndex(this.index_),i=i.updatePriority(x.EMPTY_NODE);let o;this.reverse_?o=i.getReverseIterator(this.index_):o=i.getIterator(this.index_);let s=0;for(;o.hasNext();){let a=o.getNext();s<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?s++:i=i.updateImmediateChild(a.name,x.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,r,i,o){let s;if(this.reverse_){let d=this.index_.getCompare();s=(f,h)=>d(h,f)}else s=this.index_.getCompare();let a=e;v(a.numChildren()===this.limit_,"");let c=new j(n,r),l=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),u=this.rangedFilter_.matches(c);if(a.hasChild(n)){let d=a.getImmediateChild(n),f=i.getChildAfterChild(this.index_,l,this.reverse_);for(;f!=null&&(f.name===n||a.hasChild(f.name));)f=i.getChildAfterChild(this.index_,f,this.reverse_);let h=f==null?1:s(f,c);if(u&&!r.isEmpty()&&h>=0)return o?.trackChildChange(Fc(n,r,d)),a.updateImmediateChild(n,r);{o?.trackChildChange(Lc(n,d));let _=a.updateImmediateChild(n,x.EMPTY_NODE);return f!=null&&this.rangedFilter_.matches(f)?(o?.trackChildChange(ws(f.name,f.node)),_.updateImmediateChild(f.name,f.node)):_}}else return r.isEmpty()?e:u&&s(l,c)>=0?(o!=null&&(o.trackChildChange(Lc(l.name,l.node)),o.trackChildChange(ws(n,r))),a.updateImmediateChild(n,r).updateImmediateChild(l.name,x.EMPTY_NODE)):e}};var Fy=class t{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=me}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return v(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return v(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:ys}hasEnd(){return this.endSet_}getIndexEndValue(){return v(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return v(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Bi}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return v(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===me}copy(){let e=new t;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}};function G$(t){return t.loadsAllData()?new Uc(t.getIndex()):t.hasLimit()?new Ly(t):new Of(t)}function HA(t){let e={};if(t.isDefault())return e;let n;if(t.index_===me?n="$priority":t.index_===W$?n="$value":t.index_===vs?n="$key":(v(t.index_ instanceof Oy,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=we(n),t.startSet_){let r=t.startAfterSet_?"startAfter":"startAt";e[r]=we(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+we(t.indexStartName_))}if(t.endSet_){let r=t.endBeforeSet_?"endBefore":"endAt";e[r]=we(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+we(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function $A(t){let e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==me&&(e.i=t.index_.toString()),e}var Uy=class t extends Rf{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(v(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,n,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=Wc("p:rest:"),this.listens_={}}listen(e,n,r,i){let o=e._path.toString();this.log_("Listen called for "+o+" "+e._queryIdentifier);let s=t.getListenId_(e,r),a={};this.listens_[s]=a;let c=HA(e._queryParams);this.restRequest_(o+".json",c,(l,u)=>{let d=u;if(l===404&&(d=null,l=null),l===null&&this.onDataUpdate_(o,d,!1,r),pi(this.listens_,s)===a){let f;l?l===401?f="permission_denied":f="rest_error:"+l:f="ok",i(f,null)}})}unlisten(e,n){let r=t.getListenId_(e,n);delete this.listens_[r]}get(e){let n=HA(e._queryParams),r=e._path.toString(),i=new Wt;return this.restRequest_(r+".json",n,(o,s)=>{let a=s;o===404&&(a=null,o=null),o===null?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,o])=>{i&&i.accessToken&&(n.auth=i.accessToken),o&&o.token&&(n.ac=o.token);let s=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+$a(n);this.log_("Sending REST request for "+s);let a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+s+" received. status:",a.status,"response:",a.responseText);let c=null;if(a.status>=200&&a.status<300){try{c=zo(a.responseText)}catch{ot("Failed to parse JSON response for "+s+": "+a.responseText)}r(null,c)}else a.status!==401&&a.status!==404&&ot("Got unsuccessful REST response for "+s+" Status: "+a.status),r(a.status);r=null}},a.open("GET",s,!0),a.send()})}};var jy=class{constructor(){this.rootNode_=x.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}};function Pf(){return{value:null,children:new Map}}function OR(t,e,n){if(B(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{let r=$(e);t.children.has(r)||t.children.set(r,Pf());let i=t.children.get(r);e=ce(e),OR(i,e,n)}}function By(t,e,n){t.value!==null?n(e,t.value):q$(t,(r,i)=>{let o=new ne(e.toString()+"/"+r);By(i,o,n)})}function q$(t,e){t.children.forEach((n,r)=>{e(r,n)})}var Vy=class{constructor(e){this.collection_=e,this.last_=null}get(){let e=this.collection_.get(),n=Object.assign({},e);return this.last_&&st(this.last_,(r,i)=>{n[r]=n[r]-i}),this.last_=e,n}};var WA=10*1e3,K$=30*1e3,Y$=300*1e3,Hy=class{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new Vy(e);let r=WA+(K$-WA)*Math.random();Mc(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){let e=this.statsListener_.get(),n={},r=!1;st(e,(i,o)=>{o>0&&En(this.statsToReport_,i)&&(n[i]=o,r=!0)}),r&&this.server_.reportStats(n),Mc(this.reportStats_.bind(this),Math.floor(Math.random()*2*Y$))}};var Tn=(function(t){return t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",t})(Tn||{});function PR(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function gE(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function mE(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}var $y=class t{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=Tn.ACK_USER_WRITE,this.source=PR()}operationForChild(e){if(B(this.path)){if(this.affectedTree.value!=null)return v(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{let n=this.affectedTree.subtree(new ne(e));return new t(K(),n,this.revert)}}else return v($(this.path)===e,"operationForChild called for unrelated child."),new t(ce(this.path),this.affectedTree,this.revert)}};var Lf=class t{constructor(e,n){this.source=e,this.path=n,this.type=Tn.LISTEN_COMPLETE}operationForChild(e){return B(this.path)?new t(this.source,K()):new t(this.source,ce(this.path))}};var bs=class t{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=Tn.OVERWRITE}operationForChild(e){return B(this.path)?new t(this.source,K(),this.snap.getImmediateChild(e)):new t(this.source,ce(this.path),this.snap)}};var Ff=class t{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=Tn.MERGE}operationForChild(e){if(B(this.path)){let n=this.children.subtree(new ne(e));return n.isEmpty()?null:n.value?new bs(this.source,K(),n.value):new t(this.source,K(),n)}else return v($(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new t(this.source,ce(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}};var Sn=class{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(B(e))return this.isFullyInitialized()&&!this.filtered_;let n=$(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}};var Wy=class{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}};function Q$(t,e,n,r){let i=[],o=[];return e.forEach(s=>{s.type==="child_changed"&&t.index_.indexedValueChanged(s.oldSnap,s.snapshotNode)&&o.push(z$(s.childName,s.snapshotNode))}),Nc(t,i,"child_removed",e,r,n),Nc(t,i,"child_added",e,r,n),Nc(t,i,"child_moved",o,r,n),Nc(t,i,"child_changed",e,r,n),Nc(t,i,"value",e,r,n),i}function Nc(t,e,n,r,i,o){let s=r.filter(a=>a.type===n);s.sort((a,c)=>J$(t,a,c)),s.forEach(a=>{let c=Z$(t,a,o);i.forEach(l=>{l.respondsTo(a.type)&&e.push(l.createEvent(c,t.query_))})})}function Z$(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function J$(t,e,n){if(e.childName==null||n.childName==null)throw fi("Should only compare child_ events.");let r=new j(e.childName,e.snapshotNode),i=new j(n.childName,n.snapshotNode);return t.index_.compare(r,i)}function qf(t,e){return{eventCache:t,serverCache:e}}function xc(t,e,n,r){return qf(new Sn(e,n,r),t.serverCache)}function LR(t,e,n,r){return qf(t.eventCache,new Sn(e,n,r))}function Uf(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function Vi(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}var fy,X$=()=>(fy||(fy=new Mt(e$)),fy),at=class t{static fromObject(e){let n=new t(null);return st(e,(r,i)=>{n=n.set(new ne(r),i)}),n}constructor(e,n=X$()){this.value=e,this.children=n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:K(),value:this.value};if(B(e))return null;{let r=$(e),i=this.children.get(r);if(i!==null){let o=i.findRootMostMatchingPathAndValue(ce(e),n);return o!=null?{path:Se(new ne(r),o.path),value:o.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(B(e))return this;{let n=$(e),r=this.children.get(n);return r!==null?r.subtree(ce(e)):new t(null)}}set(e,n){if(B(e))return new t(n,this.children);{let r=$(e),o=(this.children.get(r)||new t(null)).set(ce(e),n),s=this.children.insert(r,o);return new t(this.value,s)}}remove(e){if(B(e))return this.children.isEmpty()?new t(null):new t(null,this.children);{let n=$(e),r=this.children.get(n);if(r){let i=r.remove(ce(e)),o;return i.isEmpty()?o=this.children.remove(n):o=this.children.insert(n,i),this.value===null&&o.isEmpty()?new t(null):new t(this.value,o)}else return this}}get(e){if(B(e))return this.value;{let n=$(e),r=this.children.get(n);return r?r.get(ce(e)):null}}setTree(e,n){if(B(e))return n;{let r=$(e),o=(this.children.get(r)||new t(null)).setTree(ce(e),n),s;return o.isEmpty()?s=this.children.remove(r):s=this.children.insert(r,o),new t(this.value,s)}}fold(e){return this.fold_(K(),e)}fold_(e,n){let r={};return this.children.inorderTraversal((i,o)=>{r[i]=o.fold_(Se(e,i),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,K(),n)}findOnPath_(e,n,r){let i=this.value?r(n,this.value):!1;if(i)return i;if(B(e))return null;{let o=$(e),s=this.children.get(o);return s?s.findOnPath_(ce(e),Se(n,o),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,K(),n)}foreachOnPath_(e,n,r){if(B(e))return this;{this.value&&r(n,this.value);let i=$(e),o=this.children.get(i);return o?o.foreachOnPath_(ce(e),Se(n,i),r):new t(null)}}foreach(e){this.foreach_(K(),e)}foreach_(e,n){this.children.inorderTraversal((r,i)=>{i.foreach_(Se(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}};var en=class t{constructor(e){this.writeTree_=e}static empty(){return new t(new at(null))}};function Oc(t,e,n){if(B(e))return new en(new at(n));{let r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){let i=r.path,o=r.value,s=Je(i,e);return o=o.updateChild(s,n),new en(t.writeTree_.set(i,o))}else{let i=new at(n),o=t.writeTree_.setTree(e,i);return new en(o)}}}function zA(t,e,n){let r=t;return st(n,(i,o)=>{r=Oc(r,Se(e,i),o)}),r}function GA(t,e){if(B(e))return en.empty();{let n=t.writeTree_.setTree(e,new at(null));return new en(n)}}function zy(t,e){return Hi(t,e)!=null}function Hi(t,e){let n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(Je(n.path,e)):null}function qA(t){let e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(me,(r,i)=>{e.push(new j(r,i))}):t.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&e.push(new j(r,i.value))}),e}function wr(t,e){if(B(e))return t;{let n=Hi(t,e);return n!=null?new en(new at(n)):new en(t.writeTree_.subtree(e))}}function Gy(t){return t.writeTree_.isEmpty()}function Ds(t,e){return FR(K(),t.writeTree_,e)}function FR(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((i,o)=>{i===".priority"?(v(o.value!==null,"Priority writes must always be leaf nodes"),r=o.value):n=FR(Se(t,i),o,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(Se(t,".priority"),r)),n}}function Kf(t,e){return VR(e,t)}function eW(t,e,n,r,i){v(r>t.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:i}),i&&(t.visibleWrites=Oc(t.visibleWrites,e,n)),t.lastWriteId=r}function tW(t,e){for(let n=0;n<t.allWrites.length;n++){let r=t.allWrites[n];if(r.writeId===e)return r}return null}function nW(t,e){let n=t.allWrites.findIndex(a=>a.writeId===e);v(n>=0,"removeWrite called with nonexistent writeId.");let r=t.allWrites[n];t.allWrites.splice(n,1);let i=r.visible,o=!1,s=t.allWrites.length-1;for(;i&&s>=0;){let a=t.allWrites[s];a.visible&&(s>=n&&rW(a,r.path)?i=!1:Xt(r.path,a.path)&&(o=!0)),s--}if(i){if(o)return iW(t),!0;if(r.snap)t.visibleWrites=GA(t.visibleWrites,r.path);else{let a=r.children;st(a,c=>{t.visibleWrites=GA(t.visibleWrites,Se(r.path,c))})}return!0}else return!1}function rW(t,e){if(t.snap)return Xt(t.path,e);for(let n in t.children)if(t.children.hasOwnProperty(n)&&Xt(Se(t.path,n),e))return!0;return!1}function iW(t){t.visibleWrites=UR(t.allWrites,oW,K()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function oW(t){return t.visible}function UR(t,e,n){let r=en.empty();for(let i=0;i<t.length;++i){let o=t[i];if(e(o)){let s=o.path,a;if(o.snap)Xt(n,s)?(a=Je(n,s),r=Oc(r,a,o.snap)):Xt(s,n)&&(a=Je(s,n),r=Oc(r,K(),o.snap.getChild(a)));else if(o.children){if(Xt(n,s))a=Je(n,s),r=zA(r,a,o.children);else if(Xt(s,n))if(a=Je(s,n),B(a))r=zA(r,K(),o.children);else{let c=pi(o.children,$(a));if(c){let l=c.getChild(ce(a));r=Oc(r,K(),l)}}}else throw fi("WriteRecord should have .snap or .children")}}return r}function jR(t,e,n,r,i){if(!r&&!i){let o=Hi(t.visibleWrites,e);if(o!=null)return o;{let s=wr(t.visibleWrites,e);if(Gy(s))return n;if(n==null&&!zy(s,K()))return null;{let a=n||x.EMPTY_NODE;return Ds(s,a)}}}else{let o=wr(t.visibleWrites,e);if(!i&&Gy(o))return n;if(!i&&n==null&&!zy(o,K()))return null;{let s=function(l){return(l.visible||i)&&(!r||!~r.indexOf(l.writeId))&&(Xt(l.path,e)||Xt(e,l.path))},a=UR(t.allWrites,s,e),c=n||x.EMPTY_NODE;return Ds(a,c)}}}function sW(t,e,n){let r=x.EMPTY_NODE,i=Hi(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(me,(o,s)=>{r=r.updateImmediateChild(o,s)}),r;if(n){let o=wr(t.visibleWrites,e);return n.forEachChild(me,(s,a)=>{let c=Ds(wr(o,new ne(s)),a);r=r.updateImmediateChild(s,c)}),qA(o).forEach(s=>{r=r.updateImmediateChild(s.name,s.node)}),r}else{let o=wr(t.visibleWrites,e);return qA(o).forEach(s=>{r=r.updateImmediateChild(s.name,s.node)}),r}}function aW(t,e,n,r,i){v(r||i,"Either existingEventSnap or existingServerSnap must exist");let o=Se(e,n);if(zy(t.visibleWrites,o))return null;{let s=wr(t.visibleWrites,o);return Gy(s)?i.getChild(n):Ds(s,i.getChild(n))}}function cW(t,e,n,r){let i=Se(e,n),o=Hi(t.visibleWrites,i);if(o!=null)return o;if(r.isCompleteForChild(n)){let s=wr(t.visibleWrites,i);return Ds(s,r.getNode().getImmediateChild(n))}else return null}function lW(t,e){return Hi(t.visibleWrites,e)}function uW(t,e,n,r,i,o,s){let a,c=wr(t.visibleWrites,e),l=Hi(c,K());if(l!=null)a=l;else if(n!=null)a=Ds(c,n);else return[];if(a=a.withIndex(s),!a.isEmpty()&&!a.isLeafNode()){let u=[],d=s.getCompare(),f=o?a.getReverseIteratorFrom(r,s):a.getIteratorFrom(r,s),h=f.getNext();for(;h&&u.length<i;)d(h,r)!==0&&u.push(h),h=f.getNext();return u}else return[]}function dW(){return{visibleWrites:en.empty(),allWrites:[],lastWriteId:-1}}function jf(t,e,n,r){return jR(t.writeTree,t.treePath,e,n,r)}function _E(t,e){return sW(t.writeTree,t.treePath,e)}function KA(t,e,n,r){return aW(t.writeTree,t.treePath,e,n,r)}function Bf(t,e){return lW(t.writeTree,Se(t.treePath,e))}function fW(t,e,n,r,i,o){return uW(t.writeTree,t.treePath,e,n,r,i,o)}function vE(t,e,n){return cW(t.writeTree,t.treePath,e,n)}function BR(t,e){return VR(Se(t.treePath,e),t.writeTree)}function VR(t,e){return{treePath:t,writeTree:e}}var qy=class{constructor(){this.changeMap=new Map}trackChildChange(e){let n=e.type,r=e.childName;v(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),v(r!==".priority","Only non-priority child changes can be tracked.");let i=this.changeMap.get(r);if(i){let o=i.type;if(n==="child_added"&&o==="child_removed")this.changeMap.set(r,Fc(r,e.snapshotNode,i.snapshotNode));else if(n==="child_removed"&&o==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&o==="child_changed")this.changeMap.set(r,Lc(r,i.oldSnap));else if(n==="child_changed"&&o==="child_added")this.changeMap.set(r,ws(r,e.snapshotNode));else if(n==="child_changed"&&o==="child_changed")this.changeMap.set(r,Fc(r,e.snapshotNode,i.oldSnap));else throw fi("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}};var Ky=class{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}},HR=new Ky,jc=class{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){let n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{let r=this.optCompleteServerCache_!=null?new Sn(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return vE(this.writes_,e,r)}}getChildAfterChild(e,n,r){let i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Vi(this.viewCache_),o=fW(this.writes_,i,n,1,r,e);return o.length===0?null:o[0]}};function hW(t){return{filter:t}}function pW(t,e){v(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),v(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function gW(t,e,n,r,i){let o=new qy,s,a;if(n.type===Tn.OVERWRITE){let l=n;l.source.fromUser?s=Yy(t,e,l.path,l.snap,r,i,o):(v(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered()&&!B(l.path),s=Vf(t,e,l.path,l.snap,r,i,a,o))}else if(n.type===Tn.MERGE){let l=n;l.source.fromUser?s=_W(t,e,l.path,l.children,r,i,o):(v(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered(),s=Qy(t,e,l.path,l.children,r,i,a,o))}else if(n.type===Tn.ACK_USER_WRITE){let l=n;l.revert?s=EW(t,e,l.path,r,i,o):s=vW(t,e,l.path,l.affectedTree,r,i,o)}else if(n.type===Tn.LISTEN_COMPLETE)s=yW(t,e,n.path,r,o);else throw fi("Unknown operation type: "+n.type);let c=o.getChanges();return mW(e,s,c),{viewCache:s,changes:c}}function mW(t,e,n){let r=e.eventCache;if(r.isFullyInitialized()){let i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=Uf(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(xR(Uf(e)))}}function $R(t,e,n,r,i,o){let s=e.eventCache;if(Bf(r,n)!=null)return e;{let a,c;if(B(n))if(v(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){let l=Vi(e),u=l instanceof x?l:x.EMPTY_NODE,d=_E(r,u);a=t.filter.updateFullNode(e.eventCache.getNode(),d,o)}else{let l=jf(r,Vi(e));a=t.filter.updateFullNode(e.eventCache.getNode(),l,o)}else{let l=$(n);if(l===".priority"){v(Dr(n)===1,"Can't have a priority with additional path components");let u=s.getNode();c=e.serverCache.getNode();let d=KA(r,n,u,c);d!=null?a=t.filter.updatePriority(u,d):a=s.getNode()}else{let u=ce(n),d;if(s.isCompleteForChild(l)){c=e.serverCache.getNode();let f=KA(r,n,s.getNode(),c);f!=null?d=s.getNode().getImmediateChild(l).updateChild(u,f):d=s.getNode().getImmediateChild(l)}else d=vE(r,l,e.serverCache);d!=null?a=t.filter.updateChild(s.getNode(),l,d,u,i,o):a=s.getNode()}}return xc(e,a,s.isFullyInitialized()||B(n),t.filter.filtersNodes())}}function Vf(t,e,n,r,i,o,s,a){let c=e.serverCache,l,u=s?t.filter:t.filter.getIndexedFilter();if(B(n))l=u.updateFullNode(c.getNode(),r,null);else if(u.filtersNodes()&&!c.isFiltered()){let h=c.getNode().updateChild(n,r);l=u.updateFullNode(c.getNode(),h,null)}else{let h=$(n);if(!c.isCompleteForPath(n)&&Dr(n)>1)return e;let p=ce(n),C=c.getNode().getImmediateChild(h).updateChild(p,r);h===".priority"?l=u.updatePriority(c.getNode(),C):l=u.updateChild(c.getNode(),h,C,p,HR,null)}let d=LR(e,l,c.isFullyInitialized()||B(n),u.filtersNodes()),f=new jc(i,d,o);return $R(t,d,n,i,f,a)}function Yy(t,e,n,r,i,o,s){let a=e.eventCache,c,l,u=new jc(i,e,o);if(B(n))l=t.filter.updateFullNode(e.eventCache.getNode(),r,s),c=xc(e,l,!0,t.filter.filtersNodes());else{let d=$(n);if(d===".priority")l=t.filter.updatePriority(e.eventCache.getNode(),r),c=xc(e,l,a.isFullyInitialized(),a.isFiltered());else{let f=ce(n),h=a.getNode().getImmediateChild(d),p;if(B(f))p=r;else{let _=u.getCompleteChild(d);_!=null?bR(f)===".priority"&&_.getChild(TR(f)).isEmpty()?p=_:p=_.updateChild(f,r):p=x.EMPTY_NODE}if(h.equals(p))c=e;else{let _=t.filter.updateChild(a.getNode(),d,p,f,u,s);c=xc(e,_,a.isFullyInitialized(),t.filter.filtersNodes())}}}return c}function YA(t,e){return t.eventCache.isCompleteForChild(e)}function _W(t,e,n,r,i,o,s){let a=e;return r.foreach((c,l)=>{let u=Se(n,c);YA(e,$(u))&&(a=Yy(t,a,u,l,i,o,s))}),r.foreach((c,l)=>{let u=Se(n,c);YA(e,$(u))||(a=Yy(t,a,u,l,i,o,s))}),a}function QA(t,e,n){return n.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function Qy(t,e,n,r,i,o,s,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let c=e,l;B(n)?l=r:l=new at(null).setTree(n,r);let u=e.serverCache.getNode();return l.children.inorderTraversal((d,f)=>{if(u.hasChild(d)){let h=e.serverCache.getNode().getImmediateChild(d),p=QA(t,h,f);c=Vf(t,c,new ne(d),p,i,o,s,a)}}),l.children.inorderTraversal((d,f)=>{let h=!e.serverCache.isCompleteForChild(d)&&f.value===null;if(!u.hasChild(d)&&!h){let p=e.serverCache.getNode().getImmediateChild(d),_=QA(t,p,f);c=Vf(t,c,new ne(d),_,i,o,s,a)}}),c}function vW(t,e,n,r,i,o,s){if(Bf(i,n)!=null)return e;let a=e.serverCache.isFiltered(),c=e.serverCache;if(r.value!=null){if(B(n)&&c.isFullyInitialized()||c.isCompleteForPath(n))return Vf(t,e,n,c.getNode().getChild(n),i,o,a,s);if(B(n)){let l=new at(null);return c.getNode().forEachChild(vs,(u,d)=>{l=l.set(new ne(u),d)}),Qy(t,e,n,l,i,o,a,s)}else return e}else{let l=new at(null);return r.foreach((u,d)=>{let f=Se(n,u);c.isCompleteForPath(f)&&(l=l.set(u,c.getNode().getChild(f)))}),Qy(t,e,n,l,i,o,a,s)}}function yW(t,e,n,r,i){let o=e.serverCache,s=LR(e,o.getNode(),o.isFullyInitialized()||B(n),o.isFiltered());return $R(t,s,n,r,HR,i)}function EW(t,e,n,r,i,o){let s;if(Bf(r,n)!=null)return e;{let a=new jc(r,e,i),c=e.eventCache.getNode(),l;if(B(n)||$(n)===".priority"){let u;if(e.serverCache.isFullyInitialized())u=jf(r,Vi(e));else{let d=e.serverCache.getNode();v(d instanceof x,"serverChildren would be complete if leaf node"),u=_E(r,d)}u=u,l=t.filter.updateFullNode(c,u,o)}else{let u=$(n),d=vE(r,u,e.serverCache);d==null&&e.serverCache.isCompleteForChild(u)&&(d=c.getImmediateChild(u)),d!=null?l=t.filter.updateChild(c,u,d,ce(n),a,o):e.eventCache.getNode().hasChild(u)?l=t.filter.updateChild(c,u,x.EMPTY_NODE,ce(n),a,o):l=c,l.isEmpty()&&e.serverCache.isFullyInitialized()&&(s=jf(r,Vi(e)),s.isLeafNode()&&(l=t.filter.updateFullNode(l,s,o)))}return s=e.serverCache.isFullyInitialized()||Bf(r,K())!=null,xc(e,l,s,t.filter.filtersNodes())}}var Zy=class{constructor(e,n){this.query_=e,this.eventRegistrations_=[];let r=this.query_._queryParams,i=new Uc(r.getIndex()),o=G$(r);this.processor_=hW(o);let s=n.serverCache,a=n.eventCache,c=i.updateFullNode(x.EMPTY_NODE,s.getNode(),null),l=o.updateFullNode(x.EMPTY_NODE,a.getNode(),null),u=new Sn(c,s.isFullyInitialized(),i.filtersNodes()),d=new Sn(l,a.isFullyInitialized(),o.filtersNodes());this.viewCache_=qf(d,u),this.eventGenerator_=new Wy(this.query_)}get query(){return this.query_}};function IW(t){return t.viewCache_.serverCache.getNode()}function CW(t){return Uf(t.viewCache_)}function wW(t,e){let n=Vi(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!B(e)&&!n.getImmediateChild($(e)).isEmpty())?n.getChild(e):null}function ZA(t){return t.eventRegistrations_.length===0}function bW(t,e){t.eventRegistrations_.push(e)}function JA(t,e,n){let r=[];if(n){v(e==null,"A cancel should cancel all event registrations.");let i=t.query._path;t.eventRegistrations_.forEach(o=>{let s=o.createCancelEvent(n,i);s&&r.push(s)})}if(e){let i=[];for(let o=0;o<t.eventRegistrations_.length;++o){let s=t.eventRegistrations_[o];if(!s.matches(e))i.push(s);else if(e.hasAnyCallback()){i=i.concat(t.eventRegistrations_.slice(o+1));break}}t.eventRegistrations_=i}else t.eventRegistrations_=[];return r}function XA(t,e,n,r){e.type===Tn.MERGE&&e.source.queryId!==null&&(v(Vi(t.viewCache_),"We should always have a full cache before handling merges"),v(Uf(t.viewCache_),"Missing event cache, even though we have a server cache"));let i=t.viewCache_,o=gW(t.processor_,i,e,n,r);return pW(t.processor_,o.viewCache),v(o.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=o.viewCache,WR(t,o.changes,o.viewCache.eventCache.getNode(),null)}function DW(t,e){let n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(me,(o,s)=>{r.push(ws(o,s))}),n.isFullyInitialized()&&r.push(xR(n.getNode())),WR(t,r,n.getNode(),e)}function WR(t,e,n,r){let i=r?[r]:t.eventRegistrations_;return Q$(t.eventGenerator_,e,n,i)}var Hf,$f=class{constructor(){this.views=new Map}};function TW(t){v(!Hf,"__referenceConstructor has already been defined"),Hf=t}function SW(){return v(Hf,"Reference.ts has not been loaded"),Hf}function AW(t){return t.views.size===0}function yE(t,e,n,r){let i=e.source.queryId;if(i!==null){let o=t.views.get(i);return v(o!=null,"SyncTree gave us an op for an invalid query."),XA(o,e,n,r)}else{let o=[];for(let s of t.views.values())o=o.concat(XA(s,e,n,r));return o}}function zR(t,e,n,r,i){let o=e._queryIdentifier,s=t.views.get(o);if(!s){let a=jf(n,i?r:null),c=!1;a?c=!0:r instanceof x?(a=_E(n,r),c=!1):(a=x.EMPTY_NODE,c=!1);let l=qf(new Sn(a,c,!1),new Sn(r,i,!1));return new Zy(e,l)}return s}function RW(t,e,n,r,i,o){let s=zR(t,e,r,i,o);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,s),bW(s,n),DW(s,n)}function NW(t,e,n,r){let i=e._queryIdentifier,o=[],s=[],a=Tr(t);if(i==="default")for(let[c,l]of t.views.entries())s=s.concat(JA(l,n,r)),ZA(l)&&(t.views.delete(c),l.query._queryParams.loadsAllData()||o.push(l.query));else{let c=t.views.get(i);c&&(s=s.concat(JA(c,n,r)),ZA(c)&&(t.views.delete(i),c.query._queryParams.loadsAllData()||o.push(c.query)))}return a&&!Tr(t)&&o.push(new(SW())(e._repo,e._path)),{removed:o,events:s}}function GR(t){let e=[];for(let n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function br(t,e){let n=null;for(let r of t.views.values())n=n||wW(r,e);return n}function qR(t,e){if(e._queryParams.loadsAllData())return Yf(t);{let r=e._queryIdentifier;return t.views.get(r)}}function KR(t,e){return qR(t,e)!=null}function Tr(t){return Yf(t)!=null}function Yf(t){for(let e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}var Wf;function MW(t){v(!Wf,"__referenceConstructor has already been defined"),Wf=t}function kW(){return v(Wf,"Reference.ts has not been loaded"),Wf}var xW=1,zf=class{constructor(e){this.listenProvider_=e,this.syncPointTree_=new at(null),this.pendingWriteTree_=dW(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}};function YR(t,e,n,r,i){return eW(t.pendingWriteTree_,e,n,r,i),i?qc(t,new bs(PR(),e,n)):[]}function Ui(t,e,n=!1){let r=tW(t.pendingWriteTree_,e);if(nW(t.pendingWriteTree_,e)){let o=new at(null);return r.snap!=null?o=o.set(K(),!0):st(r.children,s=>{o=o.set(new ne(s),!0)}),qc(t,new $y(r.path,o,n))}else return[]}function Gc(t,e,n){return qc(t,new bs(gE(),e,n))}function OW(t,e,n){let r=at.fromObject(n);return qc(t,new Ff(gE(),e,r))}function PW(t,e){return qc(t,new Lf(gE(),e))}function LW(t,e,n){let r=IE(t,n);if(r){let i=CE(r),o=i.path,s=i.queryId,a=Je(o,e),c=new Lf(mE(s),a);return wE(t,o,c)}else return[]}function QR(t,e,n,r,i=!1){let o=e._path,s=t.syncPointTree_.get(o),a=[];if(s&&(e._queryIdentifier==="default"||KR(s,e))){let c=NW(s,e,n,r);AW(s)&&(t.syncPointTree_=t.syncPointTree_.remove(o));let l=c.removed;if(a=c.events,!i){let u=l.findIndex(f=>f._queryParams.loadsAllData())!==-1,d=t.syncPointTree_.findOnPath(o,(f,h)=>Tr(h));if(u&&!d){let f=t.syncPointTree_.subtree(o);if(!f.isEmpty()){let h=BW(f);for(let p=0;p<h.length;++p){let _=h[p],C=_.query,S=eN(t,_);t.listenProvider_.startListening(Pc(C),Bc(t,C),S.hashFn,S.onComplete)}}}!d&&l.length>0&&!r&&(u?t.listenProvider_.stopListening(Pc(e),null):l.forEach(f=>{let h=t.queryToTagMap.get(Qf(f));t.listenProvider_.stopListening(Pc(f),h)}))}VW(t,l)}return a}function ZR(t,e,n,r){let i=IE(t,r);if(i!=null){let o=CE(i),s=o.path,a=o.queryId,c=Je(s,e),l=new bs(mE(a),c,n);return wE(t,s,l)}else return[]}function FW(t,e,n,r){let i=IE(t,r);if(i){let o=CE(i),s=o.path,a=o.queryId,c=Je(s,e),l=at.fromObject(n),u=new Ff(mE(a),c,l);return wE(t,s,u)}else return[]}function UW(t,e,n,r=!1){let i=e._path,o=null,s=!1;t.syncPointTree_.foreachOnPath(i,(f,h)=>{let p=Je(f,i);o=o||br(h,p),s=s||Tr(h)});let a=t.syncPointTree_.get(i);a?(s=s||Tr(a),o=o||br(a,K())):(a=new $f,t.syncPointTree_=t.syncPointTree_.set(i,a));let c;o!=null?c=!0:(c=!1,o=x.EMPTY_NODE,t.syncPointTree_.subtree(i).foreachChild((h,p)=>{let _=br(p,K());_&&(o=o.updateImmediateChild(h,_))}));let l=KR(a,e);if(!l&&!e._queryParams.loadsAllData()){let f=Qf(e);v(!t.queryToTagMap.has(f),"View does not exist, but we have a tag");let h=HW();t.queryToTagMap.set(f,h),t.tagToQueryMap.set(h,f)}let u=Kf(t.pendingWriteTree_,i),d=RW(a,e,n,u,o,c);if(!l&&!s&&!r){let f=qR(a,e);d=d.concat($W(t,e,f))}return d}function EE(t,e,n){let i=t.pendingWriteTree_,o=t.syncPointTree_.findOnPath(e,(s,a)=>{let c=Je(s,e),l=br(a,c);if(l)return l});return jR(i,e,o,n,!0)}function jW(t,e){let n=e._path,r=null;t.syncPointTree_.foreachOnPath(n,(l,u)=>{let d=Je(l,n);r=r||br(u,d)});let i=t.syncPointTree_.get(n);i?r=r||br(i,K()):(i=new $f,t.syncPointTree_=t.syncPointTree_.set(n,i));let o=r!=null,s=o?new Sn(r,!0,!1):null,a=Kf(t.pendingWriteTree_,e._path),c=zR(i,e,a,o?s.getNode():x.EMPTY_NODE,o);return CW(c)}function qc(t,e){return JR(e,t.syncPointTree_,null,Kf(t.pendingWriteTree_,K()))}function JR(t,e,n,r){if(B(t.path))return XR(t,e,n,r);{let i=e.get(K());n==null&&i!=null&&(n=br(i,K()));let o=[],s=$(t.path),a=t.operationForChild(s),c=e.children.get(s);if(c&&a){let l=n?n.getImmediateChild(s):null,u=BR(r,s);o=o.concat(JR(a,c,l,u))}return i&&(o=o.concat(yE(i,t,r,n))),o}}function XR(t,e,n,r){let i=e.get(K());n==null&&i!=null&&(n=br(i,K()));let o=[];return e.children.inorderTraversal((s,a)=>{let c=n?n.getImmediateChild(s):null,l=BR(r,s),u=t.operationForChild(s);u&&(o=o.concat(XR(u,a,c,l)))}),i&&(o=o.concat(yE(i,t,r,n))),o}function eN(t,e){let n=e.query,r=Bc(t,n);return{hashFn:()=>(IW(e)||x.EMPTY_NODE).hash(),onComplete:i=>{if(i==="ok")return r?LW(t,n._path,r):PW(t,n._path);{let o=r$(i,n);return QR(t,n,null,o)}}}}function Bc(t,e){let n=Qf(e);return t.queryToTagMap.get(n)}function Qf(t){return t._path.toString()+"$"+t._queryIdentifier}function IE(t,e){return t.tagToQueryMap.get(e)}function CE(t){let e=t.indexOf("$");return v(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new ne(t.substr(0,e))}}function wE(t,e,n){let r=t.syncPointTree_.get(e);v(r,"Missing sync point for query tag that we're tracking");let i=Kf(t.pendingWriteTree_,e);return yE(r,n,i,null)}function BW(t){return t.fold((e,n,r)=>{if(n&&Tr(n))return[Yf(n)];{let i=[];return n&&(i=GR(n)),st(r,(o,s)=>{i=i.concat(s)}),i}})}function Pc(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(kW())(t._repo,t._path):t}function VW(t,e){for(let n=0;n<e.length;++n){let r=e[n];if(!r._queryParams.loadsAllData()){let i=Qf(r),o=t.queryToTagMap.get(i);t.queryToTagMap.delete(i),t.tagToQueryMap.delete(o)}}}function HW(){return xW++}function $W(t,e,n){let r=e._path,i=Bc(t,e),o=eN(t,n),s=t.listenProvider_.startListening(Pc(e),i,o.hashFn,o.onComplete),a=t.syncPointTree_.subtree(r);if(i)v(!Tr(a.value),"If we're adding a query, it shouldn't be shadowed");else{let c=a.fold((l,u,d)=>{if(!B(l)&&u&&Tr(u))return[Yf(u).query];{let f=[];return u&&(f=f.concat(GR(u).map(h=>h.query))),st(d,(h,p)=>{f=f.concat(p)}),f}});for(let l=0;l<c.length;++l){let u=c[l];t.listenProvider_.stopListening(Pc(u),Bc(t,u))}}return s}var Jy=class t{constructor(e){this.node_=e}getImmediateChild(e){let n=this.node_.getImmediateChild(e);return new t(n)}node(){return this.node_}},Xy=class t{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){let n=Se(this.path_,e);return new t(this.syncTree_,n)}node(){return EE(this.syncTree_,this.path_)}},WW=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},eR=function(t,e,n){if(!t||typeof t!="object")return t;if(v(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return zW(t[".sv"],e,n);if(typeof t[".sv"]=="object")return GW(t[".sv"],e);v(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},zW=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:v(!1,"Unexpected server value: "+t)}},GW=function(t,e,n){t.hasOwnProperty("increment")||v(!1,"Unexpected server value: "+JSON.stringify(t,null,2));let r=t.increment;typeof r!="number"&&v(!1,"Unexpected increment value: "+r);let i=e.node();if(v(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;let s=i.getValue();return typeof s!="number"?r:s+r},qW=function(t,e,n,r){return bE(e,new Xy(n,t),r)},tN=function(t,e,n){return bE(t,new Jy(e),n)};function bE(t,e,n){let r=t.getPriority().val(),i=eR(r,e.getImmediateChild(".priority"),n),o;if(t.isLeafNode()){let s=t,a=eR(s.getValue(),e,n);return a!==s.getValue()||i!==s.getPriority().val()?new Is(a,Pe(i)):t}else{let s=t;return o=s,i!==s.getPriority().val()&&(o=o.updatePriority(new Is(i))),s.forEachChild(me,(a,c)=>{let l=bE(c,e.getImmediateChild(a),n);l!==c&&(o=o.updateImmediateChild(a,l))}),o}}var Vc=class{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}};function DE(t,e){let n=e instanceof ne?e:new ne(e),r=t,i=$(n);for(;i!==null;){let o=pi(r.node.children,i)||{children:{},childCount:0};r=new Vc(i,r,o),n=ce(n),i=$(n)}return r}function As(t){return t.node.value}function nN(t,e){t.node.value=e,eE(t)}function rN(t){return t.node.childCount>0}function KW(t){return As(t)===void 0&&!rN(t)}function Zf(t,e){st(t.node.children,(n,r)=>{e(new Vc(n,t,r))})}function iN(t,e,n,r){n&&!r&&e(t),Zf(t,i=>{iN(i,e,!0,r)}),n&&r&&e(t)}function YW(t,e,n){let r=n?t:t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function Kc(t){return new ne(t.parent===null?t.name:Kc(t.parent)+"/"+t.name)}function eE(t){t.parent!==null&&QW(t.parent,t.name,t)}function QW(t,e,n){let r=KW(n),i=En(t.node.children,e);r&&i?(delete t.node.children[e],t.node.childCount--,eE(t)):!r&&!i&&(t.node.children[e]=n.node,t.node.childCount++,eE(t))}var ZW=/[\[\].#$\/\u0000-\u001F\u007F]/,JW=/[\[\].#$\u0000-\u001F\u007F]/,hy=10*1024*1024,oN=function(t){return typeof t=="string"&&t.length!==0&&!ZW.test(t)},sN=function(t){return typeof t=="string"&&t.length!==0&&!JW.test(t)},XW=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),sN(t)};var e3=function(t,e,n,r){r&&e===void 0||TE(kd(t,"value"),e,n)},TE=function(t,e,n){let r=n instanceof ne?new Sy(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+Li(r));if(typeof e=="function")throw new Error(t+"contains a function "+Li(r)+" with contents = "+e.toString());if(sR(e))throw new Error(t+"contains "+e.toString()+" "+Li(r));if(typeof e=="string"&&e.length>hy/3&&Wa(e)>hy)throw new Error(t+"contains a string greater than "+hy+" utf8 bytes "+Li(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let i=!1,o=!1;if(st(e,(s,a)=>{if(s===".value")i=!0;else if(s!==".priority"&&s!==".sv"&&(o=!0,!oN(s)))throw new Error(t+" contains an invalid key ("+s+") "+Li(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);k$(r,s),TE(t,a,r),x$(r)}),i&&o)throw new Error(t+' contains ".value" child '+Li(r)+" in addition to actual children.")}};var aN=function(t,e,n,r){if(!(r&&n===void 0)&&!sN(n))throw new Error(kd(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},t3=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),aN(t,e,n,r)},n3=function(t,e){if($(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},r3=function(t,e){let n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!oN(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!XW(n))throw new Error(kd(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};var tE=class{constructor(){this.eventLists_=[],this.recursionDepth_=0}};function cN(t,e){let n=null;for(let r=0;r<e.length;r++){let i=e[r],o=i.getPath();n!==null&&!SR(o,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:o}),n.events.push(i)}n&&t.eventLists_.push(n)}function An(t,e,n){cN(t,n),i3(t,r=>Xt(r,e)||Xt(e,r))}function i3(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){let i=t.eventLists_[r];if(i){let o=i.path;e(o)?(o3(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function o3(t){for(let e=0;e<t.events.length;e++){let n=t.events[e];if(n!==null){t.events[e]=null;let r=n.getEventRunner();ji&&We("event: "+n.toString()),Ss(r)}}}var s3="repo_interrupt",a3=25,nE=class{constructor(e,n,r,i){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new tE,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Pf(),this.transactionQueueTree_=new Vc,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}};function c3(t,e,n){if(t.stats_=fE(t.repoInfo_),t.forceRestClient_||a$())t.server_=new Uy(t.repoInfo_,(r,i,o,s)=>{tR(t,r,i,o,s)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>nR(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{we(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new hE(t.repoInfo_,e,(r,i,o,s)=>{tR(t,r,i,o,s)},r=>{nR(t,r)},r=>{u3(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=l$(t.repoInfo_,()=>new Hy(t.stats_,t.server_)),t.infoData_=new jy,t.infoSyncTree_=new zf({startListening:(r,i,o,s)=>{let a=[],c=t.infoData_.getNode(r._path);return c.isEmpty()||(a=Gc(t.infoSyncTree_,r._path,c),setTimeout(()=>{s("ok")},0)),a},stopListening:()=>{}}),AE(t,"connected",!1),t.serverSyncTree_=new zf({startListening:(r,i,o,s)=>(t.server_.listen(r,o,i,(a,c)=>{let l=s(a,c);An(t.eventQueue_,r._path,l)}),[]),stopListening:(r,i)=>{t.server_.unlisten(r,i)}})}function l3(t){let n=t.infoData_.getNode(new ne(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function SE(t){return WW({timestamp:l3(t)})}function tR(t,e,n,r,i){t.dataUpdateCount++;let o=new ne(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let s=[];if(i)if(r){let c=Ha(n,l=>Pe(l));s=FW(t.serverSyncTree_,o,c,i)}else{let c=Pe(n);s=ZR(t.serverSyncTree_,o,c,i)}else if(r){let c=Ha(n,l=>Pe(l));s=OW(t.serverSyncTree_,o,c)}else{let c=Pe(n);s=Gc(t.serverSyncTree_,o,c)}let a=o;s.length>0&&(a=Xf(t,o)),An(t.eventQueue_,a,s)}function nR(t,e){AE(t,"connected",e),e===!1&&h3(t)}function u3(t,e){st(e,(n,r)=>{AE(t,n,r)})}function AE(t,e,n){let r=new ne("/.info/"+e),i=Pe(n);t.infoData_.updateSnapshot(r,i);let o=Gc(t.infoSyncTree_,r,i);An(t.eventQueue_,r,o)}function lN(t){return t.nextWriteId_++}function d3(t,e,n){let r=jW(t.serverSyncTree_,e);return r!=null?Promise.resolve(r):t.server_.get(e).then(i=>{let o=Pe(i).withIndex(e._queryParams.getIndex());UW(t.serverSyncTree_,e,n,!0);let s;if(e._queryParams.loadsAllData())s=Gc(t.serverSyncTree_,e._path,o);else{let a=Bc(t.serverSyncTree_,e);s=ZR(t.serverSyncTree_,e._path,o,a)}return An(t.eventQueue_,e._path,s),QR(t.serverSyncTree_,e,n,null,!0),o},i=>(Jf(t,"get for query "+we(e)+" failed: "+i),Promise.reject(new Error(i))))}function f3(t,e,n,r,i){Jf(t,"set",{path:e.toString(),value:n,priority:r});let o=SE(t),s=Pe(n,r),a=EE(t.serverSyncTree_,e),c=tN(s,a,o),l=lN(t),u=YR(t.serverSyncTree_,e,c,l,!0);cN(t.eventQueue_,u),t.server_.put(e.toString(),s.val(!0),(f,h)=>{let p=f==="ok";p||ot("set at "+e+" failed: "+f);let _=Ui(t.serverSyncTree_,l,!p);An(t.eventQueue_,e,_),g3(t,i,f,h)});let d=pN(t,e);Xf(t,d),An(t.eventQueue_,d,[])}function h3(t){Jf(t,"onDisconnectEvents");let e=SE(t),n=Pf();By(t.onDisconnect_,K(),(i,o)=>{let s=qW(i,o,t.serverSyncTree_,e);OR(n,i,s)});let r=[];By(n,K(),(i,o)=>{r=r.concat(Gc(t.serverSyncTree_,i,o));let s=pN(t,i);Xf(t,s)}),t.onDisconnect_=Pf(),An(t.eventQueue_,K(),r)}function p3(t){t.persistentConnection_&&t.persistentConnection_.interrupt(s3)}function Jf(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),We(n,...e)}function g3(t,e,n,r){e&&Ss(()=>{if(n==="ok")e(null);else{let i=(n||"error").toUpperCase(),o=i;r&&(o+=": "+r);let s=new Error(o);s.code=i,e(s)}})}function uN(t,e,n){return EE(t.serverSyncTree_,e,n)||x.EMPTY_NODE}function RE(t,e=t.transactionQueueTree_){if(e||eh(t,e),As(e)){let n=fN(t,e);v(n.length>0,"Sending zero length transaction queue"),n.every(i=>i.status===0)&&m3(t,Kc(e),n)}else rN(e)&&Zf(e,n=>{RE(t,n)})}function m3(t,e,n){let r=n.map(l=>l.currentWriteId),i=uN(t,e,r),o=i,s=i.hash();for(let l=0;l<n.length;l++){let u=n[l];v(u.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;let d=Je(e,u.path);o=o.updateChild(d,u.currentOutputSnapshotRaw)}let a=o.val(!0),c=e;t.server_.put(c.toString(),a,l=>{Jf(t,"transaction put response",{path:c.toString(),status:l});let u=[];if(l==="ok"){let d=[];for(let f=0;f<n.length;f++)n[f].status=2,u=u.concat(Ui(t.serverSyncTree_,n[f].currentWriteId)),n[f].onComplete&&d.push(()=>n[f].onComplete(null,!0,n[f].currentOutputSnapshotResolved)),n[f].unwatcher();eh(t,DE(t.transactionQueueTree_,e)),RE(t,t.transactionQueueTree_),An(t.eventQueue_,e,u);for(let f=0;f<d.length;f++)Ss(d[f])}else{if(l==="datastale")for(let d=0;d<n.length;d++)n[d].status===3?n[d].status=4:n[d].status=0;else{ot("transaction at "+c.toString()+" failed: "+l);for(let d=0;d<n.length;d++)n[d].status=4,n[d].abortReason=l}Xf(t,e)}},s)}function Xf(t,e){let n=dN(t,e),r=Kc(n),i=fN(t,n);return _3(t,i,r),r}function _3(t,e,n){if(e.length===0)return;let r=[],i=[],s=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){let c=e[a],l=Je(n,c.path),u=!1,d;if(v(l!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),c.status===4)u=!0,d=c.abortReason,i=i.concat(Ui(t.serverSyncTree_,c.currentWriteId,!0));else if(c.status===0)if(c.retryCount>=a3)u=!0,d="maxretry",i=i.concat(Ui(t.serverSyncTree_,c.currentWriteId,!0));else{let f=uN(t,c.path,s);c.currentInputSnapshot=f;let h=e[a].update(f.val());if(h!==void 0){TE("transaction failed: Data returned ",h,c.path);let p=Pe(h);typeof h=="object"&&h!=null&&En(h,".priority")||(p=p.updatePriority(f.getPriority()));let C=c.currentWriteId,S=SE(t),le=tN(p,f,S);c.currentOutputSnapshotRaw=p,c.currentOutputSnapshotResolved=le,c.currentWriteId=lN(t),s.splice(s.indexOf(C),1),i=i.concat(YR(t.serverSyncTree_,c.path,le,c.currentWriteId,c.applyLocally)),i=i.concat(Ui(t.serverSyncTree_,C,!0))}else u=!0,d="nodata",i=i.concat(Ui(t.serverSyncTree_,c.currentWriteId,!0))}An(t.eventQueue_,n,i),i=[],u&&(e[a].status=2,(function(f){setTimeout(f,Math.floor(0))})(e[a].unwatcher),e[a].onComplete&&(d==="nodata"?r.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):r.push(()=>e[a].onComplete(new Error(d),!1,null))))}eh(t,t.transactionQueueTree_);for(let a=0;a<r.length;a++)Ss(r[a]);RE(t,t.transactionQueueTree_)}function dN(t,e){let n,r=t.transactionQueueTree_;for(n=$(e);n!==null&&As(r)===void 0;)r=DE(r,n),e=ce(e),n=$(e);return r}function fN(t,e){let n=[];return hN(t,e,n),n.sort((r,i)=>r.order-i.order),n}function hN(t,e,n){let r=As(e);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);Zf(e,i=>{hN(t,i,n)})}function eh(t,e){let n=As(e);if(n){let r=0;for(let i=0;i<n.length;i++)n[i].status!==2&&(n[r]=n[i],r++);n.length=r,nN(e,n.length>0?n:void 0)}Zf(e,r=>{eh(t,r)})}function pN(t,e){let n=Kc(dN(t,e)),r=DE(t.transactionQueueTree_,e);return YW(r,i=>{py(t,i)}),py(t,r),iN(r,i=>{py(t,i)}),n}function py(t,e){let n=As(e);if(n){let r=[],i=[],o=-1;for(let s=0;s<n.length;s++)n[s].status===3||(n[s].status===1?(v(o===s-1,"All SENT items should be at beginning of queue."),o=s,n[s].status=3,n[s].abortReason="set"):(v(n[s].status===0,"Unexpected transaction status in abort"),n[s].unwatcher(),i=i.concat(Ui(t.serverSyncTree_,n[s].currentWriteId,!0)),n[s].onComplete&&r.push(n[s].onComplete.bind(null,new Error("set"),!1,null))));o===-1?nN(e,void 0):n.length=o+1,An(t.eventQueue_,Kc(e),i);for(let s=0;s<r.length;s++)Ss(r[s])}}function v3(t){let e="",n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}function y3(t){let e={};t.charAt(0)==="?"&&(t=t.substring(1));for(let n of t.split("&")){if(n.length===0)continue;let r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):ot(`Invalid query segment '${n}' in query '${t}'`)}return e}var rR=function(t,e){let n=E3(t),r=n.namespace;n.domain==="firebase.com"&&Kn(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&Kn("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||JH();let i=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new Sf(n.host,n.secure,r,i,e,"",r!==n.subdomain),path:new ne(n.pathString)}},E3=function(t){let e="",n="",r="",i="",o="",s=!0,a="https",c=443;if(typeof t=="string"){let l=t.indexOf("//");l>=0&&(a=t.substring(0,l-1),t=t.substring(l+2));let u=t.indexOf("/");u===-1&&(u=t.length);let d=t.indexOf("?");d===-1&&(d=t.length),e=t.substring(0,Math.min(u,d)),u<d&&(i=v3(t.substring(u,d)));let f=y3(t.substring(Math.min(t.length,d)));l=e.indexOf(":"),l>=0?(s=a==="https"||a==="wss",c=parseInt(e.substring(l+1),10)):l=e.length;let h=e.slice(0,l);if(h.toLowerCase()==="localhost")n="localhost";else if(h.split(".").length<=2)n=h;else{let p=e.indexOf(".");r=e.substring(0,p).toLowerCase(),n=e.substring(p+1),o=r}"ns"in f&&(o=f.ns)}return{host:e,port:c,domain:n,subdomain:r,secure:s,scheme:a,pathString:i,namespace:o}};var rE=class{constructor(e,n,r,i){this.eventType=e,this.eventRegistration=n,this.snapshot=r,this.prevName=i}getPath(){let e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+we(this.snapshot.exportVal())}},iE=class{constructor(e,n,r){this.eventRegistration=e,this.error=n,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}};var oE=class{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return v(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}};var sE=class t{constructor(e,n,r,i){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=i}get key(){return B(this._path)?null:bR(this._path)}get ref(){return new Yn(this._repo,this._path)}get _queryIdentifier(){let e=$A(this._queryParams),n=dE(e);return n==="{}"?"default":n}get _queryObject(){return $A(this._queryParams)}isEqual(e){if(e=pt(e),!(e instanceof t))return!1;let n=this._repo===e._repo,r=SR(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return n&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+M$(this._path)}};var Yn=class t extends sE{constructor(e,n){super(e,n,new Fy,!1)}get parent(){let e=TR(this._path);return e===null?null:new t(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}},Gf=class t{constructor(e,n,r){this._node=e,this.ref=n,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){let n=new ne(e),r=Hc(this.ref,e);return new t(this._node.getChild(n),r,me)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,i)=>e(new t(i,Hc(this.ref,r),me)))}hasChild(e){let n=new ne(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}};function gN(t,e){return t=pt(t),t._checkNotDeleted("ref"),e!==void 0?Hc(t._root,e):t._root}function Hc(t,e){return t=pt(t),$(t._path)===null?t3("child","path",e,!1):aN("child","path",e,!1),new Yn(t._repo,Se(t._path,e))}function mN(t,e){t=pt(t),n3("set",t._path),e3("set",e,t._path,!1);let n=new Wt;return f3(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}function _N(t){t=pt(t);let e=new oE(()=>{}),n=new aE(e);return d3(t._repo,t,n).then(r=>new Gf(r,new Yn(t._repo,t._path),t._queryParams.getIndex()))}var aE=class t{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){let r=n._queryParams.getIndex();return new rE("value",this,new Gf(e.snapshotNode,new Yn(n._repo,n._path),r))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new iE(this,e,n):null}matches(e){return e instanceof t?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}};TW(Yn);MW(Yn);var I3="FIREBASE_DATABASE_EMULATOR_HOST",cE={},C3=!1;function w3(t,e,n,r){let i=e.lastIndexOf(":"),o=e.substring(0,i),s=hi(o);t.repoInfo_=new Sf(e,s,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0,n),r&&(t.authTokenProvider_=r)}function b3(t,e,n,r,i){let o=r||t.options.databaseURL;o===void 0&&(t.options.projectId||Kn("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),We("Using default host for project ",t.options.projectId),o=`${t.options.projectId}-default-rtdb.firebaseio.com`);let s=rR(o,i),a=s.repoInfo,c,l;typeof process<"u"&&process.env&&(l=process.env[I3]),l?(c=!0,o=`http://${l}?ns=${a.namespace}`,s=rR(o,i),a=s.repoInfo):c=!s.repoInfo.secure;let u=i&&c?new kc(kc.OWNER):new Ey(t.name,t.options,e);r3("Invalid Firebase Database URL",s),B(s.path)||Kn("Database URL must point to the root of a Firebase Database (not including a child path).");let d=T3(a,t,u,new yy(t,n));return new lE(d,t)}function D3(t,e){let n=cE[e];(!n||n[t.key]!==t)&&Kn(`Database ${e}(${t.repoInfo_}) has already been deleted.`),p3(t),delete n[t.key]}function T3(t,e,n,r){let i=cE[e.name];i||(i={},cE[e.name]=i);let o=i[t.toURLString()];return o&&Kn("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new nE(t,C3,n,r),i[t.toURLString()]=o,o}var lE=class{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(c3(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Yn(this._repo,K())),this._rootInternal}_delete(){return this._rootInternal!==null&&(D3(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Kn("Cannot call "+e+" on a deleted database.")}};function vN(t=Ko(),e){let n=Ld(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){let r=sT("database");r&&yN(n,...r)}return n}function yN(t,e,n,r={}){t=pt(t),t._checkNotDeleted("useEmulator");let i=`${e}:${n}`,o=t._repoInternal;if(t._instanceStarted){if(i===t._repoInternal.repoInfo_.host&&gi(r,o.repoInfo_.emulatorOptions))return;Kn("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let s;if(o.repoInfo_.nodeAdmin)r.mockUserToken&&Kn('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new kc(kc.OWNER);else if(r.mockUserToken){let a=typeof r.mockUserToken=="string"?r.mockUserToken:cT(r.mockUserToken,t.app.options.projectId);s=new kc(a)}hi(e)&&(e_(e),t_("Database",!0)),w3(o,i,r,s)}function S3(t){YH(qo),qt(new Ze("database",(e,{instanceIdentifier:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),o=e.getProvider("app-check-internal");return b3(r,i,o,n)},"PUBLIC").setMultipleInstances(!0)),Ie(TA,SA,t),Ie(TA,SA,"esm2017")}hE.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};hE.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};S3();var $i=class{constructor(e){return e}},EN="database",NE=class{constructor(){return Qo(EN)}};var ME=new T("angularfire2.database-instances");function A3(t,e){let n=jd(EN,t,e);return n&&new $i(n)}function R3(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new $i(r)}}var N3={provide:NE,deps:[[new Pn,ME]]},M3={provide:$i,useFactory:A3,deps:[[new Pn,ME],Ei]};function IN(t,...e){return Ie("angularfire",vi.full,"rtdb"),yt([M3,N3,{provide:ME,useFactory:R3(t),multi:!0,deps:[fe,De,yi,Ka,[new Pn,sf],[new Pn,Vd],...e]}])}var CN=wn(Hc,!0,2);var wN=wn(_N,!0),bN=wn(vN,!0);var Sr=wn(gN,!0,2);var Wi=wn(mN,!0,2);function k3(t,e){t&1&&(F(0,"h3"),m(1,"Game Over!"),U())}function x3(t,e){if(t&1&&(F(0,"h4"),m(1),U()),t&2){let n=So();Ke(),pa("Score: ",n.counter)}}function O3(t,e){t&1&&(F(0,"h2"),m(1,"Get a high score to enter your name into the leaderboard!"),U())}function P3(t,e){if(t&1){let n=Wg();F(0,"div")(1,"h4"),m(2,"INSERT YOUR NAME INTO THE LEADERBOARD!"),U(),F(3,"form",19)(4,"p"),Ye(5,"input",20),F(6,"button",21),rt("click",function(){Bl(n);let i=So();return Vl(i.checkUserScoreAgainstLeaderboard())}),m(7,"Submit"),U()()()()}}var th=class t{ngOnInit(){this.getLeaderboardFromDB()}db=g($i);lose=!1;turn=!1;greaterThanLeaderBoard=!1;order=[];playerOrder=[];counter=0;turnPlayerCounter=0;buttonText="Start";topPlayerNames=[];topPlayerScores=[];persons={};audio1=new Audio("https://s3.amazonaws.com/freecodecamp/simonSound1.mp3");audio2=new Audio("https://s3.amazonaws.com/freecodecamp/simonSound2.mp3");audio3=new Audio("https://s3.amazonaws.com/freecodecamp/simonSound3.mp3");audio4=new Audio("https://s3.amazonaws.com/freecodecamp/simonSound4.mp3");async getLeaderboardFromDB(){this.topPlayerNames=[],this.topPlayerScores=[],this.persons={};let e=Sr(this.db);try{let n=await wN(CN(e,"names"));if(n.exists()){let r=n.val();for(let i=1;i<=3;i++){let o=`name${i}`;r[o]&&(this.persons[o]={Name:r[o].name,Score:r[o].score},this.topPlayerNames.push(r[o].name),this.topPlayerScores.push(r[o].score))}this.updateLeaderboardUI()}}catch(n){console.error("Error fetching leaderboard:",n)}}updateLeaderboardUI(){for(var e=1;e<=3;e++){let n=document.getElementById("name"+e),r=document.getElementById("value"+e);n&&r&&this.topPlayerNames[e-1]!==void 0&&(n.innerHTML=`${e}: <b>${this.topPlayerNames[e-1]}</b>&nbsp&nbsp&nbspScore: `,r.innerHTML=this.topPlayerScores[e-1].toString())}}StartGame(){this.lose=!1,this.turn=!1,this.greaterThanLeaderBoard=!1,this.order=[],this.playerOrder=[],this.counter=0,this.turnPlayerCounter=0,this.buttonText="Start",this.getLeaderboardFromDB(),this.RunGame()}RunGame(){if(!this.lose)this.turn?this.turnPlayerCounter+=1:(this.playerOrder=[],this.counter+=1,this.turnPlayerCounter=0,this.order.push(Math.floor(Math.random()*4)+1),this.RunComputerTurn(),this.turn=!0);else{this.buttonText="Restart";for(var e=0;e<3;e++)this.counter>this.topPlayerScores[e]&&(this.greaterThanLeaderBoard=!0)}}async RunPlayerTurn(e){e==1?this.RunTopLeft():e==2?this.RunTopRight():e==3?this.RunBotLeft():this.RunBotRight(),await new Promise(n=>setTimeout(n,500)),document.getElementById("topleft").style.background="darkgreen",document.getElementById("topright").style.background="darkred",document.getElementById("bottomleft").style.background="goldenrod",document.getElementById("bottomright").style.background="darkblue",await new Promise(n=>setTimeout(n,500)),this.lose=this.compareUserToSpecificComputerPlacement(e),this.turnPlayerCounter==this.order.length&&(this.turn=!1),this.RunGame()}compareUserToSpecificComputerPlacement(e){return e==this.order[this.playerOrder.length]?(this.playerOrder.push(e),!1):!0}async RunComputerTurn(){for(var e=0;e<this.order.length;e++)this.order[e]==1?this.RunTopLeft():this.order[e]==2?this.RunTopRight():this.order[e]==3?this.RunBotLeft():this.order[e]==4&&this.RunBotRight(),await new Promise(n=>setTimeout(n,500)),document.getElementById("topleft").style.background="darkgreen",document.getElementById("topright").style.background="darkred",document.getElementById("bottomleft").style.background="goldenrod",document.getElementById("bottomright").style.background="darkblue",await new Promise(n=>setTimeout(n,500));this.RunGame()}RunTopLeft(){this.audio1.play(),document.getElementById("topleft").style.background="lightgreen"}RunTopRight(){this.audio2.play(),document.getElementById("topright").style.background="lightsalmon"}RunBotLeft(){this.audio3.play(),document.getElementById("bottomleft").style.background="lightgoldenrodyellow"}RunBotRight(){this.audio4.play(),document.getElementById("bottomright").style.background="lightblue"}checkUserScoreAgainstLeaderboard(){var e=document.getElementById("name").value;this.counter>this.topPlayerScores[0]?this.changeRowOne(e):this.counter>this.topPlayerScores[1]?this.changeRowTwo(e):this.counter>this.topPlayerScores[2]&&this.changeRowThree(e)}async changeRowThree(e){await Wi(Sr(this.db,"names/name3"),{name:e,score:this.counter}),this.getLeaderboardFromDB()}async changeRowTwo(e){let n=DA();await Wi(Sr(this.db,"names/name2"),{name:e,score:this.counter}),await Wi(Sr(this.db,"names/name3"),{name:this.topPlayerNames[1],score:this.topPlayerScores[1]}),this.getLeaderboardFromDB()}async changeRowOne(e){await Wi(Sr(this.db,"names/name1"),{name:e,score:this.counter}),await Wi(Sr(this.db,"names/name2"),{name:this.topPlayerNames[0],score:this.topPlayerScores[0]}),await Wi(Sr(this.db,"names/name3"),{name:this.topPlayerNames[1],score:this.topPlayerScores[1]}),this.getLeaderboardFromDB()}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Ee({type:t,selectors:[["app-games"]],decls:49,vars:6,consts:[[1,"desk"],["id","name1"],["id","value1"],["id","name2"],["id","value2"],["id","name3"],["id","value3"],[4,"ngIf"],["id","outer-circle"],["id","topleft",3,"click"],["id","topright",3,"click"],["id","bottomleft",3,"click"],["id","bottomright",3,"click"],["id","inner-circle"],["id","title",1,"font-effect-emboss"],["id","switches"],["id","start",1,"button",3,"click"],["id","turn"],[1,"text2"],["id","contactForm"],["type","text","name","name","id","name","value","John","required",""],["type","submit","id","submitButton",3,"click"]],template:function(n,r){n&1&&(F(0,"h1")(1,"u"),m(2,"LEADERBOARD"),U()(),F(3,"div",0),Ye(4,"span",1)(5,"span",2),U(),F(6,"div",0),Ye(7,"span",3)(8,"span",4),U(),F(9,"div",0),Ye(10,"span",5)(11,"span",6),U(),bo(12,k3,2,0,"h3",7)(13,x3,2,1,"h4",7)(14,O3,2,0,"h2",7)(15,P3,8,0,"div",7),F(16,"div",8)(17,"button",9),rt("click",function(){return r.RunPlayerTurn(1)}),U(),F(18,"button",10),rt("click",function(){return r.RunPlayerTurn(2)}),U(),F(19,"button",11),rt("click",function(){return r.RunPlayerTurn(3)}),U(),F(20,"button",12),rt("click",function(){return r.RunPlayerTurn(4)}),U(),F(21,"div",13)(22,"div",14),m(23,"SIMON"),U(),F(24,"div",15)(25,"button",16),rt("click",function(){return r.StartGame()}),m(26),U()(),F(27,"div",17),m(28),U(),F(29,"div",18),m(30,"SCORE"),U()()(),Ye(31,"br")(32,"br")(33,"br")(34,"br")(35,"br")(36,"br")(37,"br")(38,"br")(39,"br")(40,"br")(41,"br")(42,"br")(43,"br")(44,"br")(45,"br")(46,"br")(47,"br")(48,"br")),n&2&&(Ke(12),St("ngIf",r.lose),Ke(),St("ngIf",r.lose),Ke(),St("ngIf",!r.lose),Ke(),St("ngIf",r.greaterThanLeaderBoard),Ke(11),ha(r.buttonText),Ke(2),ha(r.counter))},dependencies:[No,om],styles:[".toggle[_ngcontent-%COMP%]{margin-left:20px;margin-right:20px}.button[_ngcontent-%COMP%]{border-radius:50%!important;font-size:1.5em;background-color:#d3d3d3;margin-left:70px}#switches[_ngcontent-%COMP%]{position:absolute;font-family:Original Surfer,cursive;margin-left:26px;margin-top:110px}.text2[_ngcontent-%COMP%]{position:absolute;font-family:Original Surfer,cursive;margin-left:105px;margin-top:197px}.text1[_ngcontent-%COMP%]{position:absolute;font-family:Original Surfer,cursive;margin-left:19px;margin-top:142px}.text1[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:last-child{padding-left:70px}#title[_ngcontent-%COMP%]{font-family:Original Surfer,cursive;position:absolute;font-size:40px;margin-left:55px;margin-top:40px}#turn[_ngcontent-%COMP%]{position:absolute;background:#300;color:red;font-family:courier;font-size:20px;height:30px;width:50px;margin-left:105px;margin-top:170px;text-align:center;vertical-align:middle;line-height:30px}#outer-circle[_ngcontent-%COMP%]{background:#ffe4e4;border-radius:1em;height:1em;width:.5em;position:relative;margin:auto;margin-top:calc(10em + 5%)}#topleft[_ngcontent-%COMP%]{position:absolute;height:18em;width:18em;border-radius:18em 0 0;-moz-border-radius:18em 0 0 0;-webkit-border-radius:18em 0 0 0;background:#006400;top:50%;left:50%;margin:-18em 0 0 -18em;border-style:solid;border-width:5px;box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box}#topright[_ngcontent-%COMP%]{position:absolute;height:18em;width:18em;border-radius:0 18em 0 0;-moz-border-radius:0 18em 0 0;-webkit-border-radius:0 18em 0 0;background:#8b0000;top:50%;left:50%;margin:-18em 0 0;border-style:solid;border-width:5px;box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box}#bottomleft[_ngcontent-%COMP%]{position:absolute;height:18em;width:18em;border-radius:0 0 0 18em;-moz-border-radius:0 0 0 18em;-webkit-border-radius:0 0 0 18em;background:#daa520;top:50%;left:50%;margin:0 -18em;border-style:solid;border-width:5px;box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box}#bottomright[_ngcontent-%COMP%]{position:absolute;height:18em;width:18em;border-radius:0 0 18em;-moz-border-radius:0 0 18em 0;-webkit-border-radius:0 0 18em 0;background:#00008b;top:50%;left:50%;margin:0 0 -18em;border-style:solid;border-width:5px;box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box}#inner-circle[_ngcontent-%COMP%]{position:absolute;background:gray;border-radius:50%;height:18em;width:18em;border-style:solid;border-width:10px;top:50%;left:50%;margin:-140px 0 0 -140px;box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box}#topleft[_ngcontent-%COMP%]:hover{background:#90ee90;cursor:pointer}#topright[_ngcontent-%COMP%]:hover{background:#ffa07a;cursor:pointer}#bottomleft[_ngcontent-%COMP%]:hover{background:#fafad2;cursor:pointer}#bottomright[_ngcontent-%COMP%]:hover{background:#add8e6;cursor:pointer}h3[_ngcontent-%COMP%]{margin-top:1.5%;text-align:center;font-size:3vw;color:red}h4[_ngcontent-%COMP%]{margin-top:2%;text-align:center;font-size:3vw;color:#000}h1[_ngcontent-%COMP%]{text-align:center;margin-top:1%;font-size:2.5vw}.desk[_ngcontent-%COMP%]{text-align:center;margin-top:2%}#name1[_ngcontent-%COMP%], #name2[_ngcontent-%COMP%], #name3[_ngcontent-%COMP%]{font-size:2.5vw}#value1[_ngcontent-%COMP%], #value2[_ngcontent-%COMP%], #value3[_ngcontent-%COMP%]{font-size:2.5vw;color:#e40000}#contactForm[_ngcontent-%COMP%]{font-size:2.5vw;text-align:center;margin-top:2%}input[type=text][_ngcontent-%COMP%]{padding:12px 20px;margin:8px 0;box-sizing:border-box;border:3px solid #ccc;-webkit-transition:.5s;transition:.5s;outline:none}button[_ngcontent-%COMP%]{margin-left:1%}h4[_ngcontent-%COMP%]{font-size:2vw}#submitButton[_ngcontent-%COMP%]{background-color:#04aa6d;border:none;color:#fff;padding:15px 32px;text-align:center;text-decoration:none;display:inline-block;font-size:16px;margin:4px 2px;cursor:pointer;-webkit-transition-duration:.4s;transition-duration:.4s;border-radius:12px}#submitButton[_ngcontent-%COMP%]:hover{box-shadow:0 12px 16px #0000003d,0 17px 50px #00000030}h2[_ngcontent-%COMP%]{text-align:center;margin-top:2%;font-size:2vw}"]})};var nh=class t{static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Ee({type:t,selectors:[["app-faq"]],decls:126,vars:0,template:function(n,r){n&1&&(b(0,"h2"),m(1,"FAQs"),y(),b(2,"ul")(3,"li")(4,"strong"),m(5,"Can I bring a plus 1?"),y(),m(6," Talk to Leah or Sam beforehand"),y(),H(7,"br"),b(8,"li")(9,"strong"),m(10,"Are kids invited?"),y(),m(11," Only if they got the invite, there will be alchohol here"),y(),H(12,"br"),b(13,"li")(14,"strong"),m(15,"Is there a dress code?"),y(),m(16," Yes, see the Event Info tab"),y(),H(17,"br"),b(18,"li")(19,"strong"),m(20,"What will the weather be like?"),y(),m(21," Assume it will be warm and pray for no rain"),y(),H(22,"br"),b(23,"li")(24,"strong"),m(25,"Where are the ceremony and the reception taking place?"),y(),m(26," See the Event Info tab"),y(),H(27,"br"),b(28,"li")(29,"strong"),m(30,"Will the ceremony and reception be indoors or outdoors?"),y(),m(31," See the Event Info tab"),y(),H(32,"br"),b(33,"li")(34,"strong"),m(35,"What happens after the ceremony?"),y(),m(36," Party"),y(),H(37,"br"),b(38,"li")(39,"strong"),m(40,"Am I invited to the rehearsal dinner?"),y(),m(41," If you have to ask yourself this question, then no"),y(),H(42,"br"),b(43,"li")(44,"strong"),m(45,"How do I get to the wedding venue?"),y(),m(46," See the Event Info tab"),y(),H(47,"br"),b(48,"li")(49,"strong"),m(50,"What time should I arrive?"),y(),m(51," 1 hr before the wedding start"),y(),H(52,"br"),b(53,"li")(54,"strong"),m(55,"Where should guests park?"),y(),m(56," See the Event Info tab"),y(),H(57,"br"),b(58,"li")(59,"strong"),m(60,"Is parking free?"),y(),m(61," Yes"),y(),H(62,"br"),b(63,"li")(64,"strong"),m(65,"Do you have a hotel block for guests?"),y(),m(66," No, there are cheap hotels nearby"),y(),H(67,"br"),b(68,"li")(69,"strong"),m(70,"When is the RSVP deadline?"),y(),m(71," 2 months prior"),y(),H(72,"br"),b(73,"li")(74,"strong"),m(75,"Do I need to mail back my RSVP or can I do it online?"),y(),m(76," Don't need to mail back, see RSVP tab"),y(),H(77,"br"),b(78,"li")(79,"strong"),m(80,"Are the ceremony and reception location wheelchair accessible?"),y(),m(81," Yes"),y(),H(82,"br"),b(83,"li")(84,"strong"),m(85,"Will there be food and drinks during cocktail hour?"),y(),m(86," Only if you are good"),y(),H(87,"br"),b(88,"li")(89,"strong"),m(90,"Will dinner be served at the reception? What kind of food? "),y(),m(91," Yes, tbd"),y(),H(92,"br"),b(93,"li")(94,"strong"),m(95,"Will there be any vegan, vegetarian, gluten-free or special diet options?"),y(),m(96," Lol, lmao even"),y(),H(97,"br"),b(98,"li")(99,"strong"),m(100,"Where are you registered?"),y(),m(101," Kentucky"),y(),H(102,"br"),b(103,"li")(104,"strong"),m(105,"Should I bring a gift to your destination wedding?"),y(),m(106," Highly encoruage"),y(),H(107,"br"),b(108,"li")(109,"strong"),m(110,"Will transportation be provided between the to and from the hotel, ceremony and reception?"),y(),m(111," Lol no"),y(),H(112,"br"),b(113,"li")(114,"strong"),m(115,"Do you have any recommendations for where to eat, points of interest or things to do?"),y(),m(116," tbd"),y(),H(117,"br"),b(118,"li")(119,"strong"),m(120,"I still have questions. What is the best way to contact you?"),y(),m(121," Email or text to CT: (502)(IMA)(JERK)"),y(),H(122,"br")(123,"br")(124,"br")(125,"br"),y())},styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;align-items:center;text-align:center}h2[_ngcontent-%COMP%]{margin-bottom:5px}ul[_ngcontent-%COMP%]{list-style:none;padding:0}li[_ngcontent-%COMP%]{margin-bottom:10px}"]})};var DN=[{path:"",component:bd},{path:"event-info",component:Dd},{path:"rsvp",component:Td},{path:"registry",component:Sd},{path:"faq",component:nh},{path:"games",component:th},{path:"**",redirectTo:""}];var TN={providers:[xT(()=>OT(ZD.firebaseConfig)),IN(()=>bN()),Up(),Wm(DN)]};var rh=class t{nameOfImage="HeaderPicEmpty.png";nameOfImage2="HeaderWithSparkle.png";static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Ee({type:t,selectors:[["app-header"]],decls:2,vars:1,consts:[[1,"header"],["alt","Name img",1,"name-image",3,"src"]],template:function(n,r){n&1&&(b(0,"header",0),H(1,"img",1),y()),n&2&&(Ke(),Mu("src",r.nameOfImage2,Eo))},styles:[".name-image[_ngcontent-%COMP%]{width:40%;height:100px;display:block;margin:0 auto 25px}"]})};var L3=()=>({exact:!0}),ih=class t{static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Ee({type:t,selectors:[["app-nav"]],decls:13,vars:2,consts:[[1,"nav"],["routerLink","/","routerLinkActive","active",3,"routerLinkActiveOptions"],["routerLink","/event-info","routerLinkActive","active"],["routerLink","/rsvp","routerLinkActive","active"],["routerLink","/registry","routerLinkActive","active"],["routerLink","/faq","routerLinkActive","active"],["routerLink","/games","routerLinkActive","active"]],template:function(n,r){n&1&&(F(0,"nav",0)(1,"a",1),m(2,"Home"),U(),F(3,"a",2),m(4,"Event Info"),U(),F(5,"a",3),m(6,"RSVP"),U(),F(7,"a",4),m(8,"Registry"),U(),F(9,"a",5),m(10,"FAQ"),U(),F(11,"a",6),m(12,"Games"),U()()),n&2&&(Ke(),St("routerLinkActiveOptions",qg(1,L3)))},dependencies:[Gm,$o,$m],styles:['.nav[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:2rem}a[_ngcontent-%COMP%]{text-decoration:none;font-weight:500;color:#333;position:relative}a.active[_ngcontent-%COMP%]:after{content:"";position:absolute;width:100%;height:2px;bottom:-4px;left:0;background:#333}']})};var oh=class t{static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Ee({type:t,selectors:[["app-root"]],decls:4,vars:0,consts:[[1,"page-container"]],template:function(n,r){n&1&&(Ye(0,"app-header")(1,"app-nav"),F(2,"main",0),Ye(3,"router-outlet"),U())},dependencies:[Oa,rh,ih],encapsulation:2})};mm(oh,TN).catch(t=>console.error(t));
